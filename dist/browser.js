"use strict";var CDFormLibrary=(()=>{var pe={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"},Fe=class{constructor(){this.now=null,this.past=[],this.future=[]}undo(){let e=this.past.pop();e&&this.now&&(this.future.push(this.now),this.updateElement(e,"historyUndo"))}redo(){let e=this.future.pop();e&&this.now&&(this.past.push(this.now),this.updateElement(e,"historyRedo"))}updateHistory(e){if(!this.now){this.now=e;return}let n=this.now.value!==e.value,o=this.now.selection.some((s,r)=>s!==e.selection[r]);!n&&!o||(n&&(this.past.push(this.now),this.future=[]),this.now=e)}updateElement(e,n){this.now=e,this.updateElementState(e,{inputType:n,data:null})}};function kn(t,...e){return e.every(({value:n})=>n===t.value)}function Pe(t,...e){return e.every(({value:n,selection:o})=>n===t.value&&o[0]===t.selection[0]&&o[1]===t.selection[1])}function pt({value:t,selection:e},n,o){let[s,r]=e,i=typeof o=="function"?o({value:t,selection:e}):o;return{value:t,selection:i==="replace"?[s,Math.max(s+n.length,r)]:[s,r]}}function fe(t){return typeof t=="string"}function ft(t,e,n,o){let s="";for(let r=e.length;r<t.length;r++){let i=t[r]||"",a=o?.value[r]===i;if(!fe(i)||i===n&&!a)return s;s+=i}return s}function ht(t,e){return Array.isArray(e)?t.length===e.length&&Array.from(t).every((n,o)=>{let s=e[o]||"";return fe(s)?n===s:n.match(s)}):e.test(t)}function Dn(t,e,n){let o=null,s=null,r=Array.from(t.value).reduce((a,c,l)=>{let d=ft(e,a,c,n),u=a+d,p=e[u.length]||"";return o===null&&l>=t.selection[0]&&(o=u.length),s===null&&l>=t.selection[1]&&(s=u.length),fe(p)?u+p:c.match(p)?u+c:d.startsWith(c)?u:a},""),i=ft(e,r,"",n);return{value:ht(r+i,e)?r+i:r,selection:[o??r.length,s??r.length]}}function Rn({value:t,selection:e},n){let[o,s]=e,r=o,i=s,a=Array.from(t).reduce((c,l,d)=>{let u=c+l;return o===d&&(r=c.length),s===d&&(i=c.length),u.match(n)?u:c},"");return{value:a,selection:[Math.min(r,a.length),Math.min(i,a.length)]}}function de(t,e,n=null){if(ht(t.value,e))return t;let{value:o,selection:s}=Array.isArray(e)?Dn(t,e,n):Rn(t,e);return{selection:s,value:Array.isArray(e)?o.slice(0,e.length):o}}function mt(t,e){if(!Array.isArray(e))return t;let[n,o]=t.selection,s=[],r=Array.from(t.value).reduce((i,a,c)=>{let l=e[c]||"";return c===n&&s.push(i.length),c===o&&s.push(i.length),fe(l)&&l===a?i:i+a},"");return s.length<2&&s.push(...new Array(2-s.length).fill(r.length)),{value:r,selection:[s[0],s[1]]}}var W=class{constructor(e,n){this.maskOptions=n,this.unmaskInitialState={value:"",selection:[0,0]},this.value="",this.selection=[0,0];let o=this.getMaskExpression(e),{value:s,selection:r}=de(e,o);this.unmaskInitialState=mt({value:s,selection:r},o),this.value=s,this.selection=r}addCharacters(e){let{value:n,selection:o,maskOptions:s}=this,r={value:n,selection:o},{selection:[i,a]}=pt(r,e,s.overwriteMode),c=this.getMaskExpression({value:n.slice(0,i)+e+n.slice(a),selection:[i+e.length,i+e.length]}),[l,d]=pt(this.unmaskInitialState,e,s.overwriteMode).selection,u=this.unmaskInitialState.value.slice(0,l)+e,p=u.length,h=de({value:u+this.unmaskInitialState.value.slice(d),selection:[p,p]},c,r),m=n.slice(0,i),g=de({value:u,selection:[p,p]},c,r);if(g.value===m||g.value.length<m.length&&mt(g,c).value===this.unmaskInitialState.value.slice(0,l)||Pe(this,h))throw new Error("Invalid mask value");this.value=h.value,this.selection=h.selection}deleteCharacters(){let[e,n]=this.selection;if(e===n||!n)return;let{value:o}=this,s=this.getMaskExpression({value:o.slice(0,e)+o.slice(n),selection:[e,e]}),r={value:o},[i,a]=this.unmaskInitialState.selection,c=this.unmaskInitialState.value.slice(0,i)+this.unmaskInitialState.value.slice(a),l=de({value:c,selection:[i,i]},s,r);this.value=l.value,this.selection=l.selection}getMaskExpression(e){let{mask:n}=this.maskOptions;return typeof n=="function"?n(e):n}},Z=class{constructor(e){this.element=e,this.listeners=[]}listen(e,n,o){let s=n;this.element.addEventListener(e,s,o),this.listeners.push(()=>this.element.removeEventListener(e,s,o))}destroy(){this.listeners.forEach(e=>e())}},F={CTRL:1,ALT:2,SHIFT:4,META:8},q={Y:89,Z:90};function z(t,e,n){return t.ctrlKey===!!(e&F.CTRL)&&t.altKey===!!(e&F.ALT)&&t.shiftKey===!!(e&F.SHIFT)&&t.metaKey===!!(e&F.META)&&t.keyCode===n}function Fn(t){return z(t,F.CTRL,q.Y)||z(t,F.CTRL|F.SHIFT,q.Z)||z(t,F.META|F.SHIFT,q.Z)}function Pn(t){return z(t,F.CTRL,q.Z)||z(t,F.META,q.Z)}function Ne(t,e){var n;let o=t.value;if(typeof e=="string")t.value=e;else{let[s,r]=e.selection;t.value=e.value,t.matches(":focus")&&((n=t.setSelectionRange)===null||n===void 0||n.call(t,s,r))}t.value!==o&&t.dispatchEvent(new Event("input",{bubbles:!0}))}function Nn({value:t,selection:e},n){let[o,s]=e;if(o!==s)return[o,s];let r=n?t.slice(o).indexOf(`
`)+1||t.length:t.slice(0,s).lastIndexOf(`
`)+1;return[n?o:r,n?r:s]}function Hn({value:t,selection:e},n){let[o,s]=e;return o!==s?[o,s]:(n?[o,s+1]:[o-1,s]).map(i=>Math.min(Math.max(i,0),t.length))}var Un=/\s+$/g,Vn=/^\s+/g,gt=/\s/;function Bn({value:t,selection:e},n){let[o,s]=e;if(o!==s)return[o,s];if(n){let c=t.slice(o),[l]=c.match(Vn)||[""],d=c.trimStart().search(gt);return[o,d!==-1?o+l.length+d:t.length]}let r=t.slice(0,s),[i]=r.match(Un)||[""],a=r.trimEnd().split("").reverse().findIndex(c=>gt.exec(c));return[a!==-1?s-i.length-a:0,s]}function ue(t=[]){return(e,...n)=>t.reduce((o,s)=>Object.assign(Object.assign({},o),s(o,...n)),e)}function vt(t,e){let n=Object.assign(Object.assign({},pe),e),o=ue(n.preprocessors),s=ue(n.postprocessors),r=typeof t=="string"?{value:t,selection:[0,0]}:t,{elementState:i}=o({elementState:r,data:""},"validation"),a=new W(i,n),{value:c,selection:l}=s(a,r);return typeof t=="string"?c:{value:c,selection:l}}function Yn(){return t=>{let e=new Z(t),n=!1,o,s=t.value;return e.listen("keydown",({key:r})=>{n=r==="Unidentified"}),e.listen("beforeinput",r=>{o=r,s=t.value}),e.listen("input",r=>{n&&o.defaultPrevented&&o.inputType==="deleteContentBackward"&&r.inputType==="deleteContentBackward"&&(t.value=s)},{capture:!0}),()=>e.destroy()}}var Re=" ";function Gn(){let t="",e=0,n=null,o=!1;return s=>{let r=new Z(s);return r.listen("beforeinput",i=>{var a,c;let{value:l,selectionStart:d,selectionEnd:u}=s,p=n?.inputType==="insertText"&&n?.data===Re&&!l.slice(0,Number(u)).endsWith(Re);i.inputType==="insertText"&&i.data===`.${Re}`&&(n?.inputType==="deleteContentBackward"&&o?(s.value=t,(a=s.setSelectionRange)===null||a===void 0||a.call(s,e,e)):p&&((c=s.setSelectionRange)===null||c===void 0||c.call(s,d,d))),o=p,n=i,t=l,e=Number((p?e:u)===l.length?u:d)}),()=>r.destroy()}}var Kn=[Gn(),Yn()],G=class extends Fe{constructor(e,n){super(),this.element=e,this.maskitoOptions=n,this.isTextArea=this.element.nodeName==="TEXTAREA",this.eventListener=new Z(this.element),this.options=Object.assign(Object.assign({},pe),this.maskitoOptions),this.upcomingElementState=null,this.preprocessor=ue(this.options.preprocessors),this.postprocessor=ue(this.options.postprocessors),this.teardowns=this.options.plugins.concat(Kn).map(o=>o(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",o=>{if(Fn(o))return o.preventDefault(),this.redo();if(Pn(o))return o.preventDefault(),this.undo()}),this.eventListener.listen("beforeinput",o=>{var s,r,i;let a=o.inputType.includes("Forward");switch(this.updateHistory(this.elementState),o.inputType){case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:o,isForward:a,selection:Hn(this.elementState,a)});case"deleteHardLineBackward":case"deleteHardLineForward":case"deleteSoftLineBackward":case"deleteSoftLineForward":return this.handleDelete({event:o,isForward:a,selection:Nn(this.elementState,a),force:!0});case"deleteWordBackward":case"deleteWordForward":return this.handleDelete({event:o,isForward:a,selection:Bn(this.elementState,a)});case"historyRedo":return o.preventDefault(),this.redo();case"historyUndo":return o.preventDefault(),this.undo();case"insertCompositionText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(o);case"insertReplacementText":return;case"insertFromDrop":case"insertFromPaste":case"insertText":default:return this.handleInsert(o,(i=(s=o.data)!==null&&s!==void 0?s:(r=o.dataTransfer)===null||r===void 0?void 0:r.getData("text/plain"))!==null&&i!==void 0?i:"")}}),this.eventListener.listen("input",()=>{this.upcomingElementState&&!Pe(this.upcomingElementState,this.elementState)&&this.updateElementState(this.upcomingElementState),this.upcomingElementState=null},{capture:!0}),this.eventListener.listen("input",({inputType:o})=>{o!=="insertCompositionText"&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}destroy(){this.eventListener.destroy(),this.teardowns.forEach(e=>e?.())}updateElementState({value:e,selection:n},o){let s=this.elementState.value;this.updateValue(e),this.updateSelectionRange(n),o&&s!==e&&this.dispatchInputEvent(o)}get elementState(){let{value:e,selectionStart:n,selectionEnd:o}=this.element;return{value:e,selection:[n??0,o??0]}}get maxLength(){let{maxLength:e}=this.element;return e===-1?1/0:e}updateSelectionRange([e,n]){var o;let{element:s}=this;s.matches(":focus")&&(s.selectionStart!==e||s.selectionEnd!==n)&&((o=s.setSelectionRange)===null||o===void 0||o.call(s,e,n))}updateValue(e){(this.element.value!==e||this.element.isContentEditable)&&(this.element.value=e)}ensureValueFitsMask(){this.updateElementState(vt(this.elementState,this.options),{inputType:"insertText",data:null})}dispatchInputEvent(e={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},e),{bubbles:!0,cancelable:!1})))}handleDelete({event:e,selection:n,isForward:o}){let s={value:this.elementState.value,selection:n},{elementState:r}=this.preprocessor({elementState:s,data:""},o?"deleteForward":"deleteBackward"),i=new W(r,this.options);i.deleteCharacters();let a=this.postprocessor(i,s);if(kn(s,r,i,a)){let[c,l]=r.selection;return e.preventDefault(),this.updateSelectionRange(o?[l,l]:[c,c])}this.upcomingElementState=a}handleInsert(e,n){let{options:o,maxLength:s,elementState:r}=this,[i,a]=r.selection,{elementState:c,data:l=n}=this.preprocessor({data:n,elementState:r},"insert"),d=new W(c,o);try{d.addCharacters(l)}catch{return e.preventDefault()}this.upcomingElementState=this.clampState(this.postprocessor(d,r)),r.value.length>=s&&i===a&&(o.overwriteMode==="replace"&&!Pe(this.upcomingElementState,r)?this.dispatchInputEvent({inputType:"insertText",data:n}):this.upcomingElementState=null)}handleEnter(e){(this.isTextArea||this.element.isContentEditable)&&this.handleInsert(e,`
`)}clampState({value:e,selection:n}){let[o,s]=n,r=this.maxLength;return{value:e.slice(0,r),selection:[Math.min(o,r),Math.min(s,r)]}}};function wt(t,e,n){let o=Math.min(Number(n),Math.max(Number(e),Number(t)));return t instanceof Date?new Date(o):o}function jn(t){return t.replaceAll(/\W/g,"").length}var At={day:31,month:12,year:9999};var qn=new Date("0001-01-01T00:00"),zn=new Date("9999-12-31T23:59:59.999"),He={hours:23,minutes:59,seconds:59,milliseconds:999},St={hours:0,minutes:0,seconds:0,milliseconds:0},K="\xA0";var Wn=":",Zn="\uFF1A",ge=new RegExp(`[${K}APM]+$`,"g"),he=new RegExp(`${K}[AP]M$`,"g"),Ue=[":","."],xt={hours:2,minutes:2,seconds:2,milliseconds:3};var Lt=t=>{var e,n,o,s,r,i;return{day:(n=(e=t.match(/d/g))===null||e===void 0?void 0:e.length)!==null&&n!==void 0?n:0,month:(s=(o=t.match(/m/g))===null||o===void 0?void 0:o.length)!==null&&s!==void 0?s:0,year:(i=(r=t.match(/y/g))===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0}};function Jn(t){return{day:String(t.getDate()).padStart(2,"0"),month:String(t.getMonth()+1).padStart(2,"0"),year:String(t.getFullYear()).padStart(4,"0"),hours:String(t.getHours()).padStart(2,"0"),minutes:String(t.getMinutes()).padStart(2,"0"),seconds:String(t.getSeconds()).padStart(2,"0"),milliseconds:String(t.getMilliseconds()).padStart(3,"0")}}var Qn=["day","month","year"];function Xn(t){return[...Qn].sort((e,n)=>t.indexOf(e[0])>t.indexOf(n[0])?1:-1)}function eo(t,e){return t.length<e.length?!1:t.split(/\D/).every(n=>!/^0+$/.exec(n))}function _t(t,e,n){let o=jn(e);return t.replace(n,"").match(new RegExp(`(\\D*\\d[^\\d\\s]*){1,${o}}`,"g"))||[]}function Ve(t,e){let n=e.replaceAll(/[^dmy]/g,""),o=t.replaceAll(/\D+/g,""),s={day:o.slice(n.indexOf("d"),n.lastIndexOf("d")+1),month:o.slice(n.indexOf("m"),n.lastIndexOf("m")+1),year:o.slice(n.indexOf("y"),n.lastIndexOf("y")+1)};return Object.fromEntries(Object.entries(s).filter(([r,i])=>!!i).sort(([r],[i])=>e.toLowerCase().indexOf(r.slice(0,1))>e.toLowerCase().indexOf(i.slice(0,1))?1:-1))}function to(t,e){var n,o,s,r,i,a,c;let l=((n=t.year)===null||n===void 0?void 0:n.length)===2?`20${t.year}`:t.year,d=new Date(Number(l??"0"),Number((o=t.month)!==null&&o!==void 0?o:"1")-1,Number((s=t.day)!==null&&s!==void 0?s:"1"),Number((r=e?.hours)!==null&&r!==void 0?r:"0"),Number((i=e?.minutes)!==null&&i!==void 0?i:"0"),Number((a=e?.seconds)!==null&&a!==void 0?a:"0"),Number((c=e?.milliseconds)!==null&&c!==void 0?c:"0"));return d.setFullYear(Number(l??"0")),d}var Tt=", ";function J({day:t,month:e,year:n,hours:o,minutes:s,seconds:r,milliseconds:i},{dateMode:a,dateTimeSeparator:c=Tt,timeMode:l}){var d;let u=((d=a.match(/y/g))===null||d===void 0?void 0:d.length)===2?n?.slice(-2):n;return(a+(l?c+l:"")).replaceAll(/d+/g,t??"").replaceAll(/m+/g,e??"").replaceAll(/y+/g,u??"").replaceAll(/H+/g,o??"").replaceAll("MSS",i??"").replaceAll(/M+/g,s??"").replaceAll(/S+/g,r??"").replaceAll(/^\D+/g,"").replaceAll(/\D+$/g,"")}function no({dateString:t,dateModeTemplate:e,dateSegmentsSeparator:n,offset:o,selection:[s,r]}){var i,a;let c=Ve(t,e),l=Object.entries(c),d=Xn(e),u={};for(let m=0;m<l.length;m++){let[g,y]=l[m],b=J(u,{dateMode:e}),v=At[g],E=b.length&&n.length,L=o+b.length+E+Lt(e)[g],M=L>=s&&L===r;if(M&&Number(y)>Number(v)){let T=d[d.indexOf(g)+1];if(!T||T==="year")return{validatedDateString:"",updatedSelection:[s,r]};u[g]=`0${y.slice(0,-1)}`,l[m+1]=[T,y.slice(-1)+((a=(i=l[m+1])===null||i===void 0?void 0:i[1])!==null&&a!==void 0?a:"").slice(1)];continue}if(M&&Number(y)<1)return{validatedDateString:"",updatedSelection:[s,r]};u[g]=y}let p=J(u,{dateMode:e}),h=p.length-t.length;return{validatedDateString:p,updatedSelection:[s+h,r+h]}}function ye(t){return t}function Ct(){}var Mt=/[\\^$.*+?()[\]{}|]/g,oo=new RegExp(Mt.source);function be(t){return t&&oo.test(t)?t.replaceAll(Mt,String.raw`\$&`):t}function so(t,e){let n="";for(let o=0;o<t.length;o++){if(t[o]!==e[o])return n;n+=t[o]}return n}var ro=/^0+$/;function ve(t,e,n=0){let o=t.padEnd(e.length,"0");if(Number(o)<=Number(e))return{validatedSegmentValue:t,prefixedZeroesCount:n};if(o.endsWith("0"))return ve(`0${t.slice(0,e.length-1)}`,e,n+1);let s=t.slice(0,e.length-1);return ro.exec(s)?{validatedSegmentValue:"",prefixedZeroesCount:n}:ve(`${s}0`,e,n)}function yt(t){return t.replaceAll(new RegExp(Zn,"g"),Wn)}function bt(t){return t.replaceAll(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248))}function io(){return({elementState:t,data:e})=>{let{value:n,selection:o}=t;return{elementState:{selection:o,value:yt(n)},data:yt(e)}}}function ao({dateModeTemplate:t,dateSegmentSeparator:e,splitFn:n,uniteFn:o}){return({value:s,selection:r})=>{var i;let[a,c]=r,{dateStrings:l,restPart:d=""}=n(s),u=[],p=0;l.forEach(m=>{let g=Ve(m,t),b=Object.entries(g).reduce((v,[E,L])=>{let{validatedSegmentValue:M,prefixedZeroesCount:T}=ve(L,`${At[E]}`);return p+=T,Object.assign(Object.assign({},v),{[E]:M})},{});u.push(J(b,{dateMode:t}))});let h=o(u,s)+(!((i=l[l.length-1])===null||i===void 0)&&i.endsWith(e)?e:"")+d;return p&&h.slice(c+p,c+p+e.length)===e&&(p+=e.length),{selection:[a+p,c+p],value:h}}}function Ot(){return({elementState:t,data:e})=>{let{value:n,selection:o}=t;return{elementState:{selection:o,value:bt(n)},data:bt(e)}}}function lo(t){return Array.from(t.replace(" AA","")).map(e=>Ue.includes(e)?e:/\d/).concat(t.includes("AA")?[K,/[AP]/i,/M/i]:[])}function co(t,e){return Object.fromEntries(Object.entries(t).map(([n,o])=>[n,e(String(o),xt[n])]))}function uo(t){return co(t,(e,n)=>e.padStart(n,"0"))}var Et={HH:"hours",MM:"minutes",SS:"seconds",MSS:"milliseconds"};function It(t,e){let n=t.replaceAll(/\D+/g,""),o=0;return Object.fromEntries(e.split(/\W/).filter(s=>Et[s]).map(s=>{let r=n.slice(o,o+s.length);return o+=s.length,[Et[s],r]}))}var po=/^\D*/,fo=/\D*$/;function mo({hours:t="",minutes:e="",seconds:n="",milliseconds:o=""}){return`${t}:${e}:${n}.${o}`.replace(po,"").replace(fo,"")}var go=new RegExp(`[${Ue.map(be).join("")}]$`);function ho({value:t,selection:e},{mode:n,timeSegmentMaxValues:o=He}){let[s,r]=e,i=It(t,n),a=Object.entries(i),c=uo(o),l={},d=0;for(let[b,v]of a){let E=c[b],{validatedSegmentValue:L,prefixedZeroesCount:M}=ve(v,String(E));d+=M,l[b]=L}let[u=""]=t.match(/^\D+(?=\d)/g)||[],[p=""]=t.match(/\D+$/g)||[],h=u+mo(l)+p,m=Math.max(h.length-t.length-d,0),g=s+d+m,y=r+d+m;return g===y&&d&&h.slice(0,y+1).match(go)&&(g++,y++),{value:h,selection:[g,y]}}function vo({timeMode:t,timeSegmentMinValues:e=St,timeSegmentMaxValues:n=He,parseValue:o=s=>({timeString:s})}){let s=new RegExp(`[^\\d${Ue.map(be).join("")}]+`);return({elementState:r,data:i},a)=>{if(a!=="insert")return{elementState:r,data:i};let{value:c,selection:l}=r,[d,u]=l,p=i.replace(s,""),h=u+p.length,m=c.slice(0,d)+p+c.slice(h),{timeString:g,restValue:y=""}=o(m),b=Object.entries(It(g,t)),v=y.length;for(let[E,L]of b){let M=e[E],T=n[E],w=Number(L),x=v+xt[E];if(x>=d&&x<=h&&w!==wt(w,M,T))return{elementState:r,data:""};v+=L.length+1}return{elementState:r,data:i}}}function yo(t){if(!t.includes("AA"))return ye;let e=/^[AP]$/gi;return({elementState:n,data:o})=>{let{value:s,selection:r}=n,i=s.toUpperCase(),a=o.toUpperCase();return i.match(he)&&a.match(e)?{elementState:{value:i.replaceAll(he,""),selection:r},data:`${a}M`}:{elementState:{selection:r,value:i},data:a}}}function bo(t){return t.includes("AA")?({value:e,selection:n},o)=>{if(!e.match(ge)||e.match(he))return{value:e,selection:n};let[s,r]=n;if(o.value.match(he)){let c=e.replace(ge,"");return{value:c,selection:[Math.min(s,c.length),Math.min(r,c.length)]}}let i=`${K}${e.includes("P")?"P":"A"}M`,a=e.replace(ge,c=>c!==K?i:c);return{value:a,selection:r>=a.indexOf(i)?[a.length,a.length]:n}}:ye}function Eo(t,e){let n=Lt(e);return Object.fromEntries(Object.entries(t).map(([o,s])=>{let r=n[o];return[o,s.length===r&&/^0+$/.exec(s)?"1".padStart(r,"0"):s]}))}var wo="1972";function Ao({dateModeTemplate:t,min:e=qn,max:n=zn,rangeSeparator:o="",dateSegmentSeparator:s="."}){return({value:r,selection:i})=>{let a=o&&r.endsWith(o),c=_t(r,t,o),l="";for(let d of c){l+=l?o:"";let u=Ve(d,t);if(!eo(d,t)){let m=Eo(u,t),g=J(m,{dateMode:t}),y=d.endsWith(s)?s:"";l+=g+y;continue}let p=to(Object.assign({year:wo},u)),h=wt(p,e,n);l+=J(Jn(h),{dateMode:t})}return{selection:i,value:l+(a?o:"")}}}function So({dateModeTemplate:t,dateSegmentsSeparator:e,rangeSeparator:n="",dateTimeSeparator:o=Tt}){return({elementState:s,data:r})=>{let i=t.split(e),a=r.includes(o),c=r.slice(0,a?r.indexOf(o):1/0).split(/\D/).filter(Boolean);if(!c.length||c.length%i.length!==0)return{elementState:s,data:r};let l=c.reduce((d,u,p)=>{var h;let m=(h=i[p%i.length])!==null&&h!==void 0?h:"",g=Math.trunc(p/i.length),y=p%i.length===i.length-1;return d[g]||(d[g]=""),d[g]+=y?u:`${u.padStart(m.length,"0")}${e}`,d},[]);return{elementState:s,data:a?`${l[0]}${r.slice(r.indexOf(o))}`:l.join(n)}}}function xo(t){let e=new RegExp(`${be(t)}$`);return t?({value:n,selection:o},s)=>{if(!n&&!s.value.endsWith(t))return{value:n,selection:o};if(!n.endsWith(t)&&!s.value.endsWith(t))return{selection:o,value:n+t};let r=s.value.replace(e,""),i=s.selection[1]>r.length,a=so(r,n);return{selection:o,value:Array.from(t).reverse().reduce((c,l,d)=>{let u=c.length-1-d,p=a[u]===l&&i;return c[u]!==l||p?c.slice(0,u+1)+l+c.slice(u+1):c},n)}}:ye}function Lo(t){return t?({value:e,selection:n},o)=>{if(e.startsWith(t)||!e&&!o.value.startsWith(t))return{value:e,selection:n};let[s,r]=n,i=Array.from(t).reduce((c,l,d)=>c[d]===l?c:c.slice(0,d)+l+c.slice(d),e),a=i.length-e.length;return{selection:[s+a,r+a],value:i}}:ye}function _o({dateModeTemplate:t,dateSegmentsSeparator:e,rangeSeparator:n=""}){return({elementState:o,data:s})=>{let{value:r,selection:i}=o;if(s===e)return{elementState:o,data:i[0]===r.length?s:""};if(!s.replaceAll(/\D/g,""))return{elementState:o,data:s};let a=s.replaceAll(new RegExp(`[^\\d${be(e)}${n}]`,"g"),""),[c,l]=i,d=l+s.length,u=r.slice(0,c)+a+r.slice(d),p=_t(u,t,n),h="",m=!!n&&u.includes(n);for(let y of p){let{validatedDateString:b,updatedSelection:v}=no({dateString:y,dateModeTemplate:t,dateSegmentsSeparator:e,offset:h.length,selection:[c,d]});if(y&&!b)return{elementState:o,data:""};d=v[1],h+=m&&!h?b+n:b}let g=h.slice(c,d);return{elementState:{selection:i,value:h.slice(0,c)+g.split(e).map(y=>"0".repeat(y.length)).join(e)+h.slice(d)},data:g}}}function To(t){return t<0?Ct:e=>{let n=o=>{let s=Number(e.selectionStart),r=e.value.toUpperCase();if(o.key!=="ArrowUp"&&o.key!=="ArrowDown"||s<t)return;o.preventDefault();let i=r.includes("A")?"P":r.includes("P")||o.key==="ArrowUp"?"A":"P",a=`${K}${i}M`;Ne(e,{value:r.length===t?r+a:r.replace(ge,a),selection:[s,s]})};return e.addEventListener("keydown",n),()=>e.removeEventListener("keydown",n)}}function Co({step:t,fullMode:e,timeSegmentMaxValues:n}){let o=Mo(e);return t<=0?Ct:s=>{let r=i=>{var a;if(i.key!=="ArrowUp"&&i.key!=="ArrowDown")return;i.preventDefault();let c=(a=s.selectionStart)!==null&&a!==void 0?a:0,l=Oo({segmentsIndexes:o,selectionStart:c});if(!l)return;let d=Io({selection:o.get(l),value:s.value,toAdd:i.key==="ArrowUp"?t:-t,max:n[l]});Ne(s,{value:d,selection:[c,c]})};return s.addEventListener("keydown",r),()=>s.removeEventListener("keydown",r)}}function Mo(t){return new Map([["hours",me(t,"HH")],["milliseconds",me(t,"MSS")],["minutes",me(t,"MM")],["seconds",me(t,"SS")]])}function me(t,e){let n=t.indexOf(e);return n===-1?[-1,-1]:[n,n+e.length]}function Oo({segmentsIndexes:t,selectionStart:e}){for(let[n,o]of t.entries()){let[s,r]=o;if(s<=e&&e<=r)return n}return null}function Io({selection:t,value:e,toAdd:n,max:o}){let[s,r]=t,i=Number(e.slice(s,r).padEnd(r-s,"0")),a=$o(i+n,o+1);return e.slice(0,s)+String(a).padStart(r-s,"0")+e.slice(r,e.length)}function $o(t,e){return t<0&&(t+=Math.floor(Math.abs(t)/e+1)*e),t%e}function $t(t=""){let e=(n,[o,s])=>s>=n.length-t.length;return({elementState:n},o)=>{let{value:s,selection:r}=n;if(!s||e(s,r))return{elementState:n};let[i,a]=r,c=s.slice(i,a).replaceAll(/\d/g,"0"),l=s.slice(0,i)+c+s.slice(a);return c.replaceAll(/\D/g,"")?o==="validation"||o==="insert"&&i===a?{elementState:{selection:r,value:l}}:{elementState:{selection:o==="deleteBackward"||o==="insert"?[i,i]:[a,a],value:l}}:{elementState:n}}}function kt({mode:t,separator:e=".",max:n,min:o}){let s=t.split("/").join(e);return Object.assign(Object.assign({},pe),{mask:Array.from(s).map(r=>e.includes(r)?r:/\d/),overwriteMode:"replace",preprocessors:[Ot(),$t(),So({dateModeTemplate:s,dateSegmentsSeparator:e}),_o({dateModeTemplate:s,dateSegmentsSeparator:e})],postprocessors:[ao({dateModeTemplate:s,dateSegmentSeparator:e,splitFn:r=>({dateStrings:[r]}),uniteFn:([r=""])=>r}),Ao({min:o,max:n,dateModeTemplate:s,dateSegmentSeparator:e})]})}var hr=Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});function Ee({mode:t,timeSegmentMaxValues:e={},timeSegmentMinValues:n={},step:o=0,prefix:s="",postfix:r=""}){let i=t.includes("AA"),a=Object.assign(Object.assign(Object.assign({},He),i?{hours:12}:{}),e),c=Object.assign(Object.assign(Object.assign({},St),i?{hours:1}:{}),n),l=[...s,...lo(t)];return{mask:r?({value:d})=>ko(l,d).concat(...r):l,preprocessors:[Ot(),io(),$t(r),yo(t),vo({timeMode:t,timeSegmentMinValues:c,timeSegmentMaxValues:a})],postprocessors:[bo(t),d=>ho(d,{mode:t,timeSegmentMaxValues:a}),Lo(s),xo(r)],plugins:[Co({fullMode:t,step:o,timeSegmentMaxValues:a}),To(t.indexOf("AA"))],overwriteMode:"replace"}}function ko(t,e){let n=Math.min(e.replaceAll(/\D/g,"").length,t.filter(s=>typeof s!="string").length)||1,o=t.findIndex(s=>typeof s!="string"&&!--n)+1;return t.slice(0,o)}function Be(t,e){t.split(/\s+/).forEach(n=>{e(n)})}var Q=class{constructor(){this._events={}}on(e,n){Be(e,o=>{let s=this._events[o]||[];s.push(n),this._events[o]=s})}off(e,n){var o=arguments.length;if(o===0){this._events={};return}Be(e,s=>{if(o===1){delete this._events[s];return}let r=this._events[s];r!==void 0&&(r.splice(r.indexOf(n),1),this._events[s]=r)})}trigger(e,...n){var o=this;Be(e,s=>{let r=o._events[s];r!==void 0&&r.forEach(i=>{i.apply(o,n)})})}};function Ye(t){return t.plugins={},class extends t{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(e,n){t.plugins[e]={name:e,fn:n}}initializePlugins(e){var n,o;let s=this,r=[];if(Array.isArray(e))e.forEach(i=>{typeof i=="string"?r.push(i):(s.plugins.settings[i.name]=i.options,r.push(i.name))});else if(e)for(n in e)e.hasOwnProperty(n)&&(s.plugins.settings[n]=e[n],r.push(n));for(;o=r.shift();)s.require(o)}loadPlugin(e){var n=this,o=n.plugins,s=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');o.requested[e]=!0,o.loaded[e]=s.fn.apply(n,[n.plugins.settings[e]||{}]),o.names.push(e)}require(e){var n=this,o=n.plugins;if(!n.plugins.loaded.hasOwnProperty(e)){if(o.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');n.loadPlugin(e)}return o.loaded[e]}}}var X=t=>(t=t.filter(Boolean),t.length<2?t[0]||"":Ro(t)==1?"["+t.join("")+"]":"(?:"+t.join("|")+")"),Ge=t=>{if(!Do(t))return t.join("");let e="",n=0,o=()=>{n>1&&(e+="{"+n+"}")};return t.forEach((s,r)=>{if(s===t[r-1]){n++;return}o(),e+=s,n=1}),o(),e},Ke=t=>{let e=Array.from(t);return X(e)},Do=t=>new Set(t).size!==t.length,U=t=>(t+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),Ro=t=>t.reduce((e,n)=>Math.max(e,Fo(n)),0),Fo=t=>Array.from(t).length;var je=t=>{if(t.length===1)return[[t]];let e=[],n=t.substring(1);return je(n).forEach(function(s){let r=s.slice(0);r[0]=t.charAt(0)+r[0],e.push(r),r=s.slice(0),r.unshift(t.charAt(0)),e.push(r)}),e};var Po=[[0,65535]],No="[\u0300-\u036F\xB7\u02BE\u02BC]",we,Pt,Ho=3,qe={},Dt={"/":"\u2044\u2215",0:"\u07C0",a:"\u2C65\u0250\u0251",aa:"\uA733",ae:"\xE6\u01FD\u01E3",ao:"\uA735",au:"\uA737",av:"\uA739\uA73B",ay:"\uA73D",b:"\u0180\u0253\u0183",c:"\uA73F\u0188\u023C\u2184",d:"\u0111\u0257\u0256\u1D05\u018C\uABB7\u0501\u0266",e:"\u025B\u01DD\u1D07\u0247",f:"\uA77C\u0192",g:"\u01E5\u0260\uA7A1\u1D79\uA77F\u0262",h:"\u0127\u2C68\u2C76\u0265",i:"\u0268\u0131",j:"\u0249\u0237",k:"\u0199\u2C6A\uA741\uA743\uA745\uA7A3",l:"\u0142\u019A\u026B\u2C61\uA749\uA747\uA781\u026D",m:"\u0271\u026F\u03FB",n:"\uA7A5\u019E\u0272\uA791\u1D0E\u043B\u0509",o:"\xF8\u01FF\u0254\u0275\uA74B\uA74D\u1D11",oe:"\u0153",oi:"\u01A3",oo:"\uA74F",ou:"\u0223",p:"\u01A5\u1D7D\uA751\uA753\uA755\u03C1",q:"\uA757\uA759\u024B",r:"\u024D\u027D\uA75B\uA7A7\uA783",s:"\xDF\u023F\uA7A9\uA785\u0282",t:"\u0167\u01AD\u0288\u2C66\uA787",th:"\xFE",tz:"\uA729",u:"\u0289",v:"\u028B\uA75F\u028C",vy:"\uA761",w:"\u2C73",y:"\u01B4\u024F\u1EFF",z:"\u01B6\u0225\u0240\u2C6C\uA763",hv:"\u0195"};for(let t in Dt){let e=Dt[t]||"";for(let n=0;n<e.length;n++){let o=e.substring(n,n+1);qe[o]=t}}var Uo=new RegExp(Object.keys(qe).join("|")+"|"+No,"gu"),Vo=t=>{we===void 0&&(we=Ko(t||Po))},Rt=(t,e="NFKD")=>t.normalize(e),ee=t=>Array.from(t).reduce((e,n)=>e+Bo(n),""),Bo=t=>(t=Rt(t).toLowerCase().replace(Uo,e=>qe[e]||""),Rt(t,"NFC"));function*Yo(t){for(let[e,n]of t)for(let o=e;o<=n;o++){let s=String.fromCharCode(o),r=ee(s);r!=s.toLowerCase()&&(r.length>Ho||r.length!=0&&(yield{folded:r,composed:s,code_point:o}))}}var Go=t=>{let e={},n=(o,s)=>{let r=e[o]||new Set,i=new RegExp("^"+Ke(r)+"$","iu");s.match(i)||(r.add(U(s)),e[o]=r)};for(let o of Yo(t))n(o.folded,o.folded),n(o.folded,o.composed);return e},Ko=t=>{let e=Go(t),n={},o=[];for(let r in e){let i=e[r];i&&(n[r]=Ke(i)),r.length>1&&o.push(U(r))}o.sort((r,i)=>i.length-r.length);let s=X(o);return Pt=new RegExp("^"+s,"u"),n},jo=(t,e=1)=>{let n=0;return t=t.map(o=>(we[o]&&(n+=o.length),we[o]||o)),n>=e?Ge(t):""},qo=(t,e=1)=>(e=Math.max(e,t.length-1),X(je(t).map(n=>jo(n,e)))),Ft=(t,e=!0)=>{let n=t.length>1?1:0;return X(t.map(o=>{let s=[],r=e?o.length():o.length()-1;for(let i=0;i<r;i++)s.push(qo(o.substrs[i]||"",n));return Ge(s)}))},zo=(t,e)=>{for(let n of e){if(n.start!=t.start||n.end!=t.end||n.substrs.join("")!==t.substrs.join(""))continue;let o=t.parts,s=i=>{for(let a of o){if(a.start===i.start&&a.substr===i.substr)return!1;if(!(i.length==1||a.length==1)&&(i.start<a.start&&i.end>a.start||a.start<i.start&&a.end>i.start))return!0}return!1};if(!(n.parts.filter(s).length>0))return!0}return!1},Ae=class t{parts;substrs;start;end;constructor(){this.parts=[],this.substrs=[],this.start=0,this.end=0}add(e){e&&(this.parts.push(e),this.substrs.push(e.substr),this.start=Math.min(e.start,this.start),this.end=Math.max(e.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(e,n){let o=new t,s=JSON.parse(JSON.stringify(this.parts)),r=s.pop();for(let c of s)o.add(c);let i=n.substr.substring(0,e-r.start),a=i.length;return o.add({start:r.start,end:r.start+a,length:a,substr:i}),o}},Nt=t=>{Vo(),t=ee(t);let e="",n=[new Ae];for(let o=0;o<t.length;o++){let r=t.substring(o).match(Pt),i=t.substring(o,o+1),a=r?r[0]:null,c=[],l=new Set;for(let d of n){let u=d.last();if(!u||u.length==1||u.end<=o)if(a){let p=a.length;d.add({start:o,end:o+p,length:p,substr:a}),l.add("1")}else d.add({start:o,end:o+1,length:1,substr:i}),l.add("2");else if(a){let p=d.clone(o,u),h=a.length;p.add({start:o,end:o+h,length:h,substr:a}),c.push(p)}else l.add("3")}if(c.length>0){c=c.sort((d,u)=>d.length()-u.length());for(let d of c)zo(d,n)||n.push(d);continue}if(o>0&&l.size==1&&!l.has("3")){e+=Ft(n,!1);let d=new Ae,u=n[0];u&&d.add(u.last()),n=[d]}}return e+=Ft(n,!0),e};var Ht=(t,e)=>{if(t)return t[e]},Ut=(t,e)=>{if(t){for(var n,o=e.split(".");(n=o.shift())&&(t=t[n]););return t}},Se=(t,e,n)=>{var o,s;return!t||(t=t+"",e.regex==null)||(s=t.search(e.regex),s===-1)?0:(o=e.string.length/t.length,s===0&&(o+=.5),o*n)},xe=(t,e)=>{var n=t[e];if(typeof n=="function")return n;n&&!Array.isArray(n)&&(t[e]=[n])},te=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},Vt=(t,e)=>typeof t=="number"&&typeof e=="number"?t>e?1:t<e?-1:0:(t=ee(t+"").toLowerCase(),e=ee(e+"").toLowerCase(),t>e?1:e>t?-1:0);var Le=class{items;settings;constructor(e,n){this.items=e,this.settings=n||{diacritics:!0}}tokenize(e,n,o){if(!e||!e.length)return[];let s=[],r=e.split(/\s+/);var i;return o&&(i=new RegExp("^("+Object.keys(o).map(U).join("|")+"):(.*)$")),r.forEach(a=>{let c,l=null,d=null;i&&(c=a.match(i))&&(l=c[1],a=c[2]),a.length>0&&(this.settings.diacritics?d=Nt(a)||null:d=U(a),d&&n&&(d="\\b"+d)),s.push({string:a,regex:d?new RegExp(d,"iu"):null,field:l})}),s}getScoreFunction(e,n){var o=this.prepareSearch(e,n);return this._getScoreFunction(o)}_getScoreFunction(e){let n=e.tokens,o=n.length;if(!o)return function(){return 0};let s=e.options.fields,r=e.weights,i=s.length,a=e.getAttrFn;if(!i)return function(){return 1};let c=(function(){return i===1?function(l,d){let u=s[0].field;return Se(a(d,u),l,r[u]||1)}:function(l,d){var u=0;if(l.field){let p=a(d,l.field);!l.regex&&p?u+=1/i:u+=Se(p,l,1)}else te(r,(p,h)=>{u+=Se(a(d,h),l,p)});return u/i}})();return o===1?function(l){return c(n[0],l)}:e.options.conjunction==="and"?function(l){var d,u=0;for(let p of n){if(d=c(p,l),d<=0)return 0;u+=d}return u/o}:function(l){var d=0;return te(n,u=>{d+=c(u,l)}),d/o}}getSortFunction(e,n){var o=this.prepareSearch(e,n);return this._getSortFunction(o)}_getSortFunction(e){var n,o=[];let s=this,r=e.options,i=!e.query&&r.sort_empty?r.sort_empty:r.sort;if(typeof i=="function")return i.bind(this);let a=function(l,d){return l==="$score"?d.score:e.getAttrFn(s.items[d.id],l)};if(i)for(let l of i)(e.query||l.field!=="$score")&&o.push(l);if(e.query){n=!0;for(let l of o)if(l.field==="$score"){n=!1;break}n&&o.unshift({field:"$score",direction:"desc"})}else o=o.filter(l=>l.field!=="$score");return o.length?function(l,d){var u,p;for(let h of o)if(p=h.field,u=(h.direction==="desc"?-1:1)*Vt(a(p,l),a(p,d)),u)return u;return 0}:null}prepareSearch(e,n){let o={};var s=Object.assign({},n);if(xe(s,"sort"),xe(s,"sort_empty"),s.fields){xe(s,"fields");let r=[];s.fields.forEach(i=>{typeof i=="string"&&(i={field:i,weight:1}),r.push(i),o[i.field]="weight"in i?i.weight:1}),s.fields=r}return{options:s,query:e.toLowerCase().trim(),tokens:this.tokenize(e,s.respect_word_boundaries,o),total:0,items:[],weights:o,getAttrFn:s.nesting?Ut:Ht}}search(e,n){var o=this,s,r;r=this.prepareSearch(e,n),n=r.options,e=r.query;let i=n.score||o._getScoreFunction(r);e.length?te(o.items,(c,l)=>{s=i(c),(n.filter===!1||s>0)&&r.items.push({score:s,id:l})}):te(o.items,(c,l)=>{r.items.push({score:1,id:l})});let a=o._getSortFunction(r);return a&&r.items.sort(a),r.total=r.items.length,typeof n.limit=="number"&&(r.items=r.items.slice(0,n.limit)),r}};var R=t=>typeof t>"u"||t===null?null:ne(t),ne=t=>typeof t=="boolean"?t?"1":"0":t+"",_e=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Bt=(t,e)=>e>0?window.setTimeout(t,e):(t.call(null),null),Yt=(t,e)=>{var n;return function(o,s){var r=this;n&&(r.loading=Math.max(r.loading-1,0),clearTimeout(n)),n=setTimeout(function(){n=null,r.loadedSearches[o]=!0,t.call(r,o,s)},e)}},ze=(t,e,n)=>{var o,s=t.trigger,r={};t.trigger=function(){var i=arguments[0];if(e.indexOf(i)!==-1)r[i]=arguments;else return s.apply(t,arguments)},n.apply(t,[]),t.trigger=s;for(o of e)o in r&&s.apply(t,r[o])},Gt=t=>({start:t.selectionStart||0,length:(t.selectionEnd||0)-(t.selectionStart||0)}),C=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},k=(t,e,n,o)=>{t.addEventListener(e,n,o)},V=(t,e)=>{if(!e||!e[t])return!1;var n=(e.altKey?1:0)+(e.ctrlKey?1:0)+(e.shiftKey?1:0)+(e.metaKey?1:0);return n===1},Te=(t,e)=>{let n=t.getAttribute("id");return n||(t.setAttribute("id",e),e)},We=t=>t.replace(/[\\"']/g,"\\$&"),B=(t,e)=>{e&&t.append(e)},O=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)};var P=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(Ze(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},Ze=t=>typeof t=="string"&&t.indexOf("<")>-1,Kt=t=>t.replace(/['"\\]/g,"\\$&"),Ce=(t,e)=>{var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!1),t.dispatchEvent(n)},oe=(t,e)=>{Object.assign(t.style,e)},D=(t,...e)=>{var n=jt(e);t=qt(t),t.map(o=>{n.map(s=>{o.classList.add(s)})})},H=(t,...e)=>{var n=jt(e);t=qt(t),t.map(o=>{n.map(s=>{o.classList.remove(s)})})},jt=t=>{var e=[];return O(t,n=>{typeof n=="string"&&(n=n.trim().split(/[\t\n\f\r\s]/)),Array.isArray(n)&&(e=e.concat(n))}),e.filter(Boolean)},qt=t=>(Array.isArray(t)||(t=[t]),t),Me=(t,e,n)=>{if(!(n&&!n.contains(t)))for(;t&&t.matches;){if(t.matches(e))return t;t=t.parentNode}},Je=(t,e=0)=>e>0?t[t.length-1]:t[0],zt=t=>Object.keys(t).length===0,Qe=(t,e)=>{if(!t)return-1;e=e||t.nodeName;for(var n=0;t=t.previousElementSibling;)t.matches(e)&&n++;return n},_=(t,e)=>{O(e,(n,o)=>{n==null?t.removeAttribute(o):t.setAttribute(o,""+n)})},se=(t,e)=>{t.parentNode&&t.parentNode.replaceChild(e,t)};var Wt=(t,e)=>{if(e===null)return;if(typeof e=="string"){if(!e.length)return;e=new RegExp(e,"i")}let n=r=>{var i=r.data.match(e);if(i&&r.data.length>0){var a=document.createElement("span");a.className="highlight";var c=r.splitText(i.index);c.splitText(i[0].length);var l=c.cloneNode(!0);return a.appendChild(l),se(c,a),1}return 0},o=r=>{r.nodeType===1&&r.childNodes&&!/(script|style)/i.test(r.tagName)&&(r.className!=="highlight"||r.tagName!=="SPAN")&&Array.from(r.childNodes).forEach(i=>{s(i)})},s=r=>r.nodeType===3?n(r):(o(r),0);s(t)},Zt=t=>{var e=t.querySelectorAll("span.highlight");Array.prototype.forEach.call(e,function(n){var o=n.parentNode;o.replaceChild(n.firstChild,n),o.normalize()})};var Wo=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),re=Wo?"metaKey":"ctrlKey";var Xe={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(t){return t.length>0},render:{}};function Oe(t,e){var n=Object.assign({},Xe,e),o=n.dataAttr,s=n.labelField,r=n.valueField,i=n.disabledField,a=n.optgroupField,c=n.optgroupLabelField,l=n.optgroupValueField,d=t.tagName.toLowerCase(),u=t.getAttribute("placeholder")||t.getAttribute("data-placeholder");if(!u&&!n.allowEmptyOption){let g=t.querySelector('option[value=""]');g&&(u=g.textContent)}var p={placeholder:u,options:[],optgroups:[],items:[],maxItems:null},h=()=>{var g,y=p.options,b={},v=1;let E=0;var L=w=>{var x=Object.assign({},w.dataset),A=o&&x[o];return typeof A=="string"&&A.length&&(x=Object.assign(x,JSON.parse(A))),x},M=(w,x)=>{var A=R(w.value);if(A!=null&&!(!A&&!n.allowEmptyOption)){if(b.hasOwnProperty(A)){if(x){var $=b[A][a];$?Array.isArray($)?$.push(x):b[A][a]=[$,x]:b[A][a]=x}}else{var S=L(w);S[s]=S[s]||w.textContent,S[r]=S[r]||A,S[i]=S[i]||w.disabled,S[a]=S[a]||x,S.$option=w,S.$order=S.$order||++E,b[A]=S,y.push(S)}w.selected&&p.items.push(A)}},T=w=>{var x,A;A=L(w),A[c]=A[c]||w.getAttribute("label")||"",A[l]=A[l]||v++,A[i]=A[i]||w.disabled,A.$order=A.$order||++E,p.optgroups.push(A),x=A[l],O(w.children,$=>{M($,x)})};p.maxItems=t.hasAttribute("multiple")?null:1,O(t.children,w=>{g=w.tagName.toLowerCase(),g==="optgroup"?T(w):g==="option"&&M(w)})},m=()=>{let g=t.getAttribute(o);if(g)p.options=JSON.parse(g),O(p.options,b=>{p.items.push(b[r])});else{var y=t.value.trim()||"";if(!n.allowEmptyOption&&!y.length)return;let b=y.split(n.delimiter);O(b,v=>{let E={};E[s]=v,E[r]=v,p.options.push(E)}),p.items=b}};return d==="select"?h():m(),Object.assign({},Xe,p,e)}var Xt=0,I=class extends Ye(Q){constructor(e,n){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,Xt++;var o,s=P(e);if(s.tomselect)throw new Error("Tom Select already initialized on this element");s.tomselect=this;var r=window.getComputedStyle&&window.getComputedStyle(s,null);o=r.getPropertyValue("direction");let i=Oe(s,n);this.settings=i,this.input=s,this.tabIndex=s.tabIndex||0,this.is_select_tag=s.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(o),this.inputId=Te(s,"tomselect-"+Xt),this.isRequired=s.required,this.sifter=new Le(this.options,{diacritics:i.diacritics}),i.mode=i.mode||(i.maxItems===1?"single":"multi"),typeof i.hideSelected!="boolean"&&(i.hideSelected=i.mode==="multi"),typeof i.hidePlaceholder!="boolean"&&(i.hidePlaceholder=i.mode!=="multi");var a=i.createFilter;typeof a!="function"&&(typeof a=="string"&&(a=new RegExp(a)),a instanceof RegExp?i.createFilter=y=>a.test(y):i.createFilter=y=>this.settings.duplicates||!this.options[y]),this.initializePlugins(i.plugins),this.setupCallbacks(),this.setupTemplates();let c=P("<div>"),l=P("<div>"),d=this._render("dropdown"),u=P('<div role="listbox" tabindex="-1">'),p=this.input.getAttribute("class")||"",h=i.mode;var m;if(D(c,i.wrapperClass,p,h),D(l,i.controlClass),B(c,l),D(d,i.dropdownClass,h),i.copyClassesToDropdown&&D(d,p),D(u,i.dropdownContentClass),B(d,u),P(i.dropdownParent||c).appendChild(d),Ze(i.controlInput)){m=P(i.controlInput);var g=["autocorrect","autocapitalize","autocomplete","spellcheck"];O(g,y=>{s.getAttribute(y)&&_(m,{[y]:s.getAttribute(y)})}),m.tabIndex=-1,l.appendChild(m),this.focus_node=m}else i.controlInput?(m=P(i.controlInput),this.focus_node=m):(m=P("<input/>"),this.focus_node=l);this.wrapper=c,this.dropdown=d,this.dropdown_content=u,this.control=l,this.control_input=m,this.setup()}setup(){let e=this,n=e.settings,o=e.control_input,s=e.dropdown,r=e.dropdown_content,i=e.wrapper,a=e.control,c=e.input,l=e.focus_node,d={passive:!0},u=e.inputId+"-ts-dropdown";_(r,{id:u}),_(l,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":u});let p=Te(l,e.inputId+"-ts-control"),h="label[for='"+Kt(e.inputId)+"']",m=document.querySelector(h),g=e.focus.bind(e);if(m){k(m,"click",g),_(m,{for:p});let v=Te(m,e.inputId+"-ts-label");_(l,{"aria-labelledby":v}),_(r,{"aria-labelledby":v})}if(i.style.width=c.style.width,e.plugins.names.length){let v="plugin-"+e.plugins.names.join(" plugin-");D([i,s],v)}(n.maxItems===null||n.maxItems>1)&&e.is_select_tag&&_(c,{multiple:"multiple"}),n.placeholder&&_(o,{placeholder:n.placeholder}),!n.splitOn&&n.delimiter&&(n.splitOn=new RegExp("\\s*"+U(n.delimiter)+"+\\s*")),n.load&&n.loadThrottle&&(n.load=Yt(n.load,n.loadThrottle)),k(s,"mousemove",()=>{e.ignoreHover=!1}),k(s,"mouseenter",v=>{var E=Me(v.target,"[data-selectable]",s);E&&e.onOptionHover(v,E)},{capture:!0}),k(s,"click",v=>{let E=Me(v.target,"[data-selectable]");E&&(e.onOptionSelect(v,E),C(v,!0))}),k(a,"click",v=>{var E=Me(v.target,"[data-ts-item]",a);if(E&&e.onItemSelect(v,E)){C(v,!0);return}o.value==""&&(e.onClick(),C(v,!0))}),k(l,"keydown",v=>e.onKeyDown(v)),k(o,"keypress",v=>e.onKeyPress(v)),k(o,"input",v=>e.onInput(v)),k(l,"blur",v=>e.onBlur(v)),k(l,"focus",v=>e.onFocus(v)),k(o,"paste",v=>e.onPaste(v));let y=v=>{let E=v.composedPath()[0];if(!i.contains(E)&&!s.contains(E)){e.isFocused&&e.blur(),e.inputState();return}E==o&&e.isOpen?v.stopPropagation():C(v,!0)},b=()=>{e.isOpen&&e.positionDropdown()};k(document,"mousedown",y),k(window,"scroll",b,d),k(window,"resize",b,d),this._destroy=()=>{document.removeEventListener("mousedown",y),window.removeEventListener("scroll",b),window.removeEventListener("resize",b),m&&m.removeEventListener("click",g)},this.revertSettings={innerHTML:c.innerHTML,tabIndex:c.tabIndex},c.tabIndex=-1,c.insertAdjacentElement("afterend",e.wrapper),e.sync(!1),n.items=[],delete n.optgroups,delete n.options,k(c,"invalid",()=>{e.isValid&&(e.isValid=!1,e.isInvalid=!0,e.refreshState())}),e.updateOriginalInput(),e.refreshItems(),e.close(!1),e.inputState(),e.isSetup=!0,c.disabled?e.disable():c.readOnly?e.setReadOnly(!0):e.enable(),e.on("change",this.onChange),D(c,"tomselected","ts-hidden-accessible"),e.trigger("initialize"),n.preload===!0&&e.preload()}setupOptions(e=[],n=[]){this.addOptions(e),O(n,o=>{this.registerOptionGroup(o)})}setupTemplates(){var e=this,n=e.settings.labelField,o=e.settings.optgroupLabelField,s={optgroup:r=>{let i=document.createElement("div");return i.className="optgroup",i.appendChild(r.options),i},optgroup_header:(r,i)=>'<div class="optgroup-header">'+i(r[o])+"</div>",option:(r,i)=>"<div>"+i(r[n])+"</div>",item:(r,i)=>"<div>"+i(r[n])+"</div>",option_create:(r,i)=>'<div class="create">Add <strong>'+i(r.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};e.settings.render=Object.assign({},s,e.settings.render)}setupCallbacks(){var e,n,o={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in o)n=this.settings[o[e]],n&&this.on(e,n)}sync(e=!0){let n=this,o=e?Oe(n.input,{delimiter:n.settings.delimiter}):n.settings;n.setupOptions(o.options,o.optgroups),n.setValue(o.items||[],!0),n.lastQuery=null}onClick(){var e=this;if(e.activeItems.length>0){e.clearActiveItems(),e.focus();return}e.isFocused&&e.isOpen?e.blur():e.focus()}onMouseDown(){}onChange(){Ce(this.input,"input"),Ce(this.input,"change")}onPaste(e){var n=this;if(n.isInputHidden||n.isLocked){C(e);return}n.settings.splitOn&&setTimeout(()=>{var o=n.inputValue();if(o.match(n.settings.splitOn)){var s=o.trim().split(n.settings.splitOn);O(s,r=>{R(r)&&(this.options[r]?n.addItem(r):n.createItem(r))})}},0)}onKeyPress(e){var n=this;if(n.isLocked){C(e);return}var o=String.fromCharCode(e.keyCode||e.which);if(n.settings.create&&n.settings.mode==="multi"&&o===n.settings.delimiter){n.createItem(),C(e);return}}onKeyDown(e){var n=this;if(n.ignoreHover=!0,n.isLocked){e.keyCode!==9&&C(e);return}switch(e.keyCode){case 65:if(V(re,e)&&n.control_input.value==""){C(e),n.selectAll();return}break;case 27:n.isOpen&&(C(e,!0),n.close()),n.clearActiveItems();return;case 40:if(!n.isOpen&&n.hasOptions)n.open();else if(n.activeOption){let o=n.getAdjacent(n.activeOption,1);o&&n.setActiveOption(o)}C(e);return;case 38:if(n.activeOption){let o=n.getAdjacent(n.activeOption,-1);o&&n.setActiveOption(o)}C(e);return;case 13:n.canSelect(n.activeOption)?(n.onOptionSelect(e,n.activeOption),C(e)):n.settings.create&&n.createItem()?C(e):document.activeElement==n.control_input&&n.isOpen&&C(e);return;case 37:n.advanceSelection(-1,e);return;case 39:n.advanceSelection(1,e);return;case 9:n.settings.selectOnTab&&(n.canSelect(n.activeOption)&&(n.onOptionSelect(e,n.activeOption),C(e)),n.settings.create&&n.createItem()&&C(e));return;case 8:case 46:n.deleteSelection(e);return}n.isInputHidden&&!V(re,e)&&C(e)}onInput(e){if(this.isLocked)return;let n=this.inputValue();if(this.lastValue!==n){if(this.lastValue=n,n==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=Bt(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){let e=this.lastValue;this.settings.shouldLoad.call(this,e)&&this.load(e),this.refreshOptions(),this.trigger("type",e)}onOptionHover(e,n){this.ignoreHover||this.setActiveOption(n,!1)}onFocus(e){var n=this,o=n.isFocused;if(n.isDisabled||n.isReadOnly){n.blur(),C(e);return}n.ignoreFocus||(n.isFocused=!0,n.settings.preload==="focus"&&n.preload(),o||n.trigger("focus"),n.activeItems.length||(n.inputState(),n.refreshOptions(!!n.settings.openOnFocus)),n.refreshState())}onBlur(e){if(document.hasFocus()!==!1){var n=this;if(n.isFocused){n.isFocused=!1,n.ignoreFocus=!1;var o=()=>{n.close(),n.setActiveItem(),n.setCaret(n.items.length),n.trigger("blur")};n.settings.create&&n.settings.createOnBlur?n.createItem(null,o):o()}}}onOptionSelect(e,n){var o,s=this;n.parentElement&&n.parentElement.matches("[data-disabled]")||(n.classList.contains("create")?s.createItem(null,()=>{s.settings.closeAfterSelect&&s.close()}):(o=n.dataset.value,typeof o<"u"&&(s.lastQuery=null,s.addItem(o),s.settings.closeAfterSelect&&s.close(),!s.settings.hideSelected&&e.type&&/click/.test(e.type)&&s.setActiveOption(n))))}canSelect(e){return!!(this.isOpen&&e&&this.dropdown_content.contains(e))}onItemSelect(e,n){var o=this;return!o.isLocked&&o.settings.mode==="multi"?(C(e),o.setActiveItem(n,e),!0):!1}canLoad(e){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(e))}load(e){let n=this;if(!n.canLoad(e))return;D(n.wrapper,n.settings.loadingClass),n.loading++;let o=n.loadCallback.bind(n);n.settings.load.call(n,e,o)}loadCallback(e,n){let o=this;o.loading=Math.max(o.loading-1,0),o.lastQuery=null,o.clearActiveOption(),o.setupOptions(e,n),o.refreshOptions(o.isFocused&&!o.isInputHidden),o.loading||H(o.wrapper,o.settings.loadingClass),o.trigger("load",e,n)}preload(){var e=this.wrapper.classList;e.contains("preloaded")||(e.add("preloaded"),this.load(""))}setTextboxValue(e=""){var n=this.control_input,o=n.value!==e;o&&(n.value=e,Ce(n,"update"),this.lastValue=e)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(e,n){var o=n?[]:["change"];ze(this,o,()=>{this.clear(n),this.addItems(e,n)})}setMaxItems(e){e===0&&(e=null),this.settings.maxItems=e,this.refreshState()}setActiveItem(e,n){var o=this,s,r,i,a,c,l;if(o.settings.mode!=="single"){if(!e){o.clearActiveItems(),o.isFocused&&o.inputState();return}if(s=n&&n.type.toLowerCase(),s==="click"&&V("shiftKey",n)&&o.activeItems.length){for(l=o.getLastActive(),i=Array.prototype.indexOf.call(o.control.children,l),a=Array.prototype.indexOf.call(o.control.children,e),i>a&&(c=i,i=a,a=c),r=i;r<=a;r++)e=o.control.children[r],o.activeItems.indexOf(e)===-1&&o.setActiveItemClass(e);C(n)}else s==="click"&&V(re,n)||s==="keydown"&&V("shiftKey",n)?e.classList.contains("active")?o.removeActiveItem(e):o.setActiveItemClass(e):(o.clearActiveItems(),o.setActiveItemClass(e));o.inputState(),o.isFocused||o.focus()}}setActiveItemClass(e){let n=this,o=n.control.querySelector(".last-active");o&&H(o,"last-active"),D(e,"active last-active"),n.trigger("item_select",e),n.activeItems.indexOf(e)==-1&&n.activeItems.push(e)}removeActiveItem(e){var n=this.activeItems.indexOf(e);this.activeItems.splice(n,1),H(e,"active")}clearActiveItems(){H(this.activeItems,"active"),this.activeItems=[]}setActiveOption(e,n=!0){e!==this.activeOption&&(this.clearActiveOption(),e&&(this.activeOption=e,_(this.focus_node,{"aria-activedescendant":e.getAttribute("id")}),_(e,{"aria-selected":"true"}),D(e,"active"),n&&this.scrollToOption(e)))}scrollToOption(e,n){if(!e)return;let o=this.dropdown_content,s=o.clientHeight,r=o.scrollTop||0,i=e.offsetHeight,a=e.getBoundingClientRect().top-o.getBoundingClientRect().top+r;a+i>s+r?this.scroll(a-s+i,n):a<r&&this.scroll(a,n)}scroll(e,n){let o=this.dropdown_content;n&&(o.style.scrollBehavior=n),o.scrollTop=e,o.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(H(this.activeOption,"active"),_(this.activeOption,{"aria-selected":null})),this.activeOption=null,_(this.focus_node,{"aria-activedescendant":null})}selectAll(){let e=this;if(e.settings.mode==="single")return;let n=e.controlChildren();n.length&&(e.inputState(),e.close(),e.activeItems=n,O(n,o=>{e.setActiveItemClass(o)}))}inputState(){var e=this;e.control.contains(e.control_input)&&(_(e.control_input,{placeholder:e.settings.placeholder}),e.activeItems.length>0||!e.isFocused&&e.settings.hidePlaceholder&&e.items.length>0?(e.setTextboxValue(),e.isInputHidden=!0):(e.settings.hidePlaceholder&&e.items.length>0&&_(e.control_input,{placeholder:""}),e.isInputHidden=!1),e.wrapper.classList.toggle("input-hidden",e.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var e=this;e.isDisabled||e.isReadOnly||(e.ignoreFocus=!0,e.control_input.offsetWidth?e.control_input.focus():e.focus_node.focus(),setTimeout(()=>{e.ignoreFocus=!1,e.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())}getSearchOptions(){var e=this.settings,n=e.sortField;return typeof e.sortField=="string"&&(n=[{field:e.sortField}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:n,nesting:e.nesting}}search(e){var n,o,s=this,r=this.getSearchOptions();if(s.settings.score&&(o=s.settings.score.call(s,e),typeof o!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return e!==s.lastQuery?(s.lastQuery=e,n=s.sifter.search(e,Object.assign(r,{score:o})),s.currentResults=n):n=Object.assign({},s.currentResults),s.settings.hideSelected&&(n.items=n.items.filter(i=>{let a=R(i.id);return!(a&&s.items.indexOf(a)!==-1)})),n}refreshOptions(e=!0){var n,o,s,r,i,a,c,l,d,u;let p={},h=[];var m=this,g=m.inputValue();let y=g===m.lastQuery||g==""&&m.lastQuery==null;var b=m.search(g),v=null,E=m.settings.shouldOpen||!1,L=m.dropdown_content;y&&(v=m.activeOption,v&&(d=v.closest("[data-group]"))),r=b.items.length,typeof m.settings.maxOptions=="number"&&(r=Math.min(r,m.settings.maxOptions)),r>0&&(E=!0);let M=(w,x)=>{let A=p[w];if(A!==void 0){let S=h[A];if(S!==void 0)return[A,S.fragment]}let $=document.createDocumentFragment();return A=h.length,h.push({fragment:$,order:x,optgroup:w}),[A,$]};for(n=0;n<r;n++){let w=b.items[n];if(!w)continue;let x=w.id,A=m.options[x];if(A===void 0)continue;let $=ne(x),S=m.getOption($,!0);for(m.settings.hideSelected||S.classList.toggle("selected",m.items.includes($)),i=A[m.settings.optgroupField]||"",a=Array.isArray(i)?i:[i],o=0,s=a&&a.length;o<s;o++){i=a[o];let Y=A.$order,N=m.optgroups[i];N===void 0?i="":Y=N.$order;let[ae,le]=M(i,Y);o>0&&(S=S.cloneNode(!0),_(S,{id:A.$id+"-clone-"+o,"aria-selected":null}),S.classList.add("ts-cloned"),H(S,"active"),m.activeOption&&m.activeOption.dataset.value==x&&d&&d.dataset.group===i.toString()&&(v=S)),le.appendChild(S),i!=""&&(p[i]=ae)}}m.settings.lockOptgroupOrder&&h.sort((w,x)=>w.order-x.order),c=document.createDocumentFragment(),O(h,w=>{let x=w.fragment,A=w.optgroup;if(!x||!x.children.length)return;let $=m.optgroups[A];if($!==void 0){let S=document.createDocumentFragment(),Y=m.render("optgroup_header",$);B(S,Y),B(S,x);let N=m.render("optgroup",{group:$,options:S});B(c,N)}else B(c,x)}),L.innerHTML="",B(L,c),m.settings.highlight&&(Zt(L),b.query.length&&b.tokens.length&&O(b.tokens,w=>{Wt(L,w.regex)}));var T=w=>{let x=m.render(w,{input:g});return x&&(E=!0,L.insertBefore(x,L.firstChild)),x};if(m.loading?T("loading"):m.settings.shouldLoad.call(m,g)?b.items.length===0&&T("no_results"):T("not_loading"),l=m.canCreate(g),l&&(u=T("option_create")),m.hasOptions=b.items.length>0||l,E){if(b.items.length>0){if(!v&&m.settings.mode==="single"&&m.items[0]!=null&&(v=m.getOption(m.items[0])),!L.contains(v)){let w=0;u&&!m.settings.addPrecedence&&(w=1),v=m.selectable()[w]}}else u&&(v=u);e&&!m.isOpen&&(m.open(),m.scrollToOption(v,"auto")),m.setActiveOption(v)}else m.clearActiveOption(),e&&m.isOpen&&m.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(e,n=!1){let o=this;if(Array.isArray(e))return o.addOptions(e,n),!1;let s=R(e[o.settings.valueField]);return s===null||o.options.hasOwnProperty(s)?!1:(e.$order=e.$order||++o.order,e.$id=o.inputId+"-opt-"+e.$order,o.options[s]=e,o.lastQuery=null,n&&(o.userOptions[s]=n,o.trigger("option_add",s,e)),s)}addOptions(e,n=!1){O(e,o=>{this.addOption(o,n)})}registerOption(e){return this.addOption(e)}registerOptionGroup(e){var n=R(e[this.settings.optgroupValueField]);return n===null?!1:(e.$order=e.$order||++this.order,this.optgroups[n]=e,n)}addOptionGroup(e,n){var o;n[this.settings.optgroupValueField]=e,(o=this.registerOptionGroup(n))&&this.trigger("optgroup_add",o,n)}removeOptionGroup(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.clearCache(),this.trigger("optgroup_remove",e))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(e,n){let o=this;var s,r;let i=R(e),a=R(n[o.settings.valueField]);if(i===null)return;let c=o.options[i];if(c==null)return;if(typeof a!="string")throw new Error("Value must be set in option data");let l=o.getOption(i),d=o.getItem(i);if(n.$order=n.$order||c.$order,delete o.options[i],o.uncacheValue(a),o.options[a]=n,l){if(o.dropdown_content.contains(l)){let u=o._render("option",n);se(l,u),o.activeOption===l&&o.setActiveOption(u)}l.remove()}d&&(r=o.items.indexOf(i),r!==-1&&o.items.splice(r,1,a),s=o._render("item",n),d.classList.contains("active")&&D(s,"active"),se(d,s)),o.lastQuery=null}removeOption(e,n){let o=this;e=ne(e),o.uncacheValue(e),delete o.userOptions[e],delete o.options[e],o.lastQuery=null,o.trigger("option_remove",e),o.removeItem(e,n)}clearOptions(e){let n=(e||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();let o={};O(this.options,(s,r)=>{n(s,r)&&(o[r]=s)}),this.options=this.sifter.items=o,this.lastQuery=null,this.trigger("option_clear")}clearFilter(e,n){return this.items.indexOf(n)>=0}getOption(e,n=!1){let o=R(e);if(o===null)return null;let s=this.options[o];if(s!=null){if(s.$div)return s.$div;if(n)return this._render("option",s)}return null}getAdjacent(e,n,o="option"){var s=this,r;if(!e)return null;o=="item"?r=s.controlChildren():r=s.dropdown_content.querySelectorAll("[data-selectable]");for(let i=0;i<r.length;i++)if(r[i]==e)return n>0?r[i+1]:r[i-1];return null}getItem(e){if(typeof e=="object")return e;var n=R(e);return n!==null?this.control.querySelector(`[data-value="${We(n)}"]`):null}addItems(e,n){var o=this,s=Array.isArray(e)?e:[e];s=s.filter(i=>o.items.indexOf(i)===-1);let r=s[s.length-1];s.forEach(i=>{o.isPending=i!==r,o.addItem(i,n)})}addItem(e,n){var o=n?[]:["change","dropdown_close"];ze(this,o,()=>{var s,r;let i=this,a=i.settings.mode,c=R(e);if(!(c&&i.items.indexOf(c)!==-1&&(a==="single"&&i.close(),a==="single"||!i.settings.duplicates))&&!(c===null||!i.options.hasOwnProperty(c))&&(a==="single"&&i.clear(n),!(a==="multi"&&i.isFull()))){if(s=i._render("item",i.options[c]),i.control.contains(s)&&(s=s.cloneNode(!0)),r=i.isFull(),i.items.splice(i.caretPos,0,c),i.insertAtCaret(s),i.isSetup){if(!i.isPending&&i.settings.hideSelected){let l=i.getOption(c),d=i.getAdjacent(l,1);d&&i.setActiveOption(d)}!i.isPending&&!i.settings.closeAfterSelect&&i.refreshOptions(i.isFocused&&a!=="single"),i.settings.closeAfterSelect!=!1&&i.isFull()?i.close():i.isPending||i.positionDropdown(),i.trigger("item_add",c,s),i.isPending||i.updateOriginalInput({silent:n})}(!i.isPending||!r&&i.isFull())&&(i.inputState(),i.refreshState())}})}removeItem(e=null,n){let o=this;if(e=o.getItem(e),!e)return;var s,r;let i=e.dataset.value;s=Qe(e),e.remove(),e.classList.contains("active")&&(r=o.activeItems.indexOf(e),o.activeItems.splice(r,1),H(e,"active")),o.items.splice(s,1),o.lastQuery=null,!o.settings.persist&&o.userOptions.hasOwnProperty(i)&&o.removeOption(i,n),s<o.caretPos&&o.setCaret(o.caretPos-1),o.updateOriginalInput({silent:n}),o.refreshState(),o.positionDropdown(),o.trigger("item_remove",i,e)}createItem(e=null,n=()=>{}){arguments.length===3&&(n=arguments[2]),typeof n!="function"&&(n=()=>{});var o=this,s=o.caretPos,r;if(e=e||o.inputValue(),!o.canCreate(e))return n(),!1;o.lock();var i=!1,a=c=>{if(o.unlock(),!c||typeof c!="object")return n();var l=R(c[o.settings.valueField]);if(typeof l!="string")return n();o.setTextboxValue(),o.addOption(c,!0),o.setCaret(s),o.addItem(l),n(c),i=!0};return typeof o.settings.create=="function"?r=o.settings.create.call(this,e,a):r={[o.settings.labelField]:e,[o.settings.valueField]:e},i||a(r),!0}refreshItems(){var e=this;e.lastQuery=null,e.isSetup&&e.addItems(e.items),e.updateOriginalInput(),e.refreshState()}refreshState(){let e=this;e.refreshValidityState();let n=e.isFull(),o=e.isLocked;e.wrapper.classList.toggle("rtl",e.rtl);let s=e.wrapper.classList;s.toggle("focus",e.isFocused),s.toggle("disabled",e.isDisabled),s.toggle("readonly",e.isReadOnly),s.toggle("required",e.isRequired),s.toggle("invalid",!e.isValid),s.toggle("locked",o),s.toggle("full",n),s.toggle("input-active",e.isFocused&&!e.isInputHidden),s.toggle("dropdown-active",e.isOpen),s.toggle("has-options",zt(e.options)),s.toggle("has-items",e.items.length>0)}refreshValidityState(){var e=this;e.input.validity&&(e.isValid=e.input.validity.valid,e.isInvalid=!e.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(e={}){let n=this;var o,s;let r=n.input.querySelector('option[value=""]');if(n.is_select_tag){let c=function(l,d,u){return l||(l=P('<option value="'+_e(d)+'">'+_e(u)+"</option>")),l!=r&&n.input.append(l),i.push(l),(l!=r||a>0)&&(l.selected=!0),l},i=[],a=n.input.querySelectorAll("option:checked").length;n.input.querySelectorAll("option:checked").forEach(l=>{l.selected=!1}),n.items.length==0&&n.settings.mode=="single"?c(r,"",""):n.items.forEach(l=>{if(o=n.options[l],s=o[n.settings.labelField]||"",i.includes(o.$option)){let d=n.input.querySelector(`option[value="${We(l)}"]:not(:checked)`);c(d,l,s)}else o.$option=c(o.$option,l,s)})}else n.input.value=n.getValue();n.isSetup&&(e.silent||n.trigger("change",n.getValue()))}open(){var e=this;e.isLocked||e.isOpen||e.settings.mode==="multi"&&e.isFull()||(e.isOpen=!0,_(e.focus_node,{"aria-expanded":"true"}),e.refreshState(),oe(e.dropdown,{visibility:"hidden",display:"block"}),e.positionDropdown(),oe(e.dropdown,{visibility:"visible",display:"block"}),e.focus(),e.trigger("dropdown_open",e.dropdown))}close(e=!0){var n=this,o=n.isOpen;e&&(n.setTextboxValue(),n.settings.mode==="single"&&n.items.length&&n.inputState()),n.isOpen=!1,_(n.focus_node,{"aria-expanded":"false"}),oe(n.dropdown,{display:"none"}),n.settings.hideSelected&&n.clearActiveOption(),n.refreshState(),o&&n.trigger("dropdown_close",n.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var e=this.control,n=e.getBoundingClientRect(),o=e.offsetHeight+n.top+window.scrollY,s=n.left+window.scrollX;oe(this.dropdown,{width:n.width+"px",top:o+"px",left:s+"px"})}}clear(e){var n=this;if(n.items.length){var o=n.controlChildren();O(o,s=>{n.removeItem(s,!0)}),n.inputState(),e||n.updateOriginalInput(),n.trigger("clear")}}insertAtCaret(e){let n=this,o=n.caretPos,s=n.control;s.insertBefore(e,s.children[o]||null),n.setCaret(o+1)}deleteSelection(e){var n,o,s,r,i=this;n=e&&e.keyCode===8?-1:1,o=Gt(i.control_input);let a=[];if(i.activeItems.length)r=Je(i.activeItems,n),s=Qe(r),n>0&&s++,O(i.activeItems,c=>a.push(c));else if((i.isFocused||i.settings.mode==="single")&&i.items.length){let c=i.controlChildren(),l;n<0&&o.start===0&&o.length===0?l=c[i.caretPos-1]:n>0&&o.start===i.inputValue().length&&(l=c[i.caretPos]),l!==void 0&&a.push(l)}if(!i.shouldDelete(a,e))return!1;for(C(e,!0),typeof s<"u"&&i.setCaret(s);a.length;)i.removeItem(a.pop());return i.inputState(),i.positionDropdown(),i.refreshOptions(!1),!0}shouldDelete(e,n){let o=e.map(s=>s.dataset.value);return!(!o.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(o,n)===!1)}advanceSelection(e,n){var o,s,r=this;r.rtl&&(e*=-1),!r.inputValue().length&&(V(re,n)||V("shiftKey",n)?(o=r.getLastActive(e),o?o.classList.contains("active")?s=r.getAdjacent(o,e,"item"):s=o:e>0?s=r.control_input.nextElementSibling:s=r.control_input.previousElementSibling,s&&(s.classList.contains("active")&&r.removeActiveItem(o),r.setActiveItemClass(s))):r.moveCaret(e))}moveCaret(e){}getLastActive(e){let n=this.control.querySelector(".last-active");if(n)return n;var o=this.control.querySelectorAll(".active");if(o)return Je(o,e)}setCaret(e){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(e=this.isReadOnly||this.isDisabled){this.isLocked=e,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(e){this.focus_node.tabIndex=e?-1:this.tabIndex,this.isDisabled=e,this.input.disabled=e,this.control_input.disabled=e,this.setLocked()}setReadOnly(e){this.isReadOnly=e,this.input.readOnly=e,this.control_input.readOnly=e,this.setLocked()}destroy(){var e=this,n=e.revertSettings;e.trigger("destroy"),e.off(),e.wrapper.remove(),e.dropdown.remove(),e.input.innerHTML=n.innerHTML,e.input.tabIndex=n.tabIndex,H(e.input,"tomselected","ts-hidden-accessible"),e._destroy(),delete e.input.tomselect}render(e,n){var o,s;let r=this;if(typeof this.settings.render[e]!="function"||(s=r.settings.render[e].call(this,n,_e),!s))return null;if(s=P(s),e==="option"||e==="option_create"?n[r.settings.disabledField]?_(s,{"aria-disabled":"true"}):_(s,{"data-selectable":""}):e==="optgroup"&&(o=n.group[r.settings.optgroupValueField],_(s,{"data-group":o}),n.group[r.settings.disabledField]&&_(s,{"data-disabled":""})),e==="option"||e==="item"){let i=ne(n[r.settings.valueField]);_(s,{"data-value":i}),e==="item"?(D(s,r.settings.itemClass),_(s,{"data-ts-item":""})):(D(s,r.settings.optionClass),_(s,{role:"option",id:n.$id}),n.$div=s,r.options[i]=n)}return s}_render(e,n){let o=this.render(e,n);if(o==null)throw"HTMLElement expected";return o}clearCache(){O(this.options,e=>{e.$div&&(e.$div.remove(),delete e.$div)})}uncacheValue(e){let n=this.getOption(e);n&&n.remove()}canCreate(e){return this.settings.create&&e.length>0&&this.settings.createFilter.call(this,e)}hook(e,n,o){var s=this,r=s[n];s[n]=function(){var i,a;return e==="after"&&(i=r.apply(s,arguments)),a=o.apply(s,arguments),e==="instead"?a:(e==="before"&&(i=r.apply(s,arguments)),i)}}};var rs=(t,e,n,o)=>{t.addEventListener(e,n,o)};function en(){rs(this.input,"change",()=>{this.sync()})}var is=t=>typeof t>"u"||t===null?null:as(t),as=t=>typeof t=="boolean"?t?"1":"0":t+"",tn=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},ls=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(cs(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},cs=t=>typeof t=="string"&&t.indexOf("<")>-1;function nn(t){var e=this,n=e.onOptionSelect;e.settings.hideSelected=!1;let o=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},t);var s=function(a,c){c?(a.checked=!0,o.uncheckedClassNames&&a.classList.remove(...o.uncheckedClassNames),o.checkedClassNames&&a.classList.add(...o.checkedClassNames)):(a.checked=!1,o.checkedClassNames&&a.classList.remove(...o.checkedClassNames),o.uncheckedClassNames&&a.classList.add(...o.uncheckedClassNames))},r=function(a){setTimeout(()=>{var c=a.querySelector("input."+o.className);c instanceof HTMLInputElement&&s(c,a.classList.contains("selected"))},1)};e.hook("after","setupTemplates",()=>{var i=e.settings.render.option;e.settings.render.option=(a,c)=>{var l=ls(i.call(e,a,c)),d=document.createElement("input");o.className&&d.classList.add(o.className),d.addEventListener("click",function(p){tn(p)}),d.type="checkbox";let u=is(a[e.settings.valueField]);return s(d,!!(u&&e.items.indexOf(u)>-1)),l.prepend(d),l}}),e.on("item_remove",i=>{var a=e.getOption(i);a&&(a.classList.remove("selected"),r(a))}),e.on("item_add",i=>{var a=e.getOption(i);a&&r(a)}),e.hook("instead","onOptionSelect",(i,a)=>{if(a.classList.contains("selected")){a.classList.remove("selected"),e.removeItem(a.dataset.value),e.refreshOptions(),tn(i,!0);return}n.call(e,i,a),r(a)})}var ds=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(us(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},us=t=>typeof t=="string"&&t.indexOf("<")>-1;function on(t){let e=this,n=Object.assign({className:"clear-button",title:"Clear All",html:o=>`<div class="${o.className}" title="${o.title}">&#10799;</div>`},t);e.on("initialize",()=>{var o=ds(n.html(n));o.addEventListener("click",s=>{e.isLocked||(e.clear(),e.settings.mode==="single"&&e.settings.allowEmptyOption&&e.addItem(""),s.preventDefault(),s.stopPropagation())}),e.control.appendChild(o)})}var ps=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},j=(t,e,n,o)=>{t.addEventListener(e,n,o)},fs=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},ms=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(gs(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},gs=t=>typeof t=="string"&&t.indexOf("<")>-1,hs=(t,e)=>{fs(e,(n,o)=>{n==null?t.removeAttribute(o):t.setAttribute(o,""+n)})},vs=(t,e)=>{var n;(n=t.parentNode)==null||n.insertBefore(e,t.nextSibling)},ys=(t,e)=>{var n;(n=t.parentNode)==null||n.insertBefore(e,t)},bs=(t,e)=>{do{var n;if(e=(n=e)==null?void 0:n.previousElementSibling,t==e)return!0}while(e&&e.previousElementSibling);return!1};function sn(){var t=this;if(t.settings.mode!=="multi")return;var e=t.lock,n=t.unlock;let o=!0,s;t.hook("after","setupTemplates",()=>{var r=t.settings.render.item;t.settings.render.item=(i,a)=>{let c=ms(r.call(t,i,a));hs(c,{draggable:"true"});let l=g=>{o||ps(g),g.stopPropagation()},d=g=>{s=c,setTimeout(()=>{c.classList.add("ts-dragging")},0)},u=g=>{g.preventDefault(),c.classList.add("ts-drag-over"),h(c,s)},p=()=>{c.classList.remove("ts-drag-over")},h=(g,y)=>{y!==void 0&&(bs(y,c)?vs(g,y):ys(g,y))},m=()=>{var g;document.querySelectorAll(".ts-drag-over").forEach(b=>b.classList.remove("ts-drag-over")),(g=s)==null||g.classList.remove("ts-dragging"),s=void 0;var y=[];t.control.querySelectorAll("[data-value]").forEach(b=>{if(b.dataset.value){let v=b.dataset.value;v&&y.push(v)}}),t.setValue(y)};return j(c,"mousedown",l),j(c,"dragstart",d),j(c,"dragenter",u),j(c,"dragover",u),j(c,"dragleave",p),j(c,"dragend",m),c}}),t.hook("instead","lock",()=>(o=!1,e.call(t))),t.hook("instead","unlock",()=>(o=!0,n.call(t)))}var Es=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},ws=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(As(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},As=t=>typeof t=="string"&&t.indexOf("<")>-1;function rn(t){let e=this,n=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:o=>'<div class="'+o.headerClass+'"><div class="'+o.titleRowClass+'"><span class="'+o.labelClass+'">'+o.title+'</span><a class="'+o.closeClass+'">&times;</a></div></div>'},t);e.on("initialize",()=>{var o=ws(n.html(n)),s=o.querySelector("."+n.closeClass);s&&s.addEventListener("click",r=>{Es(r,!0),e.close()}),e.dropdown.insertBefore(o,e.dropdown.firstChild)})}var Ss=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},xs=(t,...e)=>{var n=Ls(e);t=_s(t),t.map(o=>{n.map(s=>{o.classList.remove(s)})})},Ls=t=>{var e=[];return Ss(t,n=>{typeof n=="string"&&(n=n.trim().split(/[\t\n\f\r\s]/)),Array.isArray(n)&&(e=e.concat(n))}),e.filter(Boolean)},_s=t=>(Array.isArray(t)||(t=[t]),t),Ts=(t,e)=>{if(!t)return-1;e=e||t.nodeName;for(var n=0;t=t.previousElementSibling;)t.matches(e)&&n++;return n};function an(){var t=this;t.hook("instead","setCaret",e=>{t.settings.mode==="single"||!t.control.contains(t.control_input)?e=t.items.length:(e=Math.max(0,Math.min(t.items.length,e)),e!=t.caretPos&&!t.isPending&&t.controlChildren().forEach((n,o)=>{o<e?t.control_input.insertAdjacentElement("beforebegin",n):t.control.appendChild(n)})),t.caretPos=e}),t.hook("instead","moveCaret",e=>{if(!t.isFocused)return;let n=t.getLastActive(e);if(n){let o=Ts(n);t.setCaret(e>0?o+1:o),t.setActiveItem(),xs(n,"last-active")}else t.setCaret(t.caretPos+e)})}var Cs=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},Ms=(t,e,n,o)=>{t.addEventListener(e,n,o)},Os=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},ln=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(Is(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},Is=t=>typeof t=="string"&&t.indexOf("<")>-1,$s=(t,...e)=>{var n=ks(e);t=Ds(t),t.map(o=>{n.map(s=>{o.classList.add(s)})})},ks=t=>{var e=[];return Os(t,n=>{typeof n=="string"&&(n=n.trim().split(/[\t\n\f\r\s]/)),Array.isArray(n)&&(e=e.concat(n))}),e.filter(Boolean)},Ds=t=>(Array.isArray(t)||(t=[t]),t);function cn(){let t=this;t.settings.shouldOpen=!0,t.hook("before","setup",()=>{t.focus_node=t.control,$s(t.control_input,"dropdown-input");let e=ln('<div class="dropdown-input-wrap">');e.append(t.control_input),t.dropdown.insertBefore(e,t.dropdown.firstChild);let n=ln('<input class="items-placeholder" tabindex="-1" />');n.placeholder=t.settings.placeholder||"",t.control.append(n)}),t.on("initialize",()=>{t.control_input.addEventListener("keydown",n=>{switch(n.keyCode){case 27:t.isOpen&&(Cs(n,!0),t.close()),t.clearActiveItems();return;case 9:t.focus_node.tabIndex=-1;break}return t.onKeyDown.call(t,n)}),t.on("blur",()=>{t.focus_node.tabIndex=t.isDisabled?-1:t.tabIndex}),t.on("dropdown_open",()=>{t.control_input.focus()});let e=t.onBlur;t.hook("instead","onBlur",n=>{if(!(n&&n.relatedTarget==t.control_input))return e.call(t)}),Ms(t.control_input,"blur",()=>t.onBlur()),t.hook("before","close",()=>{t.isOpen&&t.focus_node.focus({preventScroll:!0})})})}var Ie=(t,e,n,o)=>{t.addEventListener(e,n,o)};function dn(){var t=this;t.on("initialize",()=>{var e=document.createElement("span"),n=t.control_input;e.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",t.wrapper.appendChild(e);var o=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(let r of o)e.style[r]=n.style[r];var s=()=>{e.textContent=n.value,n.style.width=e.clientWidth+"px"};s(),t.on("update item_add item_remove",s),Ie(n,"input",s),Ie(n,"keyup",s),Ie(n,"blur",s),Ie(n,"update",s)})}function un(){var t=this,e=t.deleteSelection;this.hook("instead","deleteSelection",n=>t.activeItems.length?e.call(t,n):!1)}function pn(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}var Rs=(t,e,n)=>{for(;t&&t.matches;){if(t.matches(e))return t;t=t.parentNode}},Fs=(t,e)=>{if(!t)return-1;e=e||t.nodeName;for(var n=0;t=t.previousElementSibling;)t.matches(e)&&n++;return n};function fn(){var t=this,e=t.onKeyDown;t.hook("instead","onKeyDown",n=>{var o,s,r,i;if(!t.isOpen||!(n.keyCode===37||n.keyCode===39))return e.call(t,n);t.ignoreHover=!0,i=Rs(t.activeOption,"[data-group]"),o=Fs(t.activeOption,"[data-selectable]"),i&&(n.keyCode===37?i=i.previousSibling:i=i.nextSibling,i&&(r=i.querySelectorAll("[data-selectable]"),s=r[Math.min(r.length-1,o)],s&&t.setActiveOption(s)))})}var Ps=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),mn=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},gn=(t,e,n,o)=>{t.addEventListener(e,n,o)},hn=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(Ns(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},Ns=t=>typeof t=="string"&&t.indexOf("<")>-1;function vn(t){let e=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},t);var n=this;if(e.append){var o='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+Ps(e.title)+'">'+e.label+"</a>";n.hook("after","setupTemplates",()=>{var s=n.settings.render.item;n.settings.render.item=(r,i)=>{var a=hn(s.call(n,r,i)),c=hn(o);return a.appendChild(c),gn(c,"mousedown",l=>{mn(l,!0)}),gn(c,"click",l=>{n.isLocked||(mn(l,!0),!n.isLocked&&n.shouldDelete([a],l)&&(n.removeItem(a),n.refreshOptions(!1),n.inputState()))}),a}})}}function yn(t){let e=this,n=Object.assign({text:o=>o[e.settings.labelField]},t);e.on("item_remove",function(o){if(e.isFocused&&e.control_input.value.trim()===""){var s=e.options[o];s&&e.setTextboxValue(n.text.call(e,s))}})}var Hs=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},Us=(t,...e)=>{var n=Vs(e);t=Bs(t),t.map(o=>{n.map(s=>{o.classList.add(s)})})},Vs=t=>{var e=[];return Hs(t,n=>{typeof n=="string"&&(n=n.trim().split(/[\t\n\f\r\s]/)),Array.isArray(n)&&(e=e.concat(n))}),e.filter(Boolean)},Bs=t=>(Array.isArray(t)||(t=[t]),t);function bn(){let t=this,e=t.canLoad,n=t.clearActiveOption,o=t.loadCallback;var s={},r,i=!1,a,c=[];if(t.settings.shouldLoadMore||(t.settings.shouldLoadMore=()=>{if(r.clientHeight/(r.scrollHeight-r.scrollTop)>.9)return!0;if(t.activeOption){var p=t.selectable(),h=Array.from(p).indexOf(t.activeOption);if(h>=p.length-2)return!0}return!1}),!t.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";t.settings.sortField=[{field:"$order"},{field:"$score"}];let l=u=>typeof t.settings.maxOptions=="number"&&r.children.length>=t.settings.maxOptions?!1:!!(u in s&&s[u]),d=(u,p)=>t.items.indexOf(p)>=0||c.indexOf(p)>=0;t.setNextUrl=(u,p)=>{s[u]=p},t.getUrl=u=>{if(u in s){let p=s[u];return s[u]=!1,p}return t.clearPagination(),t.settings.firstUrl.call(t,u)},t.clearPagination=()=>{s={}},t.hook("instead","clearActiveOption",()=>{if(!i)return n.call(t)}),t.hook("instead","canLoad",u=>u in s?l(u):e.call(t,u)),t.hook("instead","loadCallback",(u,p)=>{if(!i)t.clearOptions(d);else if(a){let h=u[0];h!==void 0&&(a.dataset.value=h[t.settings.valueField])}o.call(t,u,p),i=!1}),t.hook("after","refreshOptions",()=>{let u=t.lastValue;var p;l(u)?(p=t.render("loading_more",{query:u}),p&&(p.setAttribute("data-selectable",""),a=p)):u in s&&!r.querySelector(".no-results")&&(p=t.render("no_more_results",{query:u})),p&&(Us(p,t.settings.optionClass),r.append(p))}),t.on("initialize",()=>{c=Object.keys(t.options),r=t.dropdown_content,t.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},t.settings.render),r.addEventListener("scroll",()=>{t.settings.shouldLoadMore.call(t)&&l(t.lastValue)&&(i||(i=!0,t.load.call(t,t.lastValue)))})})}I.define("change_listener",en);I.define("checkbox_options",nn);I.define("clear_button",on);I.define("drag_drop",sn);I.define("dropdown_header",rn);I.define("caret_position",an);I.define("dropdown_input",cn);I.define("input_autogrow",dn);I.define("no_backspace_delete",un);I.define("no_active_items",pn);I.define("optgroup_columns",fn);I.define("remove_button",vn);I.define("restore_on_backspace",yn);I.define("virtual_scroll",bn);var En=I;var Ys="0.1.119",st=(()=>{let t=new URLSearchParams(window.location.search);if(t.has("cd-debug"))return t.get("cd-debug")==="true";try{return localStorage.getItem("cd-debug")==="true"}catch{return!1}})(),f=(...t)=>st&&console.log(...t),rt=(...t)=>st&&console.warn(...t),ie=(...t)=>console.log(...t),Gs=(...t)=>console.error(...t),wn=[{code:"+93",iso:"AF",name:"Afghanistan",flag:"\u{1F1E6}\u{1F1EB}"},{code:"+358",iso:"AX",name:"\xC5land Islands",flag:"\u{1F1E6}\u{1F1FD}"},{code:"+355",iso:"AL",name:"Albania",flag:"\u{1F1E6}\u{1F1F1}"},{code:"+213",iso:"DZ",name:"Algeria",flag:"\u{1F1E9}\u{1F1FF}"},{code:"+1684",iso:"AS",name:"American Samoa",flag:"\u{1F1E6}\u{1F1F8}"},{code:"+376",iso:"AD",name:"Andorra",flag:"\u{1F1E6}\u{1F1E9}"},{code:"+244",iso:"AO",name:"Angola",flag:"\u{1F1E6}\u{1F1F4}"},{code:"+1264",iso:"AI",name:"Anguilla",flag:"\u{1F1E6}\u{1F1EE}"},{code:"+672",iso:"AQ",name:"Antarctica",flag:"\u{1F1E6}\u{1F1F6}"},{code:"+1268",iso:"AG",name:"Antigua and Barbuda",flag:"\u{1F1E6}\u{1F1EC}"},{code:"+54",iso:"AR",name:"Argentina",flag:"\u{1F1E6}\u{1F1F7}"},{code:"+374",iso:"AM",name:"Armenia",flag:"\u{1F1E6}\u{1F1F2}"},{code:"+297",iso:"AW",name:"Aruba",flag:"\u{1F1E6}\u{1F1FC}"},{code:"+61",iso:"AU",name:"Australia",flag:"\u{1F1E6}\u{1F1FA}"},{code:"+43",iso:"AT",name:"Austria",flag:"\u{1F1E6}\u{1F1F9}"},{code:"+994",iso:"AZ",name:"Azerbaijan",flag:"\u{1F1E6}\u{1F1FF}"},{code:"+1242",iso:"BS",name:"Bahamas",flag:"\u{1F1E7}\u{1F1F8}"},{code:"+973",iso:"BH",name:"Bahrain",flag:"\u{1F1E7}\u{1F1ED}"},{code:"+880",iso:"BD",name:"Bangladesh",flag:"\u{1F1E7}\u{1F1E9}"},{code:"+1246",iso:"BB",name:"Barbados",flag:"\u{1F1E7}\u{1F1E7}"},{code:"+375",iso:"BY",name:"Belarus",flag:"\u{1F1E7}\u{1F1FE}"},{code:"+32",iso:"BE",name:"Belgium",flag:"\u{1F1E7}\u{1F1EA}"},{code:"+501",iso:"BZ",name:"Belize",flag:"\u{1F1E7}\u{1F1FF}"},{code:"+229",iso:"BJ",name:"Benin",flag:"\u{1F1E7}\u{1F1EF}"},{code:"+1441",iso:"BM",name:"Bermuda",flag:"\u{1F1E7}\u{1F1F2}"},{code:"+975",iso:"BT",name:"Bhutan",flag:"\u{1F1E7}\u{1F1F9}"},{code:"+591",iso:"BO",name:"Bolivia",flag:"\u{1F1E7}\u{1F1F4}"},{code:"+387",iso:"BA",name:"Bosnia and Herzegovina",flag:"\u{1F1E7}\u{1F1E6}"},{code:"+267",iso:"BW",name:"Botswana",flag:"\u{1F1E7}\u{1F1FC}"},{code:"+55",iso:"BR",name:"Brazil",flag:"\u{1F1E7}\u{1F1F7}"},{code:"+246",iso:"IO",name:"British Indian Ocean Territory",flag:"\u{1F1EE}\u{1F1F4}"},{code:"+673",iso:"BN",name:"Brunei",flag:"\u{1F1E7}\u{1F1F3}"},{code:"+359",iso:"BG",name:"Bulgaria",flag:"\u{1F1E7}\u{1F1EC}"},{code:"+226",iso:"BF",name:"Burkina Faso",flag:"\u{1F1E7}\u{1F1EB}"},{code:"+257",iso:"BI",name:"Burundi",flag:"\u{1F1E7}\u{1F1EE}"},{code:"+855",iso:"KH",name:"Cambodia",flag:"\u{1F1F0}\u{1F1ED}"},{code:"+237",iso:"CM",name:"Cameroon",flag:"\u{1F1E8}\u{1F1F2}"},{code:"+1",iso:"CA",name:"Canada",flag:"\u{1F1E8}\u{1F1E6}"},{code:"+238",iso:"CV",name:"Cape Verde",flag:"\u{1F1E8}\u{1F1FB}"},{code:"+1345",iso:"KY",name:"Cayman Islands",flag:"\u{1F1F0}\u{1F1FE}"},{code:"+236",iso:"CF",name:"Central African Republic",flag:"\u{1F1E8}\u{1F1EB}"},{code:"+235",iso:"TD",name:"Chad",flag:"\u{1F1F9}\u{1F1E9}"},{code:"+56",iso:"CL",name:"Chile",flag:"\u{1F1E8}\u{1F1F1}"},{code:"+86",iso:"CN",name:"China",flag:"\u{1F1E8}\u{1F1F3}"},{code:"+61",iso:"CX",name:"Christmas Island",flag:"\u{1F1E8}\u{1F1FD}"},{code:"+61",iso:"CC",name:"Cocos Islands",flag:"\u{1F1E8}\u{1F1E8}"},{code:"+57",iso:"CO",name:"Colombia",flag:"\u{1F1E8}\u{1F1F4}"},{code:"+269",iso:"KM",name:"Comoros",flag:"\u{1F1F0}\u{1F1F2}"},{code:"+242",iso:"CG",name:"Congo",flag:"\u{1F1E8}\u{1F1EC}"},{code:"+243",iso:"CD",name:"Congo (DRC)",flag:"\u{1F1E8}\u{1F1E9}"},{code:"+682",iso:"CK",name:"Cook Islands",flag:"\u{1F1E8}\u{1F1F0}"},{code:"+506",iso:"CR",name:"Costa Rica",flag:"\u{1F1E8}\u{1F1F7}"},{code:"+385",iso:"HR",name:"Croatia",flag:"\u{1F1ED}\u{1F1F7}"},{code:"+53",iso:"CU",name:"Cuba",flag:"\u{1F1E8}\u{1F1FA}"},{code:"+599",iso:"CW",name:"Cura\xE7ao",flag:"\u{1F1E8}\u{1F1FC}"},{code:"+357",iso:"CY",name:"Cyprus",flag:"\u{1F1E8}\u{1F1FE}"},{code:"+420",iso:"CZ",name:"Czech Republic",flag:"\u{1F1E8}\u{1F1FF}"},{code:"+45",iso:"DK",name:"Denmark",flag:"\u{1F1E9}\u{1F1F0}"},{code:"+253",iso:"DJ",name:"Djibouti",flag:"\u{1F1E9}\u{1F1EF}"},{code:"+1767",iso:"DM",name:"Dominica",flag:"\u{1F1E9}\u{1F1F2}"},{code:"+1809",iso:"DO",name:"Dominican Republic",flag:"\u{1F1E9}\u{1F1F4}"},{code:"+593",iso:"EC",name:"Ecuador",flag:"\u{1F1EA}\u{1F1E8}"},{code:"+20",iso:"EG",name:"Egypt",flag:"\u{1F1EA}\u{1F1EC}"},{code:"+503",iso:"SV",name:"El Salvador",flag:"\u{1F1F8}\u{1F1FB}"},{code:"+240",iso:"GQ",name:"Equatorial Guinea",flag:"\u{1F1EC}\u{1F1F6}"},{code:"+291",iso:"ER",name:"Eritrea",flag:"\u{1F1EA}\u{1F1F7}"},{code:"+372",iso:"EE",name:"Estonia",flag:"\u{1F1EA}\u{1F1EA}"},{code:"+251",iso:"ET",name:"Ethiopia",flag:"\u{1F1EA}\u{1F1F9}"},{code:"+500",iso:"FK",name:"Falkland Islands",flag:"\u{1F1EB}\u{1F1F0}"},{code:"+298",iso:"FO",name:"Faroe Islands",flag:"\u{1F1EB}\u{1F1F4}"},{code:"+679",iso:"FJ",name:"Fiji",flag:"\u{1F1EB}\u{1F1EF}"},{code:"+358",iso:"FI",name:"Finland",flag:"\u{1F1EB}\u{1F1EE}"},{code:"+33",iso:"FR",name:"France",flag:"\u{1F1EB}\u{1F1F7}"},{code:"+594",iso:"GF",name:"French Guiana",flag:"\u{1F1EC}\u{1F1EB}"},{code:"+689",iso:"PF",name:"French Polynesia",flag:"\u{1F1F5}\u{1F1EB}"},{code:"+241",iso:"GA",name:"Gabon",flag:"\u{1F1EC}\u{1F1E6}"},{code:"+220",iso:"GM",name:"Gambia",flag:"\u{1F1EC}\u{1F1F2}"},{code:"+995",iso:"GE",name:"Georgia",flag:"\u{1F1EC}\u{1F1EA}"},{code:"+49",iso:"DE",name:"Germany",flag:"\u{1F1E9}\u{1F1EA}"},{code:"+233",iso:"GH",name:"Ghana",flag:"\u{1F1EC}\u{1F1ED}"},{code:"+350",iso:"GI",name:"Gibraltar",flag:"\u{1F1EC}\u{1F1EE}"},{code:"+30",iso:"GR",name:"Greece",flag:"\u{1F1EC}\u{1F1F7}"},{code:"+299",iso:"GL",name:"Greenland",flag:"\u{1F1EC}\u{1F1F1}"},{code:"+1473",iso:"GD",name:"Grenada",flag:"\u{1F1EC}\u{1F1E9}"},{code:"+590",iso:"GP",name:"Guadeloupe",flag:"\u{1F1EC}\u{1F1F5}"},{code:"+1671",iso:"GU",name:"Guam",flag:"\u{1F1EC}\u{1F1FA}"},{code:"+502",iso:"GT",name:"Guatemala",flag:"\u{1F1EC}\u{1F1F9}"},{code:"+44",iso:"GG",name:"Guernsey",flag:"\u{1F1EC}\u{1F1EC}"},{code:"+224",iso:"GN",name:"Guinea",flag:"\u{1F1EC}\u{1F1F3}"},{code:"+245",iso:"GW",name:"Guinea-Bissau",flag:"\u{1F1EC}\u{1F1FC}"},{code:"+592",iso:"GY",name:"Guyana",flag:"\u{1F1EC}\u{1F1FE}"},{code:"+509",iso:"HT",name:"Haiti",flag:"\u{1F1ED}\u{1F1F9}"},{code:"+504",iso:"HN",name:"Honduras",flag:"\u{1F1ED}\u{1F1F3}"},{code:"+852",iso:"HK",name:"Hong Kong",flag:"\u{1F1ED}\u{1F1F0}"},{code:"+36",iso:"HU",name:"Hungary",flag:"\u{1F1ED}\u{1F1FA}"},{code:"+354",iso:"IS",name:"Iceland",flag:"\u{1F1EE}\u{1F1F8}"},{code:"+91",iso:"IN",name:"India",flag:"\u{1F1EE}\u{1F1F3}"},{code:"+62",iso:"ID",name:"Indonesia",flag:"\u{1F1EE}\u{1F1E9}"},{code:"+98",iso:"IR",name:"Iran",flag:"\u{1F1EE}\u{1F1F7}"},{code:"+964",iso:"IQ",name:"Iraq",flag:"\u{1F1EE}\u{1F1F6}"},{code:"+353",iso:"IE",name:"Ireland",flag:"\u{1F1EE}\u{1F1EA}"},{code:"+44",iso:"IM",name:"Isle of Man",flag:"\u{1F1EE}\u{1F1F2}"},{code:"+972",iso:"IL",name:"Israel",flag:"\u{1F1EE}\u{1F1F1}"},{code:"+39",iso:"IT",name:"Italy",flag:"\u{1F1EE}\u{1F1F9}"},{code:"+225",iso:"CI",name:"Ivory Coast",flag:"\u{1F1E8}\u{1F1EE}"},{code:"+1876",iso:"JM",name:"Jamaica",flag:"\u{1F1EF}\u{1F1F2}"},{code:"+81",iso:"JP",name:"Japan",flag:"\u{1F1EF}\u{1F1F5}"},{code:"+44",iso:"JE",name:"Jersey",flag:"\u{1F1EF}\u{1F1EA}"},{code:"+962",iso:"JO",name:"Jordan",flag:"\u{1F1EF}\u{1F1F4}"},{code:"+7",iso:"KZ",name:"Kazakhstan",flag:"\u{1F1F0}\u{1F1FF}"},{code:"+254",iso:"KE",name:"Kenya",flag:"\u{1F1F0}\u{1F1EA}"},{code:"+686",iso:"KI",name:"Kiribati",flag:"\u{1F1F0}\u{1F1EE}"},{code:"+383",iso:"XK",name:"Kosovo",flag:"\u{1F1FD}\u{1F1F0}"},{code:"+965",iso:"KW",name:"Kuwait",flag:"\u{1F1F0}\u{1F1FC}"},{code:"+996",iso:"KG",name:"Kyrgyzstan",flag:"\u{1F1F0}\u{1F1EC}"},{code:"+856",iso:"LA",name:"Laos",flag:"\u{1F1F1}\u{1F1E6}"},{code:"+371",iso:"LV",name:"Latvia",flag:"\u{1F1F1}\u{1F1FB}"},{code:"+961",iso:"LB",name:"Lebanon",flag:"\u{1F1F1}\u{1F1E7}"},{code:"+266",iso:"LS",name:"Lesotho",flag:"\u{1F1F1}\u{1F1F8}"},{code:"+231",iso:"LR",name:"Liberia",flag:"\u{1F1F1}\u{1F1F7}"},{code:"+218",iso:"LY",name:"Libya",flag:"\u{1F1F1}\u{1F1FE}"},{code:"+423",iso:"LI",name:"Liechtenstein",flag:"\u{1F1F1}\u{1F1EE}"},{code:"+370",iso:"LT",name:"Lithuania",flag:"\u{1F1F1}\u{1F1F9}"},{code:"+352",iso:"LU",name:"Luxembourg",flag:"\u{1F1F1}\u{1F1FA}"},{code:"+853",iso:"MO",name:"Macao",flag:"\u{1F1F2}\u{1F1F4}"},{code:"+389",iso:"MK",name:"Macedonia",flag:"\u{1F1F2}\u{1F1F0}"},{code:"+261",iso:"MG",name:"Madagascar",flag:"\u{1F1F2}\u{1F1EC}"},{code:"+265",iso:"MW",name:"Malawi",flag:"\u{1F1F2}\u{1F1FC}"},{code:"+60",iso:"MY",name:"Malaysia",flag:"\u{1F1F2}\u{1F1FE}"},{code:"+960",iso:"MV",name:"Maldives",flag:"\u{1F1F2}\u{1F1FB}"},{code:"+223",iso:"ML",name:"Mali",flag:"\u{1F1F2}\u{1F1F1}"},{code:"+356",iso:"MT",name:"Malta",flag:"\u{1F1F2}\u{1F1F9}"},{code:"+692",iso:"MH",name:"Marshall Islands",flag:"\u{1F1F2}\u{1F1ED}"},{code:"+596",iso:"MQ",name:"Martinique",flag:"\u{1F1F2}\u{1F1F6}"},{code:"+222",iso:"MR",name:"Mauritania",flag:"\u{1F1F2}\u{1F1F7}"},{code:"+230",iso:"MU",name:"Mauritius",flag:"\u{1F1F2}\u{1F1FA}"},{code:"+262",iso:"YT",name:"Mayotte",flag:"\u{1F1FE}\u{1F1F9}"},{code:"+52",iso:"MX",name:"Mexico",flag:"\u{1F1F2}\u{1F1FD}"},{code:"+691",iso:"FM",name:"Micronesia",flag:"\u{1F1EB}\u{1F1F2}"},{code:"+373",iso:"MD",name:"Moldova",flag:"\u{1F1F2}\u{1F1E9}"},{code:"+377",iso:"MC",name:"Monaco",flag:"\u{1F1F2}\u{1F1E8}"},{code:"+976",iso:"MN",name:"Mongolia",flag:"\u{1F1F2}\u{1F1F3}"},{code:"+382",iso:"ME",name:"Montenegro",flag:"\u{1F1F2}\u{1F1EA}"},{code:"+1664",iso:"MS",name:"Montserrat",flag:"\u{1F1F2}\u{1F1F8}"},{code:"+212",iso:"MA",name:"Morocco",flag:"\u{1F1F2}\u{1F1E6}"},{code:"+258",iso:"MZ",name:"Mozambique",flag:"\u{1F1F2}\u{1F1FF}"},{code:"+95",iso:"MM",name:"Myanmar",flag:"\u{1F1F2}\u{1F1F2}"},{code:"+264",iso:"NA",name:"Namibia",flag:"\u{1F1F3}\u{1F1E6}"},{code:"+674",iso:"NR",name:"Nauru",flag:"\u{1F1F3}\u{1F1F7}"},{code:"+977",iso:"NP",name:"Nepal",flag:"\u{1F1F3}\u{1F1F5}"},{code:"+31",iso:"NL",name:"Netherlands",flag:"\u{1F1F3}\u{1F1F1}"},{code:"+687",iso:"NC",name:"New Caledonia",flag:"\u{1F1F3}\u{1F1E8}"},{code:"+64",iso:"NZ",name:"New Zealand",flag:"\u{1F1F3}\u{1F1FF}"},{code:"+505",iso:"NI",name:"Nicaragua",flag:"\u{1F1F3}\u{1F1EE}"},{code:"+227",iso:"NE",name:"Niger",flag:"\u{1F1F3}\u{1F1EA}"},{code:"+234",iso:"NG",name:"Nigeria",flag:"\u{1F1F3}\u{1F1EC}"},{code:"+683",iso:"NU",name:"Niue",flag:"\u{1F1F3}\u{1F1FA}"},{code:"+672",iso:"NF",name:"Norfolk Island",flag:"\u{1F1F3}\u{1F1EB}"},{code:"+850",iso:"KP",name:"North Korea",flag:"\u{1F1F0}\u{1F1F5}"},{code:"+1670",iso:"MP",name:"Northern Mariana Islands",flag:"\u{1F1F2}\u{1F1F5}"},{code:"+47",iso:"NO",name:"Norway",flag:"\u{1F1F3}\u{1F1F4}"},{code:"+968",iso:"OM",name:"Oman",flag:"\u{1F1F4}\u{1F1F2}"},{code:"+92",iso:"PK",name:"Pakistan",flag:"\u{1F1F5}\u{1F1F0}"},{code:"+680",iso:"PW",name:"Palau",flag:"\u{1F1F5}\u{1F1FC}"},{code:"+970",iso:"PS",name:"Palestine",flag:"\u{1F1F5}\u{1F1F8}"},{code:"+507",iso:"PA",name:"Panama",flag:"\u{1F1F5}\u{1F1E6}"},{code:"+675",iso:"PG",name:"Papua New Guinea",flag:"\u{1F1F5}\u{1F1EC}"},{code:"+595",iso:"PY",name:"Paraguay",flag:"\u{1F1F5}\u{1F1FE}"},{code:"+51",iso:"PE",name:"Peru",flag:"\u{1F1F5}\u{1F1EA}"},{code:"+63",iso:"PH",name:"Philippines",flag:"\u{1F1F5}\u{1F1ED}"},{code:"+48",iso:"PL",name:"Poland",flag:"\u{1F1F5}\u{1F1F1}"},{code:"+351",iso:"PT",name:"Portugal",flag:"\u{1F1F5}\u{1F1F9}"},{code:"+1787",iso:"PR",name:"Puerto Rico",flag:"\u{1F1F5}\u{1F1F7}"},{code:"+974",iso:"QA",name:"Qatar",flag:"\u{1F1F6}\u{1F1E6}"},{code:"+262",iso:"RE",name:"R\xE9union",flag:"\u{1F1F7}\u{1F1EA}"},{code:"+40",iso:"RO",name:"Romania",flag:"\u{1F1F7}\u{1F1F4}"},{code:"+7",iso:"RU",name:"Russia",flag:"\u{1F1F7}\u{1F1FA}"},{code:"+250",iso:"RW",name:"Rwanda",flag:"\u{1F1F7}\u{1F1FC}"},{code:"+590",iso:"BL",name:"Saint Barth\xE9lemy",flag:"\u{1F1E7}\u{1F1F1}"},{code:"+290",iso:"SH",name:"Saint Helena",flag:"\u{1F1F8}\u{1F1ED}"},{code:"+1869",iso:"KN",name:"Saint Kitts and Nevis",flag:"\u{1F1F0}\u{1F1F3}"},{code:"+1758",iso:"LC",name:"Saint Lucia",flag:"\u{1F1F1}\u{1F1E8}"},{code:"+590",iso:"MF",name:"Saint Martin",flag:"\u{1F1F2}\u{1F1EB}"},{code:"+508",iso:"PM",name:"Saint Pierre and Miquelon",flag:"\u{1F1F5}\u{1F1F2}"},{code:"+1784",iso:"VC",name:"Saint Vincent and the Grenadines",flag:"\u{1F1FB}\u{1F1E8}"},{code:"+685",iso:"WS",name:"Samoa",flag:"\u{1F1FC}\u{1F1F8}"},{code:"+378",iso:"SM",name:"San Marino",flag:"\u{1F1F8}\u{1F1F2}"},{code:"+239",iso:"ST",name:"S\xE3o Tom\xE9 and Pr\xEDncipe",flag:"\u{1F1F8}\u{1F1F9}"},{code:"+966",iso:"SA",name:"Saudi Arabia",flag:"\u{1F1F8}\u{1F1E6}"},{code:"+221",iso:"SN",name:"Senegal",flag:"\u{1F1F8}\u{1F1F3}"},{code:"+381",iso:"RS",name:"Serbia",flag:"\u{1F1F7}\u{1F1F8}"},{code:"+248",iso:"SC",name:"Seychelles",flag:"\u{1F1F8}\u{1F1E8}"},{code:"+232",iso:"SL",name:"Sierra Leone",flag:"\u{1F1F8}\u{1F1F1}"},{code:"+65",iso:"SG",name:"Singapore",flag:"\u{1F1F8}\u{1F1EC}"},{code:"+1721",iso:"SX",name:"Sint Maarten",flag:"\u{1F1F8}\u{1F1FD}"},{code:"+421",iso:"SK",name:"Slovakia",flag:"\u{1F1F8}\u{1F1F0}"},{code:"+386",iso:"SI",name:"Slovenia",flag:"\u{1F1F8}\u{1F1EE}"},{code:"+677",iso:"SB",name:"Solomon Islands",flag:"\u{1F1F8}\u{1F1E7}"},{code:"+252",iso:"SO",name:"Somalia",flag:"\u{1F1F8}\u{1F1F4}"},{code:"+27",iso:"ZA",name:"South Africa",flag:"\u{1F1FF}\u{1F1E6}"},{code:"+82",iso:"KR",name:"South Korea",flag:"\u{1F1F0}\u{1F1F7}"},{code:"+211",iso:"SS",name:"South Sudan",flag:"\u{1F1F8}\u{1F1F8}"},{code:"+34",iso:"ES",name:"Spain",flag:"\u{1F1EA}\u{1F1F8}"},{code:"+94",iso:"LK",name:"Sri Lanka",flag:"\u{1F1F1}\u{1F1F0}"},{code:"+249",iso:"SD",name:"Sudan",flag:"\u{1F1F8}\u{1F1E9}"},{code:"+597",iso:"SR",name:"Suriname",flag:"\u{1F1F8}\u{1F1F7}"},{code:"+47",iso:"SJ",name:"Svalbard and Jan Mayen",flag:"\u{1F1F8}\u{1F1EF}"},{code:"+268",iso:"SZ",name:"Swaziland",flag:"\u{1F1F8}\u{1F1FF}"},{code:"+46",iso:"SE",name:"Sweden",flag:"\u{1F1F8}\u{1F1EA}"},{code:"+41",iso:"CH",name:"Switzerland",flag:"\u{1F1E8}\u{1F1ED}"},{code:"+963",iso:"SY",name:"Syria",flag:"\u{1F1F8}\u{1F1FE}"},{code:"+886",iso:"TW",name:"Taiwan",flag:"\u{1F1F9}\u{1F1FC}"},{code:"+992",iso:"TJ",name:"Tajikistan",flag:"\u{1F1F9}\u{1F1EF}"},{code:"+255",iso:"TZ",name:"Tanzania",flag:"\u{1F1F9}\u{1F1FF}"},{code:"+66",iso:"TH",name:"Thailand",flag:"\u{1F1F9}\u{1F1ED}"},{code:"+670",iso:"TL",name:"Timor-Leste",flag:"\u{1F1F9}\u{1F1F1}"},{code:"+228",iso:"TG",name:"Togo",flag:"\u{1F1F9}\u{1F1EC}"},{code:"+690",iso:"TK",name:"Tokelau",flag:"\u{1F1F9}\u{1F1F0}"},{code:"+676",iso:"TO",name:"Tonga",flag:"\u{1F1F9}\u{1F1F4}"},{code:"+1868",iso:"TT",name:"Trinidad and Tobago",flag:"\u{1F1F9}\u{1F1F9}"},{code:"+216",iso:"TN",name:"Tunisia",flag:"\u{1F1F9}\u{1F1F3}"},{code:"+90",iso:"TR",name:"Turkey",flag:"\u{1F1F9}\u{1F1F7}"},{code:"+993",iso:"TM",name:"Turkmenistan",flag:"\u{1F1F9}\u{1F1F2}"},{code:"+1649",iso:"TC",name:"Turks and Caicos Islands",flag:"\u{1F1F9}\u{1F1E8}"},{code:"+688",iso:"TV",name:"Tuvalu",flag:"\u{1F1F9}\u{1F1FB}"},{code:"+256",iso:"UG",name:"Uganda",flag:"\u{1F1FA}\u{1F1EC}"},{code:"+380",iso:"UA",name:"Ukraine",flag:"\u{1F1FA}\u{1F1E6}"},{code:"+971",iso:"AE",name:"United Arab Emirates",flag:"\u{1F1E6}\u{1F1EA}"},{code:"+44",iso:"GB",name:"United Kingdom",flag:"\u{1F1EC}\u{1F1E7}"},{code:"+1",iso:"US",name:"United States",flag:"\u{1F1FA}\u{1F1F8}"},{code:"+598",iso:"UY",name:"Uruguay",flag:"\u{1F1FA}\u{1F1FE}"},{code:"+998",iso:"UZ",name:"Uzbekistan",flag:"\u{1F1FA}\u{1F1FF}"},{code:"+678",iso:"VU",name:"Vanuatu",flag:"\u{1F1FB}\u{1F1FA}"},{code:"+379",iso:"VA",name:"Vatican City",flag:"\u{1F1FB}\u{1F1E6}"},{code:"+58",iso:"VE",name:"Venezuela",flag:"\u{1F1FB}\u{1F1EA}"},{code:"+84",iso:"VN",name:"Vietnam",flag:"\u{1F1FB}\u{1F1F3}"},{code:"+1284",iso:"VG",name:"Virgin Islands (British)",flag:"\u{1F1FB}\u{1F1EC}"},{code:"+1340",iso:"VI",name:"Virgin Islands (US)",flag:"\u{1F1FB}\u{1F1EE}"},{code:"+681",iso:"WF",name:"Wallis and Futuna",flag:"\u{1F1FC}\u{1F1EB}"},{code:"+212",iso:"EH",name:"Western Sahara",flag:"\u{1F1EA}\u{1F1ED}"},{code:"+967",iso:"YE",name:"Yemen",flag:"\u{1F1FE}\u{1F1EA}"},{code:"+260",iso:"ZM",name:"Zambia",flag:"\u{1F1FF}\u{1F1F2}"},{code:"+263",iso:"ZW",name:"Zimbabwe",flag:"\u{1F1FF}\u{1F1FC}"}];function ke(t){let e=t.toLowerCase().trim().replace(/\s+/g," ");return e==="date:mmddyyyy"?{type:"date",pattern:"mmddyyyy"}:e==="date:ddmmyyyy"?{type:"date",pattern:"ddmmyyyy"}:e==="time:hhmm am"||e==="time:hhmm"?{type:"time",pattern:"hhmm",defaultMeridiem:"AM"}:e==="time:hhmm pm"?{type:"time",pattern:"hhmm",defaultMeridiem:"PM"}:e==="time:h:mm am"||e==="time:h:mm"?{type:"time",pattern:"h:mm",defaultMeridiem:"AM"}:e==="time:h:mm pm"?{type:"time",pattern:"h:mm",defaultMeridiem:"PM"}:e==="time:hh:mm"||e==="time:hh:mm am"?{type:"time",pattern:"hh:mm",defaultMeridiem:"AM"}:e==="time:hh:mm pm"?{type:"time",pattern:"hh:mm",defaultMeridiem:"PM"}:e==="number"?{type:"number",pattern:"number"}:e==="percent"?{type:"percent",pattern:"percent"}:e==="country-code"?{type:"country-code",pattern:"country-code",countryCodeFormat:"default"}:e==="country-code:iso"?{type:"country-code",pattern:"country-code",countryCodeFormat:"iso"}:e==="country-code:flag"?{type:"country-code",pattern:"country-code",countryCodeFormat:"flag"}:e==="country-code:name"?{type:"country-code",pattern:"country-code",countryCodeFormat:"name"}:e==="country-code:flag-iso"?{type:"country-code",pattern:"country-code",countryCodeFormat:"flag-iso"}:e==="country-code:flag-name"?{type:"country-code",pattern:"country-code",countryCodeFormat:"flag-name"}:null}function it(t){if(t.type==="date"){let e=t.pattern==="mmddyyyy"?"mm/dd/yyyy":"dd/mm/yyyy";return kt({mode:e,separator:"/"})}else{if(t.type==="time")return t.pattern==="h:mm"?t.defaultMeridiem!==void 0?{mask:[/\d/,/\d?/,":",/\d/,/\d/," ",/[APap]/,/[Mm]/],preprocessors:[({elementState:n,data:o})=>{let s=n.value.replace(/[^\d]/g,"");if(/^\d+$/.test(o)){let r=s+o;if(r.length===1)return{elementState:n,data:r+":"};if(r.length===2)return parseInt(r)>12?{elementState:n,data:r[0]+":"+r[1]}:{elementState:n,data:r+":"};if(r.length===3)return{elementState:n,data:r[0]+":"+r.slice(1)+" "+t.defaultMeridiem};if(r.length===4)return{elementState:n,data:r.slice(0,2)+":"+r.slice(2)+" "+t.defaultMeridiem}}if(/[apAP]/i.test(o)){let r=o.toUpperCase();if(r==="A"||r==="P")return{elementState:n,data:" "+r+"M"};if(r==="AM"||r==="PM")return{elementState:n,data:" "+r}}return{elementState:n,data:o}}],postprocessors:[({value:n,selection:o})=>{let s=n.match(/^(\d{1,2}):(\d{2})(\s+(AM|PM))?/i);if(s){let r=parseInt(s[1]),i=parseInt(s[2]),a=s[4]?.toUpperCase()||t.defaultMeridiem;return r<1||r>12||i>59?{value:n.slice(0,-1),selection:o}:{value:`${r}:${i.toString().padStart(2,"0")} ${a}`,selection:o}}return{value:n,selection:o}}]}:{mask:[/\d/,/\d?/,":",/\d/,/\d/],preprocessors:[({elementState:n,data:o})=>{if(/^\d+$/.test(o)){let r=n.value.replace(/[^\d]/g,"")+o;if(r.length===1)return{elementState:n,data:r+":"};if(r.length===3)return{elementState:n,data:r[0]+":"+r.slice(1)};if(r.length===4)return{elementState:n,data:r.slice(0,2)+":"+r.slice(2)}}return{elementState:n,data:o}}]}:t.pattern==="hh:mm"?t.defaultMeridiem!==void 0?Ee({mode:"HH:MM AA"}):Ee({mode:"HH:MM"}):Ee({mode:"HH:MM AA"});if(t.type==="number")return{mask:/^-?\d+(,\d{3})*(\.\d+)?$/,preprocessors:[({elementState:e,data:n})=>{let o=e.value.replace(/,/g,""),s=n.replace(/,/g,"");return{elementState:{...e,value:o},data:s}}],postprocessors:[({value:e,selection:n})=>{if(e&&/^-?\d+(\.\d*)?$/.test(e)){let o=e.split("."),s=o[0],r=o[1],i=s.replace(/\B(?=(\d{3})+(?!\d))/g,",");return{value:r!==void 0?`${i}.${r}`:i,selection:[n[0],n[1]]}}return{value:e,selection:n}}]};if(t.type==="percent")return{mask:/^\d{0,3}(\.\d{0,2})?%?$/,preprocessors:[({elementState:e,data:n})=>{let o=e.value.replace("%",""),s=n.replace("%","");return{elementState:{...e,value:o},data:s}}],postprocessors:[({value:e,selection:n})=>e&&!e.endsWith("%")?{value:e+"%",selection:[n[0],n[1]]}:{value:e,selection:n}]}}return null}function Ks(t){t.querySelectorAll("input[data-input]").forEach((n,o)=>{let s=n,r=s.getAttribute("data-input");if(!r)return;let i=ke(r);if(!i)return;let a=it(i);if(!a)return;let c=new G(s,a);s.dispatchEvent(new CustomEvent("cd:inputformat:bound",{bubbles:!0}));let l=s.value;s.addEventListener("input",()=>{let d=s.value;d!==l&&(s.dispatchEvent(new CustomEvent("cd:inputformat:changed",{bubbles:!0,detail:{raw:l,formatted:d}})),l=d)}),s.addEventListener("blur",()=>{let d=s.value.length===0||s.checkValidity();s.setAttribute("aria-invalid",(!d).toString()),d||s.dispatchEvent(new CustomEvent("cd:inputformat:invalid",{bubbles:!0}))}),s.__maskito=c})}function js(t,e){if(console.log(`\u{1F4DE} [COUNTRY-CODE] Populating select with format: "${e}"`),t.options.length>0&&t.options[0].value==="")for(;t.options.length>1;)t.remove(1);else t.innerHTML="";wn.forEach(o=>{let s=document.createElement("option");switch(s.value=o.code,e){case"default":s.textContent=o.code;break;case"iso":s.textContent=`${o.code} (${o.iso})`;break;case"flag":s.textContent=`${o.flag} ${o.code}`;break;case"name":s.textContent=`${o.code} ${o.name}`;break;case"flag-iso":s.textContent=`${o.flag} ${o.code} (${o.iso})`;break;case"flag-name":s.textContent=`${o.flag} ${o.code} ${o.name}`;break}t.appendChild(s)}),console.log(`\u2705 [COUNTRY-CODE] Populated ${wn.length} country codes`)}function qs(t){console.log("\u{1F4DE} [COUNTRY-CODE] ========== INITIALIZING =========="),console.log("\u{1F4DE} [COUNTRY-CODE] Form:",{element:t,id:t.id,"data-cd-form":t.getAttribute("data-cd-form")});let e=t.querySelectorAll('select[data-input^="country-code"]');if(console.log(`\u{1F4DE} [COUNTRY-CODE] Found ${e.length} country code selects`),e.length===0){console.warn('\u26A0\uFE0F [COUNTRY-CODE] No selects found with data-input starting with "country-code"'),console.warn('\u26A0\uFE0F [COUNTRY-CODE] Make sure your <select> has attribute like: data-input="country-code" or data-input="country-code:flag"');let n=t.querySelectorAll("select");console.log(`\u{1F4DE} [COUNTRY-CODE] Total selects in form: ${n.length}`),n.forEach((o,s)=>{console.log(`\u{1F4DE} [COUNTRY-CODE] Select ${s+1}:`,{element:o,name:o.getAttribute("name"),"data-input":o.getAttribute("data-input")})});return}e.forEach((n,o)=>{console.log(`
\u{1F4DE} [COUNTRY-CODE] ========== PROCESSING SELECT ${o+1}/${e.length} ==========`);let s=n.getAttribute("data-input");if(console.log(`\u{1F4DE} [COUNTRY-CODE] data-input attribute: "${s}"`),!s){console.warn("\u26A0\uFE0F [COUNTRY-CODE] Select has no data-input attribute, skipping");return}let r=ke(s);if(console.log("\u{1F4DE} [COUNTRY-CODE] Parsed config:",r),!r){console.warn(`\u26A0\uFE0F [COUNTRY-CODE] Could not parse format from: "${s}"`);return}if(r.type!=="country-code"){console.warn(`\u26A0\uFE0F [COUNTRY-CODE] Config type is "${r.type}", expected "country-code"`);return}let i=r.countryCodeFormat||"default";if(console.log(`\u{1F4DE} [COUNTRY-CODE] Using format: "${i}"`),js(n,i),n.getAttribute("data-dropdown-search")==="true"){console.log(`\u{1F50D} [COUNTRY-CODE] Initializing search for select ${o+1}`);try{new En(n,{create:!1,sortField:"text",maxOptions:null,placeholder:"Search country code...",render:{no_results:function(){return'<div class="no-results">No matching country codes found</div>'}}}),console.log(`\u2705 [COUNTRY-CODE] Search initialized for select ${o+1}`)}catch(c){console.error("\u274C [COUNTRY-CODE] Failed to initialize search:",c)}}n.__countryCodeInitialized=!0,console.log(`\u2705 [COUNTRY-CODE] Select ${o+1} initialized successfully`)}),console.log(`
\u2705 [COUNTRY-CODE] ========== INITIALIZATION COMPLETE ==========`),console.log(`\u2705 [COUNTRY-CODE] Processed ${e.length} country code selects`)}function zs(){let t=document.querySelectorAll("[data-show-when]"),e=new Map;t.forEach((n,o)=>{let s=n.getAttribute("data-show-when");if(!s)return;let[r,i]=s.split("=").map(a=>a.trim());!r||i===void 0||(e.has(r)||e.set(r,new Set),e.get(r).add(n),An(n,r,i))}),e.forEach((n,o)=>{document.querySelectorAll(`input[name="${o}"], select[name="${o}"], textarea[name="${o}"]`).forEach(r=>{r.addEventListener("change",()=>{n.forEach(i=>{let a=i.getAttribute("data-show-when");if(!a)return;let[,c]=a.split("=").map(l=>l.trim());An(i,o,c)})})})})}function An(t,e,n){let o=document.querySelectorAll(`input[name="${e}"], select[name="${e}"], textarea[name="${e}"]`),s="";o.forEach(a=>{let c=a;if(c.type==="radio"||c.type==="checkbox"){let l=c;l.checked&&(s=l.value)}else s=c.value});let r=s===n,i=t;r?(i.style.display="",i.removeAttribute("aria-hidden"),i.querySelectorAll("input, select, textarea, button, [tabindex]").forEach(c=>{c.removeAttribute("tabindex")}),t.dispatchEvent(new CustomEvent("form-wrapper-visibility:shown",{bubbles:!0}))):(i.style.display="none",i.setAttribute("aria-hidden","true"),i.querySelectorAll('input, select, textarea, button, [tabindex]:not([tabindex="-1"])').forEach(c=>{c.setAttribute("tabindex","-1")}),t.dispatchEvent(new CustomEvent("form-wrapper-visibility:hidden",{bubbles:!0})))}var De=new Map;function Ws(){ie("\u{1F504} Initializing Dynamic Rows...");let t=document.querySelectorAll("[data-cd-repeat-group]");if(f("\u{1F50D} Found repeat groups:",t.length),t.length===0){rt("\u26A0\uFE0F No elements found with data-cd-repeat-group attribute");let e=document.querySelectorAll("[data-repeat-group], [data-cd-repeater-group], [data-repeater-group]");f("\u{1F50D} Found elements with similar attributes:",e.length),e.length>0&&(f("\u{1F50D} First possible group:",e[0]),f("\u{1F50D} Its attributes:",Array.from(e[0].attributes).map(n=>`${n.name}="${n.value}"`)));return}t.forEach((e,n)=>{f(`\u{1F3AF} Processing Group ${n+1}:`,e.tagName,e.className);let o=e.getAttribute("data-cd-repeat-group");if(f("\u{1F50D} Group name:",o),!o){Gs("\u274C No group name found, skipping");return}let s=window.getComputedStyle(e),r=s.display==="none";if(f("\u{1F50D} Container display/hidden:",s.display,r),r){f("\u23ED\uFE0F Skipping hidden container (will reinitialize when shown)");return}f("\u2705 Proceeding to initialize group:",o),Cn(o,e)}),ie("\u2705 Dynamic rows initialization complete")}function Cn(t,e){let n=e.querySelector("[data-cd-repeat-template]"),o=e.querySelector("[data-cd-add-row]")||e.querySelector(`[data-cd-repeat-add="${t}"]`);if(!o&&(e.parentElement&&(o=e.parentElement.querySelector(`[data-cd-repeat-add="${t}"]`)||e.parentElement.querySelector("[data-cd-add-row]")),o||(o=document.querySelector(`[data-cd-repeat-add="${t}"]`)),!o)){let l=document.querySelectorAll("[data-cd-add-row], [data-cd-repeat-add]");for(let d of Array.from(l)){let u=d.getAttribute("data-cd-repeat-add"),p=d.getAttribute("data-cd-add-row");if(u===t||p===t||d.textContent?.toLowerCase().includes(t.toLowerCase())){o=d;break}}}let s=e.getAttribute("data-cd-name-pattern")||`${t}[{i}][{field}]`;if(f(`\u{1F527} Initializing group: "${t}"`,e.tagName,!!n,!!o),!o){rt(`\u274C No add button found for group "${t}". Checked selectors: [data-cd-add-row], [data-cd-repeat-add="${t}"]`);let l=document.querySelectorAll("[data-cd-add-row], [data-cd-repeat-add]");f("\u{1F50D} Total add buttons in document:",l.length),st&&l.length>0&&l.forEach((d,u)=>{f(`  ${u+1}. ${d.tagName} - data-cd-repeat-add: "${d.getAttribute("data-cd-repeat-add")}" - data-cd-add-row: "${d.getAttribute("data-cd-add-row")}"`)})}if(n)f("\u2705 Template found:",n.tagName,n.className),n.style.display="none";else{f("\u{1F50D} No template found, searching for existing rows...");let l=e.querySelector("[data-cd-repeat-row]");if(f("\u{1F50D} First existing row found:",!!l),l){f("\u{1F50D} First row details:",l.tagName,l.className),n=l.cloneNode(!0),n.setAttribute("data-cd-repeat-template","");let d=n.querySelectorAll("input, select, textarea");f("\u{1F50D} Clearing",d.length,"input values in template"),d.forEach(u=>{u.value=""}),n.style.display="none",e.insertBefore(n,l),f(`\u2705 Created and hid template from first row for group "${t}"`)}else{f("\u{1F50D} Searching for elements with similar row attributes...");let d=e.querySelectorAll("[data-repeat-row], [data-cd-repeater-row], [data-repeater-row]");f("\u{1F50D} Found possible rows:",d.length),d.length>0&&(f("\u{1F50D} First possible row:",d[0]),f("\u{1F50D} Its attributes:",Array.from(d[0].attributes).map(u=>`${u.name}="${u.value}"`)))}}if(!n){console.error("\u274C No template available, cannot initialize group");return}let r=Array.from(e.querySelectorAll("[data-cd-repeat-row]:not([data-cd-repeat-template])"));if(f("\u{1F50D} Found existing data rows:",r.length),r.forEach((l,d)=>{f(`\u{1F50D} Existing row ${d+1}:`,{tag:l.tagName,class:l.className,"data-cd-repeat-row":l.getAttribute("data-cd-repeat-row")})}),r.length===0){f("\u{1F50D} No existing data rows, creating first row from template...");let l=n.cloneNode(!0);l.removeAttribute("data-cd-repeat-template");let d=l;d.style.cssText=d.style.cssText.replace(/display\s*:\s*[^;]+;?/,"")+" display: grid !important;",e.appendChild(l),r.push(l)}else if(r.forEach((l,d)=>{let u=l;d===0?(u.style.cssText=u.style.cssText.replace(/display\s*:\s*[^;]+;?/,"")+" display: grid !important;",u.removeAttribute("aria-hidden"),f(`\u{1F50D} Keeping first row visible: row ${d+1}`)):(u.style.display="none",u.setAttribute("aria-hidden","true"),f(`\u{1F50D} Hiding extra row: row ${d+1}`))}),r.length>1){f(`\u{1F50D} Removing ${r.length-1} extra rows from DOM`);for(let l=1;l<r.length;l++)r[l].remove();r.splice(1)}let i={groupName:t,container:e,template:n,namePattern:s,rows:r,addButton:o};De.set(t,i),o?(f(`\u2795 Attaching add button listener for group "${t}"`),o.removeEventListener("click",Sn),o.addEventListener("click",Sn)):console.warn(`\u274C No add button found for group "${t}". Checked selectors: [data-cd-add-row], [data-cd-repeat-add="${t}"]`);let a=e.querySelectorAll("[data-cd-remove-row], [data-cd-repeat-remove]");f(`\u{1F517} Found ${a.length} remove buttons for group "${t}"`),a.forEach(l=>{let d=l.getAttribute("data-cd-repeat-remove");d&&f(`\u{1F517} Remove button references group: "${d}" (should be "${t}")`),l.removeEventListener("click",nt),l.addEventListener("click",nt)});let c=r[0];if(c){let l=c.querySelector("[data-cd-remove-row], [data-cd-repeat-remove]");l&&(l.style.visibility="hidden",l.style.pointerEvents="none",f(`\u{1F441}\uFE0F Hide remove button on first row for group "${t}"`))}Zs(i),at(i),lt(i)}function Zs(t){f(`\u{1F3A8} Applying formatting to ${t.rows.length} existing rows in group "${t.groupName}"`),t.rows.forEach((e,n)=>{let o=e.querySelectorAll("input[data-input]");f(`\u{1F3A8} Row ${n+1}: found ${o.length} inputs with data-input attribute`),o.forEach(s=>{let r=s,i=r.getAttribute("data-input");if(!i)return;f(`\u{1F3A8} Applying formatting to input: data-input="${i}"`);let a=ke(i);if(a){let c=it(a);if(c){r.__maskito&&r.__maskito.destroy();let l=new G(r,c);r.__maskito=l,r.dispatchEvent(new CustomEvent("cd:inputformat:bound",{bubbles:!0})),f(`\u2705 Maskito applied to existing input with data-input="${i}"`)}}})})}function Sn(t){t.preventDefault();let e=t.target,n=e.closest("[data-cd-repeat-add]")||e.closest("[data-cd-add-row]");if(!n){console.error("\u274C No add button found from clicked element");return}let o=n.getAttribute("data-cd-repeat-add")||n.getAttribute("data-cd-add-row");if(!o){console.error("\u274C No group name found on add button");return}if(!document.querySelector(`[data-cd-repeat-group="${o}"]`)){console.error(`\u274C No container found for group "${o}"`);return}let r=De.get(o);if(!r){console.error(`\u274C No group found in activeGroups for "${o}"`);return}Js(r)}function nt(t){t.preventDefault();let e=t.target,n=e.closest("[data-cd-repeat-group]");if(!n)return;let o=n.getAttribute("data-cd-repeat-group");if(!o)return;let s=De.get(o);if(!s)return;let r=Xs(s,e);r&&er(s,r.row)}function Js(t){if(f(`\u2795 Adding new row to group "${t.groupName}" (currently ${t.rows.length} rows)`),t.rows.length>=5){rt(`\u26A0\uFE0F Maximum rows reached for group "${t.groupName}" (5 rows max)`),t.addButton&&(t.addButton.style.opacity="0.5",t.addButton.style.pointerEvents="none");return}let e=t.container.querySelector("[data-cd-repeat-template]");if(!e){console.error("\u274C No template found to clone");return}let n=e.cloneNode(!0);n.removeAttribute("data-cd-repeat-template"),n.querySelectorAll("input, select, textarea").forEach(i=>{let a=i;a.value="";let c=a.getAttribute("data-input");if(c){f(`\u2795 Applying formatting to new input: data-input="${c}"`);let l=ke(c);if(l){let d=it(l);if(d){a.__maskito&&a.__maskito.destroy();let u=new G(a,d);a.__maskito=u,a.dispatchEvent(new CustomEvent("cd:inputformat:bound",{bubbles:!0})),f(`\u2705 Maskito applied to new input with data-input="${c}"`)}}}});let s=n;s.classList.add("visible-row"),s.style.cssText=s.style.cssText.replace(/display\s*:\s*[^;]+;?/,"")+" display: grid !important;",s.removeAttribute("aria-hidden"),t.container.appendChild(n),t.rows.push(n);let r=n.querySelectorAll("[data-cd-remove-row], [data-cd-repeat-remove]");if(f(`\u2795 Attaching ${r.length} remove button listeners to new row`),r.forEach(i=>{i.addEventListener("click",nt)}),rr(n),at(t),lt(t),f(`\u2795 Row added successfully, new total: ${t.rows.length} rows`),t.rows.length>1){let a=t.rows[0].querySelector("[data-cd-remove-row], [data-cd-repeat-remove]");a&&(a.style.visibility="visible",a.style.pointerEvents="auto",f(`\u{1F441}\uFE0F Show remove button on first row (${t.rows.length} rows)`))}t.rows.length>=5&&t.addButton&&(t.addButton.style.opacity="0.5",t.addButton.style.pointerEvents="none"),n.dispatchEvent(new CustomEvent("cd:row:added",{bubbles:!0,detail:{groupName:t.groupName,rowIndex:t.rows.length-1}}))}function at(t){f(`\u{1F522} DYNAMIC: Reindexing ${t.rows.length} rows for group "${t.groupName}"`),t.rows.forEach((e,n)=>{let o=n+1,s=e.querySelectorAll("[data-cd-repeat-name]");f(`\u{1F522} DYNAMIC: Row ${o}: found ${s.length} inputs with data-cd-repeat-name`),s.forEach(a=>{let c=a.getAttribute("data-cd-repeat-name");if(c){let l=`${c}-${o}`;a.name=l,f(`\u{1F522} DYNAMIC: Row ${o}: Updated input name: ${c} \u2192 ${l}`)}}),e.querySelectorAll("[id]").forEach(a=>{let c=a.getAttribute("data-original-id");c?a.id=`${c}-${o}`:a.id.endsWith(`-${o}`)||(a.setAttribute("data-original-id",a.id),a.id=`${a.id}-${o}`)}),e.querySelectorAll("label[for]").forEach(a=>{let c=a.getAttribute("data-original-for");if(c)a.htmlFor=`${c}-${o}`;else{let l=a.htmlFor;l.endsWith(`-${o}`)||(a.setAttribute("data-original-for",l),a.htmlFor=`${l}-${o}`)}})}),f("\u{1F522} DYNAMIC: Dispatching input events to trigger summary updates"),t.rows.forEach((e,n)=>{let o=e.querySelectorAll("input, select, textarea");f(`\u{1F522} DYNAMIC: Row ${n+1}: dispatching events for ${o.length} inputs`),o.forEach(s=>{s.dispatchEvent(new Event("input",{bubbles:!0}))})}),f("\u{1F522} DYNAMIC: Summary fields will be synced by updateSummaries()")}function lt(t){f(`\u{1F4CA} SUMMARY: Updating summaries for group "${t.groupName}" (${t.rows.length} rows)`);let e=document.querySelectorAll(`[data-cd-summary-for="${t.groupName}"]`);f(`\u{1F4CA} SUMMARY: Found ${e.length} summary container(s) for group "${t.groupName}"`),e.forEach((o,s)=>{let r=o.querySelector("[data-cd-summary-template]");if(!r){console.warn(`\u{1F4CA} SUMMARY: No template found in summary container ${s} for group "${t.groupName}"`);return}let i=o.querySelectorAll("[data-summary-row]");f(`\u{1F4CA} SUMMARY: Removing ${i.length} existing summary rows from container ${s}`),i.forEach(a=>a.remove()),f(`\u{1F4CA} SUMMARY: Creating ${t.rows.length} new summary rows for container ${s}`),t.rows.forEach((a,c)=>{let l=c+1,d=r.cloneNode(!0);d.removeAttribute("data-cd-summary-template"),d.setAttribute("data-summary-row",""),d.style.display="";let u=d.querySelectorAll("[data-cd-input-field]");f(`\u{1F4CA} SUMMARY: Processing ${u.length} field elements in summary row ${l}`),u.forEach(p=>{let h=p.getAttribute("data-cd-input-field");if(h){let m=h.replace("{i}",l.toString());p.setAttribute("data-cd-input-field",m),f(`\u{1F4CA} SUMMARY: Updated field: ${h} \u2192 ${m}`)}}),o.appendChild(d)}),r&&(r.style.display="none",f(`\u{1F4CA} SUMMARY: Summary template hidden for container ${s}`))}),Qs();let n=()=>{f(`\u{1F4CA} SUMMARY: *** RE-SYNCING ALL FIELDS *** for group "${t.groupName}"`),e.forEach(o=>{let s=o.querySelectorAll("[data-cd-input-field]");f(`\u{1F4CA} SUMMARY: Found ${s.length} field elements to re-sync`),s.forEach((r,i)=>{let a=r.getAttribute("data-cd-input-field");f(`\u{1F4CA} SUMMARY: Re-syncing field ${i+1}/${s.length}: "${a}"`),a&&$e(r,a)})}),typeof window.TryFormly?.refresh=="function"&&(f("\u{1F4CA} SUMMARY: Triggering TryFormly.refresh() after re-sync"),window.TryFormly.refresh()),f("\u{1F4CA} SUMMARY: *** RE-SYNC COMPLETE ***")};e.forEach(o=>{o.addEventListener("form-wrapper-visibility:shown",()=>{f("\u{1F4CA} SUMMARY: *** CONTAINER BECAME VISIBLE (visibility event) ***"),n()})}),e.forEach(o=>{let s=o.closest('[data-form="step"]');s?(f(`\u{1F4CA} SUMMARY: Setting up form step observer for group "${t.groupName}"`),new MutationObserver(i=>{i.forEach(a=>{if(a.type==="attributes"&&a.attributeName==="style"){let c=a.target;c.style.display!=="none"&&c.offsetParent!==null&&(f("\u{1F4CA} SUMMARY: *** FORM STEP BECAME VISIBLE (MutationObserver) ***"),setTimeout(()=>n(),100))}})}).observe(s,{attributes:!0,attributeFilter:["style","class"]}),f(`\u{1F4CA} SUMMARY: Form step observer attached for group "${t.groupName}"`)):f(`\u{1F4CA} SUMMARY: No parent form step found for group "${t.groupName}"`)}),typeof window.TryFormly?.refresh=="function"&&(f("\u{1F4CA} SUMMARY: Triggering TryFormly.refresh()"),window.TryFormly.refresh())}function Qs(){f("\u{1F504} SUMMARY: Syncing all summary fields...");let t=document.querySelectorAll("[data-cd-input-field]");f(`\u{1F504} SUMMARY: Found ${t.length} summary field elements`),t.forEach((e,n)=>{let o=e.getAttribute("data-cd-input-field");o&&(f(`\u{1F504} SUMMARY: Syncing field ${n+1}: "${o}"`),$e(e,o))})}function $e(t,e){let n=null;if(f(`\u{1F50D} SUMMARY: Syncing summary field: "${e}"`),e.includes("{i}")){f(`\u{1F50D} SUMMARY: Templated field detected: "${e}"`);let r=t.closest("[data-summary-row]");if(r){let i=r.parentElement,c=Array.from(i?.querySelectorAll("[data-summary-row]")||[]).indexOf(r)+1,l=e.replace("{i}",c.toString());if(l.includes("[")&&l.includes("]")){let d=l.match(/\[(\d+)\]\[([^\]]+)\]/);if(d){let u=d[1];l=`${d[2]}-${u}`,f(`\u{1F50D} SUMMARY: Converted bracket pattern: "${e}" \u2192 "${l}"`)}}f(`\u{1F50D} SUMMARY: Resolved templated field: "${e}" \u2192 "${l}"`),e=l}else{f(`\u{1F50D} SUMMARY: Could not resolve templated field "${e}" - no summary row context found`);return}}let o=[`input[name="${e}"]:not([data-cd-repeat-template])`,`select[name="${e}"]:not([data-cd-repeat-template])`,`textarea[name="${e}"]:not([data-cd-repeat-template])`,`input[name="${e}"]`,`select[name="${e}"]`,`textarea[name="${e}"]`,`input[id="${e}"]`,`select[id="${e}"]`,`textarea[id="${e}"]`];for(let r of o){let i=document.querySelectorAll(r);if(i.length!==0){for(let a of Array.from(i)){let c=a,l=a;if(c.offsetParent!==null&&l.value&&l.value.trim()){n=l,f(`\u{1F50D} Found visible source WITH VALUE using selector: ${r}, value="${l.value}"`);break}}if(n)break;f(`\u{1F50D} No visible elements with values found, searching ${i.length} hidden elements for one with a value...`);for(let a of Array.from(i)){let c=a,l=a;if(c.offsetParent===null&&l.value&&l.value.trim()){n=l,f(`\u{1F50D} Found hidden source WITH VALUE using selector: ${r}, value="${l.value}"`);break}}if(n)break;for(let a of Array.from(i))if(a.offsetParent!==null){n=a,f(`\u{1F50D} Found visible source (empty value) using selector: ${r}`);break}if(n)break;n=i[0],f(`\u{1F50D} Found source using first element (last resort): ${r}`);break}}if(!n){f(`\u{1F50D} SUMMARY: Direct match failed for field: "${e}"`);let a=Array.from(document.querySelectorAll("input[name], select[name], textarea[name]")).filter(c=>{let l=c.getAttribute("name");return l&&l.includes("-")}).map(c=>c.getAttribute("name"));f("\u{1F50D} SUMMARY: Available dynamic input names (with suffix pattern):",a),f(`\u{1F50D} SUMMARY: Looking for field name: "${e}"`);return}f(`\u{1F50D} SUMMARY: Found source element for "${e}":`,n.tagName,n.type||"");let s="";if(n.tagName.toLowerCase()==="input"||n.tagName.toLowerCase()==="textarea"){let r=n;f(`\u{1F50D} SUMMARY DEBUG: Input element value: "${r.value}"`),f(`\u{1F50D} SUMMARY DEBUG: Input element name: "${r.name}"`),f(`\u{1F50D} SUMMARY DEBUG: Input element id: "${r.id}"`),f(`\u{1F50D} SUMMARY DEBUG: Element visibility: display="${r.style.display}", parent visible="${r.offsetParent!==null}"`),f(`\u{1F50D} SUMMARY DEBUG: Element classes: "${r.className}"`);let i=document.querySelectorAll(`[name="${e}"]`);f(`\u{1F50D} SUMMARY DEBUG: Found ${i.length} elements with name="${e}"`),i.length>1&&i.forEach((a,c)=>{let l=a;f(`\u{1F50D} SUMMARY DEBUG: Element ${c+1}: value="${a.value}", visible="${l.offsetParent!==null}", classes="${l.className}"`)})}if(n.type==="radio"){let r=document.querySelector(`input[name="${e}"]:checked`);s=r?r.value:""}else n.type==="checkbox"?s=n.checked?"Yes":"No":s=n.value;if(t.textContent=s||"[Not specified]",f(`\u2705 SUMMARY: Updated summary for "${e}": "${s}" (empty: ${!s})`),n.__summaryListenerAdded)f(`\u23ED\uFE0F  SUMMARY: Event listener already exists for field "${e}", skipping`);else{let r=n.type==="radio"||n.type==="checkbox"?"change":"input";f(`\u{1F3A7} SUMMARY: Adding ${r} listener for field "${e}"...`),n.addEventListener(r,()=>{f(`\u{1F504} SUMMARY: *** FIELD INPUT EVENT FIRED *** Field "${e}" changed to: "${n.value}"`),$e(t,e)}),n.type==="radio"&&document.querySelectorAll(`input[name="${e}"]`).forEach(a=>{a.__summaryListenerAdded||(a.addEventListener("change",()=>{f(`\u{1F504} SUMMARY: Radio "${e}" changed, updating summary...`),$e(t,e)}),a.__summaryListenerAdded=!0)}),n.__summaryListenerAdded=!0,f(`\u2705 SUMMARY: Event listener successfully added for field "${e}"`)}}function Xs(t,e){for(let n=0;n<t.rows.length;n++){let o=t.rows[n];if(o.contains(e))return{row:o,index:n}}return null}function er(t,e){if(f(`\u2796 Removing row from group "${t.groupName}" (currently ${t.rows.length} rows)`),t.rows.length<=1){console.warn("Cannot remove last row from group:",t.groupName);return}let n=t.rows.indexOf(e);if(n===-1){console.warn("Target row not found in group:",t.groupName);return}if(f(`\u2796 Removing row at index ${n}`),e.remove(),t.rows.splice(n,1),t.rows.length<5&&t.addButton&&(t.addButton.style.opacity="",t.addButton.style.pointerEvents="",f(`\u2705 Add button re-enabled for group "${t.groupName}"`)),at(t),lt(t),t.rows.length===1){let s=t.rows[0].querySelector("[data-cd-remove-row], [data-cd-repeat-remove]");s&&(s.style.visibility="hidden",s.style.pointerEvents="none",f("\u{1F441}\uFE0F Hide remove button on first row (back to 1 row)"))}f(`\u2796 Row removed successfully, new total: ${t.rows.length} rows`),e.dispatchEvent(new CustomEvent("cd:row:removed",{bubbles:!0,detail:{groupName:t.groupName,rowIndex:n,removedRow:e}}))}function tr(t,e){Cn(t,e)}var xn="tooltip_component",Mn="tooltip_element-wrapper",Ln="tooltip_tooltip-wrapper",_n="tooltip_pointer",et={bottom:"top",top:"bottom",left:"right",right:"left"},nr={top:{start:"left",end:"right",len:"width",translate:"translateX"},bottom:{start:"left",end:"right",len:"width",translate:"translateX"},left:{start:"top",end:"bottom",len:"height",translate:"translateY"},right:{start:"top",end:"bottom",len:"height",translate:"translateY"}};function or(t){let e=t.closest(`.${xn}`);if(e)return{mode:"standard",comp:e,panel:e.querySelector(`.${Ln}`),pointer:e.querySelector(`.${_n}`)};let n=t.closest("[data-tt-group]")||t.parentElement,o=t.getAttribute("data-tt"),s=o?n.querySelector(`.${xn}[data-tt-for="${o}"]`):null;return{mode:"split",comp:s,panel:s?.querySelector(`.${Ln}`),pointer:s?.querySelector(`.${_n}`)}}function On(t){if(t.dataset._ttSetup)return;t.dataset._ttSetup="1";let e=or(t),{mode:n,comp:o,panel:s,pointer:r}=e;if(!s||!r)return;let i=r.className.includes("is-left")?"left":r.className.includes("is-right")?"right":r.className.includes("is-bottom")?"bottom":"top";function a(){s&&(s.style.display="block",s.style.opacity="1")}function c(){s&&(s.style.opacity="0",s.style.display="none")}let l=!1,d=0;function u(){if(!l||!s||!r)return;requestAnimationFrame(u);let m=t.getBoundingClientRect(),g=s.getBoundingClientRect(),y=document.documentElement.clientWidth,b=document.documentElement.clientHeight,v={bottom:m.bottom+g.height<b,top:m.top-g.height>0,left:m.left-g.width>0,right:m.right+g.width<y},E=v[i]||!v[et[i]]?i:et[i];if(n==="standard"){let S=nr[E],Y=et[E],N=m[S.start],ae=m[S.end],le=g[S.len],ct=(N+ae-le)/2,dt=(N+ae+le)/2,ce=0,ut=E==="left"||E==="right"?b:y;ct<0?ce=-ct:ut<dt&&(ce=ut-dt),s.style.position="",s.style.transform=S.translate+"("+ce+"px)",r.style.transform=S.translate+"("+-ce+"px) rotate(45deg)";return}s.style.position="fixed";let L=8,M=Math.round(m.left+m.width/2-g.width/2),T=0;E==="bottom"?T=Math.round(m.bottom+L):E==="top"?T=Math.round(m.top-L-g.height):E==="left"?(T=Math.round(m.top+m.height/2-g.height/2),M=Math.round(m.left-L-g.width)):(T=Math.round(m.top+m.height/2-g.height/2),M=Math.round(m.right+L));let w=8;M=Math.max(w,Math.min(M,y-g.width-w)),T=Math.max(w,Math.min(T,b-g.height-w)),s.style.left=M+"px",s.style.top=T+"px",s.style.right="",s.style.bottom="",s.style.transform="none";let x=m.left+m.width/2,A=M+g.width/2,$=x-A;if(E==="top"||E==="bottom")r.style.transform="translateX("+$+"px) rotate(45deg)";else{let S=m.top+m.height/2,Y=T+g.height/2,N=S-Y;r.style.transform="translateY("+N+"px) rotate(45deg)"}}function p(){++d===1&&(a(),l=!0,u())}function h(){d>0&&--d===0&&(l=!1,c())}t.addEventListener("mouseenter",p),t.addEventListener("mouseleave",h),(o||s).addEventListener("mouseenter",p),(o||s).addEventListener("mouseleave",h),t.setAttribute("tabindex","0"),t.addEventListener("focus",p),t.addEventListener("blur",h),t.addEventListener("keydown",m=>{m.key==="Escape"&&h()})}function sr(t){f("\u{1F4AC} Initializing tooltips for form...");let e=t.querySelectorAll(`.${Mn}`);f(`\u{1F4AC} Found ${e.length} tooltip triggers`),e.forEach(n=>On(n)),ie(`\u2705 Tooltips initialized (${e.length} triggers)`)}function rr(t){f("\u{1F4AC} Reinitializing tooltips in new row...");let e=t.querySelectorAll(`.${Mn}`);f(`\u{1F4AC} Found ${e.length} tooltip triggers in row`),e.forEach(n=>On(n))}document.addEventListener("form-wrapper-visibility:shown",t=>{t.target.querySelectorAll("[data-cd-repeat-group]").forEach(o=>{let s=o.getAttribute("data-cd-repeat-group");s&&tr(s,o)})});var In={};function ir(){ie("\u{1F33F} Initializing Branch-Based Summary Visibility...");let t=document.querySelectorAll("[data-cd-summary-branch]");f(`\u{1F33F} Found ${t.length} branch summary elements to hide by default`),t.forEach((n,o)=>{let s=n;s.style.display="none",s.setAttribute("aria-hidden","true"),f(`\u{1F33F} Hidden branch summary ${o+1}: ${s.tagName}.${s.className}`)}),new MutationObserver(n=>{n.forEach(o=>{o.type==="attributes"&&o.attributeName==="style"&&o.target.matches(".step_wrapper[data-cd-branch]")&&tt()}),n.forEach(o=>{o.addedNodes.forEach(s=>{if(s.nodeType===1){let r=s;r.matches&&r.matches(".step_wrapper[data-cd-branch]")&&tt()}})})}).observe(document.body,{attributes:!0,attributeFilter:["style"],childList:!0,subtree:!0}),tt(),ar(),ie("\u2705 Branch-based summary visibility initialization complete")}function tt(){f("\u{1F33F} BRANCH: Checking branch wrapper visibility..."),document.querySelectorAll(".step_wrapper[data-cd-branch]").forEach(e=>{let n=e;if(window.getComputedStyle(n).display!=="none"&&n.offsetParent!==null){let r=e.getAttribute("data-cd-branch"),i=e.getAttribute("data-answer");r&&i&&(In[r]=i,f(`\u{1F33F} BRANCH: Selected ${r} = ${i}`),$n(r,i))}})}function $n(t,e){f(`\u{1F33F} BRANCH: Updating summary visibility for ${t}:${e}`);let n=document.querySelectorAll(`[data-cd-summary-branch^="${t}:"]`);f(`\u{1F33F} BRANCH: Found ${n.length} summary sections for branch group "${t}"`),n.forEach((o,s)=>{let r=o.getAttribute("data-cd-summary-branch"),i=o;if(!r)return;let[a,c]=r.split(":"),l=a===t&&c===e;f(`\u{1F33F} BRANCH: Section ${s+1} (${r}): ${l?"SHOW":"HIDE"}`),l?(i.style.display="",i.removeAttribute("aria-hidden"),i.querySelectorAll("input, select, textarea, button, [tabindex]").forEach(u=>{u.removeAttribute("tabindex")}),o.dispatchEvent(new CustomEvent("cd:branch-summary:shown",{bubbles:!0,detail:{branchGroup:t,branchValue:e,summaryBranchAttr:r}}))):a===t&&(i.style.display="none",i.setAttribute("aria-hidden","true"),i.querySelectorAll('input, select, textarea, button, [tabindex]:not([tabindex="-1"])').forEach(u=>{u.setAttribute("tabindex","-1")}),o.dispatchEvent(new CustomEvent("cd:branch-summary:hidden",{bubbles:!0,detail:{branchGroup:t,branchValue:e,summaryBranchAttr:r}})))})}function ar(){f("\u{1F33F} BRANCH: Updating all summary visibility based on selected branches"),Object.entries(In).forEach(([t,e])=>{$n(t,e)})}function lr(t,e){let n=t.type?.toLowerCase()||t.tagName.toLowerCase(),o=e.type?.toLowerCase()||e.tagName.toLowerCase();if(console.log(`\u{1F4CB} [AUTO-FILL] Copying value: ${n} \u2192 ${o}`,{sourceName:t.getAttribute("name"),destName:e.getAttribute("name"),sourceValue:t.value}),n==="checkbox")e.checked=t.checked,console.log(`\u2705 [AUTO-FILL] Copied checkbox state: ${t.checked}`);else if(n==="radio"){let s=t.getAttribute("name");if(!s){console.warn("\u26A0\uFE0F [AUTO-FILL] Source radio missing name attribute");return}let r=document.querySelector(`input[name="${s}"]:checked`);if(!r){console.log("\u2139\uFE0F [AUTO-FILL] No radio selected in source group");return}let i=e.getAttribute("name");if(!i){console.warn("\u26A0\uFE0F [AUTO-FILL] Dest radio missing name attribute");return}let a=document.querySelector(`input[name="${i}"][value="${r.value}"]`);a?(a.checked=!0,console.log(`\u2705 [AUTO-FILL] Copied radio value: "${r.value}"`)):console.warn(`\u26A0\uFE0F [AUTO-FILL] No matching radio found in dest with value="${r.value}"`)}else if(t.tagName.toLowerCase()==="select"){let s=t,r=e;if(console.log("\u{1F50D} [AUTO-FILL] SELECT Debug:",{sourceValue:s.value,sourceSelectedIndex:s.selectedIndex,sourceOptionsCount:s.options.length,destOptionsCount:r.options.length,sourceOptions:Array.from(s.options).map(i=>({value:i.value,text:i.text,selected:i.selected})),destOptions:Array.from(r.options).map(i=>({value:i.value,text:i.text,selected:i.selected}))}),s.multiple){let i=[];Array.from(r.options).forEach((a,c)=>{a.selected=s.options[c]?.selected||!1,a.selected&&i.push(a.value)}),console.log("\u2705 [AUTO-FILL] Copied multi-select values:",i)}else{let i=s.value;if(Array.from(r.options).find(c=>c.value===i)){r.value=i,console.log(`\u2705 [AUTO-FILL] Copied select value: "${i}"`);let c=r.tomselect;c?(console.log("\u{1F504} [AUTO-FILL] Detected Tom Select on destination, triggering update..."),c.setValue(i,!1),console.log("\u2705 [AUTO-FILL] Tom Select updated")):console.log("\u2139\uFE0F [AUTO-FILL] No Tom Select instance detected, using native select")}else console.warn(`\u26A0\uFE0F [AUTO-FILL] Could not find matching option in destination select. Source value: "${i}"`),console.warn("\u26A0\uFE0F [AUTO-FILL] Available destination options:",Array.from(r.options).map(c=>c.value))}}else e.value=t.value,console.log(`\u2705 [AUTO-FILL] Copied value: "${t.value}"`)}function cr(t){let e=t.type?.toLowerCase()||t.tagName.toLowerCase(),n=t.getAttribute("name");if(console.log(`\u{1F9F9} [AUTO-FILL] Clearing field: type="${e}", name="${n}"`),e==="checkbox")t.checked=!1;else if(e==="radio")t.checked=!1;else if(t.tagName.toLowerCase()==="select"){let o=t;o.multiple?Array.from(o.options).forEach(s=>{s.selected=!1}):o.selectedIndex=0}else t.value=""}function dr(t,e){console.log(`\u{1F9F9} [AUTO-FILL] Clearing fields for group "${t}"...`);let n=e.querySelector(`[data-cd-auto-dest="${t}"]`);if(!n){console.warn(`\u26A0\uFE0F [AUTO-FILL] Destination container not found: data-cd-auto-dest="${t}"`);return}let o=n.querySelectorAll("[data-cd-field-key]");console.log(`\u{1F9F9} [AUTO-FILL] Found ${o.length} destination fields to clear`),o.forEach(s=>{let r=s.getAttribute("data-cd-field-key");cr(s),s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),console.log(`\u2705 [AUTO-FILL] Cleared field with key="${r}"`)}),console.log(`\u2705 [AUTO-FILL] Cleared ${o.length} fields for group "${t}"`)}function ur(t,e){console.log("\u{1F4CB} [AUTO-FILL] ========== COPYING FIELDS =========="),console.log(`\u{1F4CB} [AUTO-FILL] Group: "${t}"`);let n=e.querySelector(`[data-cd-auto-source="${t}"]`);if(!n){console.warn(`\u26A0\uFE0F [AUTO-FILL] Source container not found: data-cd-auto-source="${t}"`),console.warn(`\u26A0\uFE0F [AUTO-FILL] Make sure your source fields are wrapped in an element with data-cd-auto-source="${t}"`);return}console.log("\u2705 [AUTO-FILL] Found source container:",{element:n,tagName:n.tagName,classList:n.className});let o=e.querySelector(`[data-cd-auto-dest="${t}"]`);if(!o){console.warn(`\u26A0\uFE0F [AUTO-FILL] Destination container not found: data-cd-auto-dest="${t}"`),console.warn(`\u26A0\uFE0F [AUTO-FILL] Make sure your destination fields are wrapped in an element with data-cd-auto-dest="${t}"`);return}console.log("\u2705 [AUTO-FILL] Found destination container:",{element:o,tagName:o.tagName,classList:o.className});let s=n.querySelectorAll("[data-cd-field-key]");if(console.log(`\u{1F4CB} [AUTO-FILL] Found ${s.length} source fields to copy`),s.length===0){console.warn("\u26A0\uFE0F [AUTO-FILL] No source fields found with [data-cd-field-key] attribute");return}let r=0;s.forEach((i,a)=>{let c=i.getAttribute("data-cd-field-key");if(!c){console.warn(`\u26A0\uFE0F [AUTO-FILL] Source field ${a+1} missing data-cd-field-key value`);return}console.log(`
\u{1F4CB} [AUTO-FILL] --- Processing field ${a+1}/${s.length} ---`),console.log(`\u{1F4CB} [AUTO-FILL] Field key: "${c}"`);let l=o.querySelector(`[data-cd-field-key="${c}"]`);if(!l){console.warn(`\u26A0\uFE0F [AUTO-FILL] No destination field found for key="${c}"`),console.warn(`\u26A0\uFE0F [AUTO-FILL] Make sure destination has an element with data-cd-field-key="${c}"`);return}console.log(`\u2705 [AUTO-FILL] Found destination field for key="${c}"`),lr(i,l),r++,l.dispatchEvent(new Event("input",{bubbles:!0})),l.dispatchEvent(new Event("change",{bubbles:!0})),console.log(`\u{1F4E4} [AUTO-FILL] Dispatched input/change events for key="${c}"`)}),console.log(`
\u2705 [AUTO-FILL] ========== COPY COMPLETE ==========`),console.log(`\u2705 [AUTO-FILL] Successfully copied ${r}/${s.length} fields for group "${t}"`)}function pr(t){console.log("\u{1F504} [AUTO-FILL] Initializing Auto-Fill for form...");let e=t.querySelectorAll("[data-cd-auto-trigger]");if(console.log(`\u{1F504} [AUTO-FILL] Found ${e.length} auto-fill triggers`),e.length===0){console.log("\u2139\uFE0F [AUTO-FILL] No triggers found, skipping auto-fill initialization");return}e.forEach((n,o)=>{let s=n.getAttribute("data-cd-auto-trigger");if(!s){console.warn("\u26A0\uFE0F [AUTO-FILL] Trigger missing group name:",n);return}console.log(`\u{1F504} [AUTO-FILL] Setting up trigger ${o+1}/${e.length}:`,{element:n,tagName:n.tagName,type:n.type,groupName:s}),n.addEventListener("change",r=>{let i=r.target;console.log(`
\u{1F514} [AUTO-FILL] ========== TRIGGER CHANGED ==========`),console.log(`\u{1F514} [AUTO-FILL] Group: "${s}"`),console.log(`\u{1F514} [AUTO-FILL] Checked: ${i.checked}`),console.log(`\u{1F514} [AUTO-FILL] Value: "${i.value}"`),i.checked?ur(s,t):dr(s,t)}),console.log(`\u2705 [AUTO-FILL] Trigger ${o+1} ready: group="${s}"`)}),console.log(`\u2705 [AUTO-FILL] Auto-fill initialization complete (${e.length} triggers)`)}function Tn(){console.log("\u23ED\uFE0F [CD SKIP] Initializing Skip Navigation...");let t=document.querySelectorAll("[data-cd-skip]");console.log(`\u23ED\uFE0F [CD SKIP] Found ${t.length} skip buttons`),t.length>0?t.forEach((e,n)=>{let o=e.getAttribute("data-cd-skip");console.log(`\u23ED\uFE0F [CD SKIP] Button ${n+1}:`,{element:e,tagName:e.tagName,classList:e.className,targetStep:o}),e.addEventListener("click",fr)}):console.warn("\u26A0\uFE0F [CD SKIP] No buttons found with [data-cd-skip] attribute"),console.log(`\u2705 [CD SKIP] Skip navigation initialized (${t.length} buttons)`)}function fr(t){console.log("\u{1F5B1}\uFE0F [CD SKIP] ========== SKIP BUTTON CLICKED =========="),console.log("\u{1F5B1}\uFE0F [CD SKIP] Event:",t),t.preventDefault();let e=t.currentTarget,n=e.getAttribute("data-cd-skip");if(console.log("\u{1F50D} [CD SKIP] Button details:",{element:e,tagName:e.tagName,classList:e.className,"data-cd-skip":n}),!n){console.error("\u274C [CD SKIP] No target specified in data-cd-skip attribute");return}console.log("\u{1F3AF} [CD SKIP] LOOKING FOR MATCH:"),console.log(`   Button has: data-cd-skip="${n}"`),console.log(`   Searching for step with: data-answer="${n}"`);let o=document.querySelector(`[data-answer="${n}"]`);if(!o){console.error("\u274C [CD SKIP] ========== NO MATCH FOUND =========="),console.error(`   Button's data-cd-skip value: "${n}"`),console.error(`   Could not find any step with: data-answer="${n}"`);let l=document.querySelectorAll("[data-answer]");console.log(`
\u{1F4CB} [CD SKIP] Available steps (${l.length} total):`),l.forEach((d,u)=>{let p=d.getAttribute("data-answer"),h=p===n;console.log(`   ${h?"\u2705":"  "} ${u+1}. data-answer="${p}"${h?" \u2190 MATCH!":""}`)}),console.log(`
\u{1F4A1} [CD SKIP] TIP: Make sure data-cd-skip="${n}" matches one of the data-answer values above`);return}let s=o.getAttribute("data-answer");console.log("\u2705 [CD SKIP] ========== MATCH FOUND =========="),console.log(`   Button's data-cd-skip: "${n}"`),console.log(`   Step's data-answer: "${s}"`),console.log(`   Match: ${n===s?"\u2705 YES":"\u274C NO"}`),console.log("   Target step:",{element:o,tagName:o.tagName,classList:o.className});let r=document.querySelectorAll('[data-form="step"]');console.log(`\u{1F441}\uFE0F [CD SKIP] Hiding ${r.length} total steps`),r.forEach((l,d)=>{let u=l;u.style.display="none",u.classList.remove("active-answer-card"),console.log(`  ${d+1}. Hidden step:`,l.getAttribute("data-answer")||"no data-answer")});let i=o;console.log("\u{1F50D} [CD SKIP] Target step BEFORE changes:",{display:getComputedStyle(i).display,inlineDisplay:i.style.display,visibility:getComputedStyle(i).visibility,opacity:getComputedStyle(i).opacity,classList:i.className,offsetHeight:i.offsetHeight,offsetWidth:i.offsetWidth}),i.style.display="block",i.style.visibility="visible",i.style.opacity="1",i.classList.add("active-answer-card"),console.log("\u{1F50D} [CD SKIP] Target step AFTER changes:",{display:getComputedStyle(i).display,inlineDisplay:i.style.display,visibility:getComputedStyle(i).visibility,opacity:getComputedStyle(i).opacity,classList:i.className,offsetHeight:i.offsetHeight,offsetWidth:i.offsetWidth,isVisible:i.offsetHeight>0&&i.offsetWidth>0}),console.log(`\u{1F441}\uFE0F [CD SKIP] Target step now visible (display="${i.style.display}")`);let a=document.querySelector('[data-text="current-step"]');if(a){let d=Array.from(r).indexOf(o);d!==-1&&(a.textContent=String(d+1),console.log(`\u{1F522} [CD SKIP] Updated step counter to: ${d+1}`))}else console.log('\u2139\uFE0F [CD SKIP] No step counter found ([data-text="current-step"])');typeof window.TryFormly?.refresh=="function"?(console.log("\u{1F504} [CD SKIP] Triggering TryFormly.refresh()"),window.TryFormly.refresh()):console.log("\u2139\uFE0F [CD SKIP] TryFormly.refresh() not available");let c=o.closest("form");c?(console.log("\u{1F4DC} [CD SKIP] Scrolling to form"),c.scrollIntoView({behavior:"smooth",block:"start"})):console.log("\u2139\uFE0F [CD SKIP] No parent form found for scrolling"),o.dispatchEvent(new CustomEvent("cd:skip:navigated",{bubbles:!0,detail:{targetAnswer:n,button:e}})),console.log(`\u2705 [CD SKIP] ========== SKIP COMPLETE: "${n}" ==========`)}function ot(){let t=document.querySelectorAll('form[data-cd-form="true"]');if(t.length===0){console.warn('\u26A0\uFE0F [CD FORM] No forms found with data-cd-form="true"'),Tn();return}t.forEach((e,n)=>{let o=e;try{qs(o),Ks(o),zs(),Ws(),pr(o),ir(),sr(o),o.dispatchEvent(new CustomEvent("cdForm:validated",{bubbles:!0}))}catch(s){console.error("\u274C Error enhancing form:",s),s instanceof Error&&console.error("\u274C Stack trace:",s.stack)}}),Tn()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ot):ot();window.CDFormLibrary={version:Ys,initialize:ot,dynamicRows:De};})();
