"use strict";var CDFormLibrary=(()=>{var _={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"},Q=class{constructor(){this.now=null,this.past=[],this.future=[]}undo(){let e=this.past.pop();e&&this.now&&(this.future.push(this.now),this.updateElement(e,"historyUndo"))}redo(){let e=this.future.pop();e&&this.now&&(this.past.push(this.now),this.updateElement(e,"historyRedo"))}updateHistory(e){if(!this.now){this.now=e;return}let n=this.now.value!==e.value,o=this.now.selection.some((s,a)=>s!==e.selection[a]);!n&&!o||(n&&(this.past.push(this.now),this.future=[]),this.now=e)}updateElement(e,n){this.now=e,this.updateElementState(e,{inputType:n,data:null})}};function nt(t,...e){return e.every(({value:n})=>n===t.value)}function ee(t,...e){return e.every(({value:n,selection:o})=>n===t.value&&o[0]===t.selection[0]&&o[1]===t.selection[1])}function Ae({value:t,selection:e},n,o){let[s,a]=e,i=typeof o=="function"?o({value:t,selection:e}):o;return{value:t,selection:i==="replace"?[s,Math.max(s+n.length,a)]:[s,a]}}function B(t){return typeof t=="string"}function be(t,e,n,o){let s="";for(let a=e.length;a<t.length;a++){let i=t[a]||"",r=o?.value[a]===i;if(!B(i)||i===n&&!r)return s;s+=i}return s}function we(t,e){return Array.isArray(e)?t.length===e.length&&Array.from(t).every((n,o)=>{let s=e[o]||"";return B(s)?n===s:n.match(s)}):e.test(t)}function ot(t,e,n){let o=null,s=null,a=Array.from(t.value).reduce((r,c,l)=>{let u=be(e,r,c,n),m=r+u,f=e[m.length]||"";return o===null&&l>=t.selection[0]&&(o=m.length),s===null&&l>=t.selection[1]&&(s=m.length),B(f)?m+f:c.match(f)?m+c:u.startsWith(c)?m:r},""),i=be(e,a,"",n);return{value:we(a+i,e)?a+i:a,selection:[o??a.length,s??a.length]}}function st({value:t,selection:e},n){let[o,s]=e,a=o,i=s,r=Array.from(t).reduce((c,l,u)=>{let m=c+l;return o===u&&(a=c.length),s===u&&(i=c.length),m.match(n)?m:c},"");return{value:r,selection:[Math.min(a,r.length),Math.min(i,r.length)]}}function H(t,e,n=null){if(we(t.value,e))return t;let{value:o,selection:s}=Array.isArray(e)?ot(t,e,n):st(t,e);return{selection:s,value:Array.isArray(e)?o.slice(0,e.length):o}}function Se(t,e){if(!Array.isArray(e))return t;let[n,o]=t.selection,s=[],a=Array.from(t.value).reduce((i,r,c)=>{let l=e[c]||"";return c===n&&s.push(i.length),c===o&&s.push(i.length),B(l)&&l===r?i:i+r},"");return s.length<2&&s.push(...new Array(2-s.length).fill(a.length)),{value:a,selection:[s[0],s[1]]}}var D=class{constructor(e,n){this.maskOptions=n,this.unmaskInitialState={value:"",selection:[0,0]},this.value="",this.selection=[0,0];let o=this.getMaskExpression(e),{value:s,selection:a}=H(e,o);this.unmaskInitialState=Se({value:s,selection:a},o),this.value=s,this.selection=a}addCharacters(e){let{value:n,selection:o,maskOptions:s}=this,a={value:n,selection:o},{selection:[i,r]}=Ae(a,e,s.overwriteMode),c=this.getMaskExpression({value:n.slice(0,i)+e+n.slice(r),selection:[i+e.length,i+e.length]}),[l,u]=Ae(this.unmaskInitialState,e,s.overwriteMode).selection,m=this.unmaskInitialState.value.slice(0,l)+e,f=m.length,p=H({value:m+this.unmaskInitialState.value.slice(u),selection:[f,f]},c,a),g=n.slice(0,i),h=H({value:m,selection:[f,f]},c,a);if(h.value===g||h.value.length<g.length&&Se(h,c).value===this.unmaskInitialState.value.slice(0,l)||ee(this,p))throw new Error("Invalid mask value");this.value=p.value,this.selection=p.selection}deleteCharacters(){let[e,n]=this.selection;if(e===n||!n)return;let{value:o}=this,s=this.getMaskExpression({value:o.slice(0,e)+o.slice(n),selection:[e,e]}),a={value:o},[i,r]=this.unmaskInitialState.selection,c=this.unmaskInitialState.value.slice(0,i)+this.unmaskInitialState.value.slice(r),l=H({value:c,selection:[i,i]},s,a);this.value=l.value,this.selection=l.selection}getMaskExpression(e){let{mask:n}=this.maskOptions;return typeof n=="function"?n(e):n}},N=class{constructor(e){this.element=e,this.listeners=[]}listen(e,n,o){let s=n;this.element.addEventListener(e,s,o),this.listeners.push(()=>this.element.removeEventListener(e,s,o))}destroy(){this.listeners.forEach(e=>e())}},w={CTRL:1,ALT:2,SHIFT:4,META:8},I={Y:89,Z:90};function R(t,e,n){return t.ctrlKey===!!(e&w.CTRL)&&t.altKey===!!(e&w.ALT)&&t.shiftKey===!!(e&w.SHIFT)&&t.metaKey===!!(e&w.META)&&t.keyCode===n}function at(t){return R(t,w.CTRL,I.Y)||R(t,w.CTRL|w.SHIFT,I.Z)||R(t,w.META|w.SHIFT,I.Z)}function it(t){return R(t,w.CTRL,I.Z)||R(t,w.META,I.Z)}function te(t,e){var n;let o=t.value;if(typeof e=="string")t.value=e;else{let[s,a]=e.selection;t.value=e.value,t.matches(":focus")&&((n=t.setSelectionRange)===null||n===void 0||n.call(t,s,a))}t.value!==o&&t.dispatchEvent(new Event("input",{bubbles:!0}))}function rt({value:t,selection:e},n){let[o,s]=e;if(o!==s)return[o,s];let a=n?t.slice(o).indexOf(`
`)+1||t.length:t.slice(0,s).lastIndexOf(`
`)+1;return[n?o:a,n?a:s]}function lt({value:t,selection:e},n){let[o,s]=e;return o!==s?[o,s]:(n?[o,s+1]:[o-1,s]).map(i=>Math.min(Math.max(i,0),t.length))}var ct=/\s+$/g,ut=/^\s+/g,Me=/\s/;function dt({value:t,selection:e},n){let[o,s]=e;if(o!==s)return[o,s];if(n){let c=t.slice(o),[l]=c.match(ut)||[""],u=c.trimStart().search(Me);return[o,u!==-1?o+l.length+u:t.length]}let a=t.slice(0,s),[i]=a.match(ct)||[""],r=a.trimEnd().split("").reverse().findIndex(c=>Me.exec(c));return[r!==-1?s-i.length-r:0,s]}function U(t=[]){return(e,...n)=>t.reduce((o,s)=>Object.assign(Object.assign({},o),s(o,...n)),e)}function Le(t,e){let n=Object.assign(Object.assign({},_),e),o=U(n.preprocessors),s=U(n.postprocessors),a=typeof t=="string"?{value:t,selection:[0,0]}:t,{elementState:i}=o({elementState:a,data:""},"validation"),r=new D(i,n),{value:c,selection:l}=s(r,a);return typeof t=="string"?c:{value:c,selection:l}}function mt(){return t=>{let e=new N(t),n=!1,o,s=t.value;return e.listen("keydown",({key:a})=>{n=a==="Unidentified"}),e.listen("beforeinput",a=>{o=a,s=t.value}),e.listen("input",a=>{n&&o.defaultPrevented&&o.inputType==="deleteContentBackward"&&a.inputType==="deleteContentBackward"&&(t.value=s)},{capture:!0}),()=>e.destroy()}}var X=" ";function ft(){let t="",e=0,n=null,o=!1;return s=>{let a=new N(s);return a.listen("beforeinput",i=>{var r,c;let{value:l,selectionStart:u,selectionEnd:m}=s,f=n?.inputType==="insertText"&&n?.data===X&&!l.slice(0,Number(m)).endsWith(X);i.inputType==="insertText"&&i.data===`.${X}`&&(n?.inputType==="deleteContentBackward"&&o?(s.value=t,(r=s.setSelectionRange)===null||r===void 0||r.call(s,e,e)):f&&((c=s.setSelectionRange)===null||c===void 0||c.call(s,u,u))),o=f,n=i,t=l,e=Number((f?e:m)===l.length?m:u)}),()=>a.destroy()}}var gt=[ft(),mt()],C=class extends Q{constructor(e,n){super(),this.element=e,this.maskitoOptions=n,this.isTextArea=this.element.nodeName==="TEXTAREA",this.eventListener=new N(this.element),this.options=Object.assign(Object.assign({},_),this.maskitoOptions),this.upcomingElementState=null,this.preprocessor=U(this.options.preprocessors),this.postprocessor=U(this.options.postprocessors),this.teardowns=this.options.plugins.concat(gt).map(o=>o(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",o=>{if(at(o))return o.preventDefault(),this.redo();if(it(o))return o.preventDefault(),this.undo()}),this.eventListener.listen("beforeinput",o=>{var s,a,i;let r=o.inputType.includes("Forward");switch(this.updateHistory(this.elementState),o.inputType){case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:o,isForward:r,selection:lt(this.elementState,r)});case"deleteHardLineBackward":case"deleteHardLineForward":case"deleteSoftLineBackward":case"deleteSoftLineForward":return this.handleDelete({event:o,isForward:r,selection:rt(this.elementState,r),force:!0});case"deleteWordBackward":case"deleteWordForward":return this.handleDelete({event:o,isForward:r,selection:dt(this.elementState,r)});case"historyRedo":return o.preventDefault(),this.redo();case"historyUndo":return o.preventDefault(),this.undo();case"insertCompositionText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(o);case"insertReplacementText":return;case"insertFromDrop":case"insertFromPaste":case"insertText":default:return this.handleInsert(o,(i=(s=o.data)!==null&&s!==void 0?s:(a=o.dataTransfer)===null||a===void 0?void 0:a.getData("text/plain"))!==null&&i!==void 0?i:"")}}),this.eventListener.listen("input",()=>{this.upcomingElementState&&!ee(this.upcomingElementState,this.elementState)&&this.updateElementState(this.upcomingElementState),this.upcomingElementState=null},{capture:!0}),this.eventListener.listen("input",({inputType:o})=>{o!=="insertCompositionText"&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}destroy(){this.eventListener.destroy(),this.teardowns.forEach(e=>e?.())}updateElementState({value:e,selection:n},o){let s=this.elementState.value;this.updateValue(e),this.updateSelectionRange(n),o&&s!==e&&this.dispatchInputEvent(o)}get elementState(){let{value:e,selectionStart:n,selectionEnd:o}=this.element;return{value:e,selection:[n??0,o??0]}}get maxLength(){let{maxLength:e}=this.element;return e===-1?1/0:e}updateSelectionRange([e,n]){var o;let{element:s}=this;s.matches(":focus")&&(s.selectionStart!==e||s.selectionEnd!==n)&&((o=s.setSelectionRange)===null||o===void 0||o.call(s,e,n))}updateValue(e){(this.element.value!==e||this.element.isContentEditable)&&(this.element.value=e)}ensureValueFitsMask(){this.updateElementState(Le(this.elementState,this.options),{inputType:"insertText",data:null})}dispatchInputEvent(e={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},e),{bubbles:!0,cancelable:!1})))}handleDelete({event:e,selection:n,isForward:o}){let s={value:this.elementState.value,selection:n},{elementState:a}=this.preprocessor({elementState:s,data:""},o?"deleteForward":"deleteBackward"),i=new D(a,this.options);i.deleteCharacters();let r=this.postprocessor(i,s);if(nt(s,a,i,r)){let[c,l]=a.selection;return e.preventDefault(),this.updateSelectionRange(o?[l,l]:[c,c])}this.upcomingElementState=r}handleInsert(e,n){let{options:o,maxLength:s,elementState:a}=this,[i,r]=a.selection,{elementState:c,data:l=n}=this.preprocessor({data:n,elementState:a},"insert"),u=new D(c,o);try{u.addCharacters(l)}catch{return e.preventDefault()}this.upcomingElementState=this.clampState(this.postprocessor(u,a)),a.value.length>=s&&i===r&&(o.overwriteMode==="replace"&&!ee(this.upcomingElementState,a)?this.dispatchInputEvent({inputType:"insertText",data:n}):this.upcomingElementState=null)}handleEnter(e){(this.isTextArea||this.element.isContentEditable)&&this.handleInsert(e,`
`)}clampState({value:e,selection:n}){let[o,s]=n,a=this.maxLength;return{value:e.slice(0,a),selection:[Math.min(o,a),Math.min(s,a)]}}};function Ie(t,e,n){let o=Math.min(Number(n),Math.max(Number(e),Number(t)));return t instanceof Date?new Date(o):o}function pt(t){return t.replaceAll(/\W/g,"").length}var Re={day:31,month:12,year:9999};var ht=new Date("0001-01-01T00:00"),yt=new Date("9999-12-31T23:59:59.999"),ne={hours:23,minutes:59,seconds:59,milliseconds:999},De={hours:0,minutes:0,seconds:0,milliseconds:0},$="\xA0";var Et=":",vt="\uFF1A",G=new RegExp(`[${$}APM]+$`,"g"),Y=new RegExp(`${$}[AP]M$`,"g"),oe=[":","."],Ne={hours:2,minutes:2,seconds:2,milliseconds:3};var xe=t=>{var e,n,o,s,a,i;return{day:(n=(e=t.match(/d/g))===null||e===void 0?void 0:e.length)!==null&&n!==void 0?n:0,month:(s=(o=t.match(/m/g))===null||o===void 0?void 0:o.length)!==null&&s!==void 0?s:0,year:(i=(a=t.match(/y/g))===null||a===void 0?void 0:a.length)!==null&&i!==void 0?i:0}};function At(t){return{day:String(t.getDate()).padStart(2,"0"),month:String(t.getMonth()+1).padStart(2,"0"),year:String(t.getFullYear()).padStart(4,"0"),hours:String(t.getHours()).padStart(2,"0"),minutes:String(t.getMinutes()).padStart(2,"0"),seconds:String(t.getSeconds()).padStart(2,"0"),milliseconds:String(t.getMilliseconds()).padStart(3,"0")}}var bt=["day","month","year"];function St(t){return[...bt].sort((e,n)=>t.indexOf(e[0])>t.indexOf(n[0])?1:-1)}function Mt(t,e){return t.length<e.length?!1:t.split(/\D/).every(n=>!/^0+$/.exec(n))}function Oe(t,e,n){let o=pt(e);return t.replace(n,"").match(new RegExp(`(\\D*\\d[^\\d\\s]*){1,${o}}`,"g"))||[]}function se(t,e){let n=e.replaceAll(/[^dmy]/g,""),o=t.replaceAll(/\D+/g,""),s={day:o.slice(n.indexOf("d"),n.lastIndexOf("d")+1),month:o.slice(n.indexOf("m"),n.lastIndexOf("m")+1),year:o.slice(n.indexOf("y"),n.lastIndexOf("y")+1)};return Object.fromEntries(Object.entries(s).filter(([a,i])=>!!i).sort(([a],[i])=>e.toLowerCase().indexOf(a.slice(0,1))>e.toLowerCase().indexOf(i.slice(0,1))?1:-1))}function wt(t,e){var n,o,s,a,i,r,c;let l=((n=t.year)===null||n===void 0?void 0:n.length)===2?`20${t.year}`:t.year,u=new Date(Number(l??"0"),Number((o=t.month)!==null&&o!==void 0?o:"1")-1,Number((s=t.day)!==null&&s!==void 0?s:"1"),Number((a=e?.hours)!==null&&a!==void 0?a:"0"),Number((i=e?.minutes)!==null&&i!==void 0?i:"0"),Number((r=e?.seconds)!==null&&r!==void 0?r:"0"),Number((c=e?.milliseconds)!==null&&c!==void 0?c:"0"));return u.setFullYear(Number(l??"0")),u}var Pe=", ";function x({day:t,month:e,year:n,hours:o,minutes:s,seconds:a,milliseconds:i},{dateMode:r,dateTimeSeparator:c=Pe,timeMode:l}){var u;let m=((u=r.match(/y/g))===null||u===void 0?void 0:u.length)===2?n?.slice(-2):n;return(r+(l?c+l:"")).replaceAll(/d+/g,t??"").replaceAll(/m+/g,e??"").replaceAll(/y+/g,m??"").replaceAll(/H+/g,o??"").replaceAll("MSS",i??"").replaceAll(/M+/g,s??"").replaceAll(/S+/g,a??"").replaceAll(/^\D+/g,"").replaceAll(/\D+$/g,"")}function Lt({dateString:t,dateModeTemplate:e,dateSegmentsSeparator:n,offset:o,selection:[s,a]}){var i,r;let c=se(t,e),l=Object.entries(c),u=St(e),m={};for(let g=0;g<l.length;g++){let[h,y]=l[g],v=x(m,{dateMode:e}),M=Re[h],E=v.length&&n.length,S=o+v.length+E+xe(e)[h],b=S>=s&&S===a;if(b&&Number(y)>Number(M)){let A=u[u.indexOf(h)+1];if(!A||A==="year")return{validatedDateString:"",updatedSelection:[s,a]};m[h]=`0${y.slice(0,-1)}`,l[g+1]=[A,y.slice(-1)+((r=(i=l[g+1])===null||i===void 0?void 0:i[1])!==null&&r!==void 0?r:"").slice(1)];continue}if(b&&Number(y)<1)return{validatedDateString:"",updatedSelection:[s,a]};m[h]=y}let f=x(m,{dateMode:e}),p=f.length-t.length;return{validatedDateString:f,updatedSelection:[s+p,a+p]}}function j(t){return t}function ke(){}var Fe=/[\\^$.*+?()[\]{}|]/g,Tt=new RegExp(Fe.source);function K(t){return t&&Tt.test(t)?t.replaceAll(Fe,String.raw`\$&`):t}function Ct(t,e){let n="";for(let o=0;o<t.length;o++){if(t[o]!==e[o])return n;n+=t[o]}return n}var $t=/^0+$/;function q(t,e,n=0){let o=t.padEnd(e.length,"0");if(Number(o)<=Number(e))return{validatedSegmentValue:t,prefixedZeroesCount:n};if(o.endsWith("0"))return q(`0${t.slice(0,e.length-1)}`,e,n+1);let s=t.slice(0,e.length-1);return $t.exec(s)?{validatedSegmentValue:"",prefixedZeroesCount:n}:q(`${s}0`,e,n)}function Te(t){return t.replaceAll(new RegExp(vt,"g"),Et)}function Ce(t){return t.replaceAll(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248))}function It(){return({elementState:t,data:e})=>{let{value:n,selection:o}=t;return{elementState:{selection:o,value:Te(n)},data:Te(e)}}}function Rt({dateModeTemplate:t,dateSegmentSeparator:e,splitFn:n,uniteFn:o}){return({value:s,selection:a})=>{var i;let[r,c]=a,{dateStrings:l,restPart:u=""}=n(s),m=[],f=0;l.forEach(g=>{let h=se(g,t),v=Object.entries(h).reduce((M,[E,S])=>{let{validatedSegmentValue:b,prefixedZeroesCount:A}=q(S,`${Re[E]}`);return f+=A,Object.assign(Object.assign({},M),{[E]:b})},{});m.push(x(v,{dateMode:t}))});let p=o(m,s)+(!((i=l[l.length-1])===null||i===void 0)&&i.endsWith(e)?e:"")+u;return f&&p.slice(c+f,c+f+e.length)===e&&(f+=e.length),{selection:[r+f,c+f],value:p}}}function He(){return({elementState:t,data:e})=>{let{value:n,selection:o}=t;return{elementState:{selection:o,value:Ce(n)},data:Ce(e)}}}function Dt(t){return Array.from(t.replace(" AA","")).map(e=>oe.includes(e)?e:/\d/).concat(t.includes("AA")?[$,/[AP]/i,/M/i]:[])}function Nt(t,e){return Object.fromEntries(Object.entries(t).map(([n,o])=>[n,e(String(o),Ne[n])]))}function xt(t){return Nt(t,(e,n)=>e.padStart(n,"0"))}var $e={HH:"hours",MM:"minutes",SS:"seconds",MSS:"milliseconds"};function Ue(t,e){let n=t.replaceAll(/\D+/g,""),o=0;return Object.fromEntries(e.split(/\W/).filter(s=>$e[s]).map(s=>{let a=n.slice(o,o+s.length);return o+=s.length,[$e[s],a]}))}var Ot=/^\D*/,Pt=/\D*$/;function kt({hours:t="",minutes:e="",seconds:n="",milliseconds:o=""}){return`${t}:${e}:${n}.${o}`.replace(Ot,"").replace(Pt,"")}var Ft=new RegExp(`[${oe.map(K).join("")}]$`);function Ht({value:t,selection:e},{mode:n,timeSegmentMaxValues:o=ne}){let[s,a]=e,i=Ue(t,n),r=Object.entries(i),c=xt(o),l={},u=0;for(let[v,M]of r){let E=c[v],{validatedSegmentValue:S,prefixedZeroesCount:b}=q(M,String(E));u+=b,l[v]=S}let[m=""]=t.match(/^\D+(?=\d)/g)||[],[f=""]=t.match(/\D+$/g)||[],p=m+kt(l)+f,g=Math.max(p.length-t.length-u,0),h=s+u+g,y=a+u+g;return h===y&&u&&p.slice(0,y+1).match(Ft)&&(h++,y++),{value:p,selection:[h,y]}}function Ut({timeMode:t,timeSegmentMinValues:e=De,timeSegmentMaxValues:n=ne,parseValue:o=s=>({timeString:s})}){let s=new RegExp(`[^\\d${oe.map(K).join("")}]+`);return({elementState:a,data:i},r)=>{if(r!=="insert")return{elementState:a,data:i};let{value:c,selection:l}=a,[u,m]=l,f=i.replace(s,""),p=m+f.length,g=c.slice(0,u)+f+c.slice(p),{timeString:h,restValue:y=""}=o(g),v=Object.entries(Ue(h,t)),M=y.length;for(let[E,S]of v){let b=e[E],A=n[E],L=Number(S),P=M+Ne[E];if(P>=u&&P<=p&&L!==Ie(L,b,A))return{elementState:a,data:""};M+=S.length+1}return{elementState:a,data:i}}}function _t(t){if(!t.includes("AA"))return j;let e=/^[AP]$/gi;return({elementState:n,data:o})=>{let{value:s,selection:a}=n,i=s.toUpperCase(),r=o.toUpperCase();return i.match(Y)&&r.match(e)?{elementState:{value:i.replaceAll(Y,""),selection:a},data:`${r}M`}:{elementState:{selection:a,value:i},data:r}}}function Bt(t){return t.includes("AA")?({value:e,selection:n},o)=>{if(!e.match(G)||e.match(Y))return{value:e,selection:n};let[s,a]=n;if(o.value.match(Y)){let c=e.replace(G,"");return{value:c,selection:[Math.min(s,c.length),Math.min(a,c.length)]}}let i=`${$}${e.includes("P")?"P":"A"}M`,r=e.replace(G,c=>c!==$?i:c);return{value:r,selection:a>=r.indexOf(i)?[r.length,r.length]:n}}:j}function Vt(t,e){let n=xe(e);return Object.fromEntries(Object.entries(t).map(([o,s])=>{let a=n[o];return[o,s.length===a&&/^0+$/.exec(s)?"1".padStart(a,"0"):s]}))}var Gt="1972";function Yt({dateModeTemplate:t,min:e=ht,max:n=yt,rangeSeparator:o="",dateSegmentSeparator:s="."}){return({value:a,selection:i})=>{let r=o&&a.endsWith(o),c=Oe(a,t,o),l="";for(let u of c){l+=l?o:"";let m=se(u,t);if(!Mt(u,t)){let g=Vt(m,t),h=x(g,{dateMode:t}),y=u.endsWith(s)?s:"";l+=h+y;continue}let f=wt(Object.assign({year:Gt},m)),p=Ie(f,e,n);l+=x(At(p),{dateMode:t})}return{selection:i,value:l+(r?o:"")}}}function qt({dateModeTemplate:t,dateSegmentsSeparator:e,rangeSeparator:n="",dateTimeSeparator:o=Pe}){return({elementState:s,data:a})=>{let i=t.split(e),r=a.includes(o),c=a.slice(0,r?a.indexOf(o):1/0).split(/\D/).filter(Boolean);if(!c.length||c.length%i.length!==0)return{elementState:s,data:a};let l=c.reduce((u,m,f)=>{var p;let g=(p=i[f%i.length])!==null&&p!==void 0?p:"",h=Math.trunc(f/i.length),y=f%i.length===i.length-1;return u[h]||(u[h]=""),u[h]+=y?m:`${m.padStart(g.length,"0")}${e}`,u},[]);return{elementState:s,data:r?`${l[0]}${a.slice(a.indexOf(o))}`:l.join(n)}}}function jt(t){let e=new RegExp(`${K(t)}$`);return t?({value:n,selection:o},s)=>{if(!n&&!s.value.endsWith(t))return{value:n,selection:o};if(!n.endsWith(t)&&!s.value.endsWith(t))return{selection:o,value:n+t};let a=s.value.replace(e,""),i=s.selection[1]>a.length,r=Ct(a,n);return{selection:o,value:Array.from(t).reverse().reduce((c,l,u)=>{let m=c.length-1-u,f=r[m]===l&&i;return c[m]!==l||f?c.slice(0,m+1)+l+c.slice(m+1):c},n)}}:j}function Kt(t){return t?({value:e,selection:n},o)=>{if(e.startsWith(t)||!e&&!o.value.startsWith(t))return{value:e,selection:n};let[s,a]=n,i=Array.from(t).reduce((c,l,u)=>c[u]===l?c:c.slice(0,u)+l+c.slice(u),e),r=i.length-e.length;return{selection:[s+r,a+r],value:i}}:j}function Wt({dateModeTemplate:t,dateSegmentsSeparator:e,rangeSeparator:n=""}){return({elementState:o,data:s})=>{let{value:a,selection:i}=o;if(s===e)return{elementState:o,data:i[0]===a.length?s:""};if(!s.replaceAll(/\D/g,""))return{elementState:o,data:s};let r=s.replaceAll(new RegExp(`[^\\d${K(e)}${n}]`,"g"),""),[c,l]=i,u=l+s.length,m=a.slice(0,c)+r+a.slice(u),f=Oe(m,t,n),p="",g=!!n&&m.includes(n);for(let y of f){let{validatedDateString:v,updatedSelection:M}=Lt({dateString:y,dateModeTemplate:t,dateSegmentsSeparator:e,offset:p.length,selection:[c,u]});if(y&&!v)return{elementState:o,data:""};u=M[1],p+=g&&!p?v+n:v}let h=p.slice(c,u);return{elementState:{selection:i,value:p.slice(0,c)+h.split(e).map(y=>"0".repeat(y.length)).join(e)+p.slice(u)},data:h}}}function zt(t){return t<0?ke:e=>{let n=o=>{let s=Number(e.selectionStart),a=e.value.toUpperCase();if(o.key!=="ArrowUp"&&o.key!=="ArrowDown"||s<t)return;o.preventDefault();let i=a.includes("A")?"P":a.includes("P")||o.key==="ArrowUp"?"A":"P",r=`${$}${i}M`;te(e,{value:a.length===t?a+r:a.replace(G,r),selection:[s,s]})};return e.addEventListener("keydown",n),()=>e.removeEventListener("keydown",n)}}function Zt({step:t,fullMode:e,timeSegmentMaxValues:n}){let o=Jt(e);return t<=0?ke:s=>{let a=i=>{var r;if(i.key!=="ArrowUp"&&i.key!=="ArrowDown")return;i.preventDefault();let c=(r=s.selectionStart)!==null&&r!==void 0?r:0,l=Xt({segmentsIndexes:o,selectionStart:c});if(!l)return;let u=Qt({selection:o.get(l),value:s.value,toAdd:i.key==="ArrowUp"?t:-t,max:n[l]});te(s,{value:u,selection:[c,c]})};return s.addEventListener("keydown",a),()=>s.removeEventListener("keydown",a)}}function Jt(t){return new Map([["hours",V(t,"HH")],["milliseconds",V(t,"MSS")],["minutes",V(t,"MM")],["seconds",V(t,"SS")]])}function V(t,e){let n=t.indexOf(e);return n===-1?[-1,-1]:[n,n+e.length]}function Xt({segmentsIndexes:t,selectionStart:e}){for(let[n,o]of t.entries()){let[s,a]=o;if(s<=e&&e<=a)return n}return null}function Qt({selection:t,value:e,toAdd:n,max:o}){let[s,a]=t,i=Number(e.slice(s,a).padEnd(a-s,"0")),r=en(i+n,o+1);return e.slice(0,s)+String(r).padStart(a-s,"0")+e.slice(a,e.length)}function en(t,e){return t<0&&(t+=Math.floor(Math.abs(t)/e+1)*e),t%e}function _e(t=""){let e=(n,[o,s])=>s>=n.length-t.length;return({elementState:n},o)=>{let{value:s,selection:a}=n;if(!s||e(s,a))return{elementState:n};let[i,r]=a,c=s.slice(i,r).replaceAll(/\d/g,"0"),l=s.slice(0,i)+c+s.slice(r);return c.replaceAll(/\D/g,"")?o==="validation"||o==="insert"&&i===r?{elementState:{selection:a,value:l}}:{elementState:{selection:o==="deleteBackward"||o==="insert"?[i,i]:[r,r],value:l}}:{elementState:n}}}function Be({mode:t,separator:e=".",max:n,min:o}){let s=t.split("/").join(e);return Object.assign(Object.assign({},_),{mask:Array.from(s).map(a=>e.includes(a)?a:/\d/),overwriteMode:"replace",preprocessors:[He(),_e(),qt({dateModeTemplate:s,dateSegmentsSeparator:e}),Wt({dateModeTemplate:s,dateSegmentsSeparator:e})],postprocessors:[Rt({dateModeTemplate:s,dateSegmentSeparator:e,splitFn:a=>({dateStrings:[a]}),uniteFn:([a=""])=>a}),Yt({min:o,max:n,dateModeTemplate:s,dateSegmentSeparator:e})]})}var Rn=Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});function W({mode:t,timeSegmentMaxValues:e={},timeSegmentMinValues:n={},step:o=0,prefix:s="",postfix:a=""}){let i=t.includes("AA"),r=Object.assign(Object.assign(Object.assign({},ne),i?{hours:12}:{}),e),c=Object.assign(Object.assign(Object.assign({},De),i?{hours:1}:{}),n),l=[...s,...Dt(t)];return{mask:a?({value:u})=>tn(l,u).concat(...a):l,preprocessors:[He(),It(),_e(a),_t(t),Ut({timeMode:t,timeSegmentMinValues:c,timeSegmentMaxValues:r})],postprocessors:[Bt(t),u=>Ht(u,{mode:t,timeSegmentMaxValues:r}),Kt(s),jt(a)],plugins:[Zt({fullMode:t,step:o,timeSegmentMaxValues:r}),zt(t.indexOf("AA"))],overwriteMode:"replace"}}function tn(t,e){let n=Math.min(e.replaceAll(/\D/g,"").length,t.filter(s=>typeof s!="string").length)||1,o=t.findIndex(s=>typeof s!="string"&&!--n)+1;return t.slice(0,o)}var nn="0.1.119",ce=(()=>{let t=new URLSearchParams(window.location.search);if(t.has("cd-debug"))return t.get("cd-debug")==="true";try{return localStorage.getItem("cd-debug")==="true"}catch{return!1}})(),d=(...t)=>ce&&console.log(...t),ue=(...t)=>ce&&console.warn(...t),O=(...t)=>console.log(...t),on=(...t)=>console.error(...t),Ve=[{code:"+1",iso:"US",name:"United States",flag:"\u{1F1FA}\u{1F1F8}"},{code:"+93",iso:"AF",name:"Afghanistan",flag:"\u{1F1E6}\u{1F1EB}"},{code:"+358",iso:"AX",name:"\xC5land Islands",flag:"\u{1F1E6}\u{1F1FD}"},{code:"+355",iso:"AL",name:"Albania",flag:"\u{1F1E6}\u{1F1F1}"},{code:"+213",iso:"DZ",name:"Algeria",flag:"\u{1F1E9}\u{1F1FF}"},{code:"+1684",iso:"AS",name:"American Samoa",flag:"\u{1F1E6}\u{1F1F8}"},{code:"+376",iso:"AD",name:"Andorra",flag:"\u{1F1E6}\u{1F1E9}"},{code:"+244",iso:"AO",name:"Angola",flag:"\u{1F1E6}\u{1F1F4}"},{code:"+1264",iso:"AI",name:"Anguilla",flag:"\u{1F1E6}\u{1F1EE}"},{code:"+672",iso:"AQ",name:"Antarctica",flag:"\u{1F1E6}\u{1F1F6}"},{code:"+1268",iso:"AG",name:"Antigua and Barbuda",flag:"\u{1F1E6}\u{1F1EC}"},{code:"+54",iso:"AR",name:"Argentina",flag:"\u{1F1E6}\u{1F1F7}"},{code:"+374",iso:"AM",name:"Armenia",flag:"\u{1F1E6}\u{1F1F2}"},{code:"+297",iso:"AW",name:"Aruba",flag:"\u{1F1E6}\u{1F1FC}"},{code:"+61",iso:"AU",name:"Australia",flag:"\u{1F1E6}\u{1F1FA}"},{code:"+43",iso:"AT",name:"Austria",flag:"\u{1F1E6}\u{1F1F9}"},{code:"+994",iso:"AZ",name:"Azerbaijan",flag:"\u{1F1E6}\u{1F1FF}"},{code:"+1242",iso:"BS",name:"Bahamas",flag:"\u{1F1E7}\u{1F1F8}"},{code:"+973",iso:"BH",name:"Bahrain",flag:"\u{1F1E7}\u{1F1ED}"},{code:"+880",iso:"BD",name:"Bangladesh",flag:"\u{1F1E7}\u{1F1E9}"},{code:"+1246",iso:"BB",name:"Barbados",flag:"\u{1F1E7}\u{1F1E7}"},{code:"+375",iso:"BY",name:"Belarus",flag:"\u{1F1E7}\u{1F1FE}"},{code:"+32",iso:"BE",name:"Belgium",flag:"\u{1F1E7}\u{1F1EA}"},{code:"+501",iso:"BZ",name:"Belize",flag:"\u{1F1E7}\u{1F1FF}"},{code:"+229",iso:"BJ",name:"Benin",flag:"\u{1F1E7}\u{1F1EF}"},{code:"+1441",iso:"BM",name:"Bermuda",flag:"\u{1F1E7}\u{1F1F2}"},{code:"+975",iso:"BT",name:"Bhutan",flag:"\u{1F1E7}\u{1F1F9}"},{code:"+591",iso:"BO",name:"Bolivia",flag:"\u{1F1E7}\u{1F1F4}"},{code:"+387",iso:"BA",name:"Bosnia and Herzegovina",flag:"\u{1F1E7}\u{1F1E6}"},{code:"+267",iso:"BW",name:"Botswana",flag:"\u{1F1E7}\u{1F1FC}"},{code:"+55",iso:"BR",name:"Brazil",flag:"\u{1F1E7}\u{1F1F7}"},{code:"+246",iso:"IO",name:"British Indian Ocean Territory",flag:"\u{1F1EE}\u{1F1F4}"},{code:"+673",iso:"BN",name:"Brunei",flag:"\u{1F1E7}\u{1F1F3}"},{code:"+359",iso:"BG",name:"Bulgaria",flag:"\u{1F1E7}\u{1F1EC}"},{code:"+226",iso:"BF",name:"Burkina Faso",flag:"\u{1F1E7}\u{1F1EB}"},{code:"+257",iso:"BI",name:"Burundi",flag:"\u{1F1E7}\u{1F1EE}"},{code:"+855",iso:"KH",name:"Cambodia",flag:"\u{1F1F0}\u{1F1ED}"},{code:"+237",iso:"CM",name:"Cameroon",flag:"\u{1F1E8}\u{1F1F2}"},{code:"+1",iso:"CA",name:"Canada",flag:"\u{1F1E8}\u{1F1E6}"},{code:"+238",iso:"CV",name:"Cape Verde",flag:"\u{1F1E8}\u{1F1FB}"},{code:"+1345",iso:"KY",name:"Cayman Islands",flag:"\u{1F1F0}\u{1F1FE}"},{code:"+236",iso:"CF",name:"Central African Republic",flag:"\u{1F1E8}\u{1F1EB}"},{code:"+235",iso:"TD",name:"Chad",flag:"\u{1F1F9}\u{1F1E9}"},{code:"+56",iso:"CL",name:"Chile",flag:"\u{1F1E8}\u{1F1F1}"},{code:"+86",iso:"CN",name:"China",flag:"\u{1F1E8}\u{1F1F3}"},{code:"+61",iso:"CX",name:"Christmas Island",flag:"\u{1F1E8}\u{1F1FD}"},{code:"+61",iso:"CC",name:"Cocos Islands",flag:"\u{1F1E8}\u{1F1E8}"},{code:"+57",iso:"CO",name:"Colombia",flag:"\u{1F1E8}\u{1F1F4}"},{code:"+269",iso:"KM",name:"Comoros",flag:"\u{1F1F0}\u{1F1F2}"},{code:"+242",iso:"CG",name:"Congo",flag:"\u{1F1E8}\u{1F1EC}"},{code:"+243",iso:"CD",name:"Congo (DRC)",flag:"\u{1F1E8}\u{1F1E9}"},{code:"+682",iso:"CK",name:"Cook Islands",flag:"\u{1F1E8}\u{1F1F0}"},{code:"+506",iso:"CR",name:"Costa Rica",flag:"\u{1F1E8}\u{1F1F7}"},{code:"+385",iso:"HR",name:"Croatia",flag:"\u{1F1ED}\u{1F1F7}"},{code:"+53",iso:"CU",name:"Cuba",flag:"\u{1F1E8}\u{1F1FA}"},{code:"+599",iso:"CW",name:"Cura\xE7ao",flag:"\u{1F1E8}\u{1F1FC}"},{code:"+357",iso:"CY",name:"Cyprus",flag:"\u{1F1E8}\u{1F1FE}"},{code:"+420",iso:"CZ",name:"Czech Republic",flag:"\u{1F1E8}\u{1F1FF}"},{code:"+45",iso:"DK",name:"Denmark",flag:"\u{1F1E9}\u{1F1F0}"},{code:"+253",iso:"DJ",name:"Djibouti",flag:"\u{1F1E9}\u{1F1EF}"},{code:"+1767",iso:"DM",name:"Dominica",flag:"\u{1F1E9}\u{1F1F2}"},{code:"+1809",iso:"DO",name:"Dominican Republic",flag:"\u{1F1E9}\u{1F1F4}"},{code:"+593",iso:"EC",name:"Ecuador",flag:"\u{1F1EA}\u{1F1E8}"},{code:"+20",iso:"EG",name:"Egypt",flag:"\u{1F1EA}\u{1F1EC}"},{code:"+503",iso:"SV",name:"El Salvador",flag:"\u{1F1F8}\u{1F1FB}"},{code:"+240",iso:"GQ",name:"Equatorial Guinea",flag:"\u{1F1EC}\u{1F1F6}"},{code:"+291",iso:"ER",name:"Eritrea",flag:"\u{1F1EA}\u{1F1F7}"},{code:"+372",iso:"EE",name:"Estonia",flag:"\u{1F1EA}\u{1F1EA}"},{code:"+251",iso:"ET",name:"Ethiopia",flag:"\u{1F1EA}\u{1F1F9}"},{code:"+500",iso:"FK",name:"Falkland Islands",flag:"\u{1F1EB}\u{1F1F0}"},{code:"+298",iso:"FO",name:"Faroe Islands",flag:"\u{1F1EB}\u{1F1F4}"},{code:"+679",iso:"FJ",name:"Fiji",flag:"\u{1F1EB}\u{1F1EF}"},{code:"+358",iso:"FI",name:"Finland",flag:"\u{1F1EB}\u{1F1EE}"},{code:"+33",iso:"FR",name:"France",flag:"\u{1F1EB}\u{1F1F7}"},{code:"+594",iso:"GF",name:"French Guiana",flag:"\u{1F1EC}\u{1F1EB}"},{code:"+689",iso:"PF",name:"French Polynesia",flag:"\u{1F1F5}\u{1F1EB}"},{code:"+241",iso:"GA",name:"Gabon",flag:"\u{1F1EC}\u{1F1E6}"},{code:"+220",iso:"GM",name:"Gambia",flag:"\u{1F1EC}\u{1F1F2}"},{code:"+995",iso:"GE",name:"Georgia",flag:"\u{1F1EC}\u{1F1EA}"},{code:"+49",iso:"DE",name:"Germany",flag:"\u{1F1E9}\u{1F1EA}"},{code:"+233",iso:"GH",name:"Ghana",flag:"\u{1F1EC}\u{1F1ED}"},{code:"+350",iso:"GI",name:"Gibraltar",flag:"\u{1F1EC}\u{1F1EE}"},{code:"+30",iso:"GR",name:"Greece",flag:"\u{1F1EC}\u{1F1F7}"},{code:"+299",iso:"GL",name:"Greenland",flag:"\u{1F1EC}\u{1F1F1}"},{code:"+1473",iso:"GD",name:"Grenada",flag:"\u{1F1EC}\u{1F1E9}"},{code:"+590",iso:"GP",name:"Guadeloupe",flag:"\u{1F1EC}\u{1F1F5}"},{code:"+1671",iso:"GU",name:"Guam",flag:"\u{1F1EC}\u{1F1FA}"},{code:"+502",iso:"GT",name:"Guatemala",flag:"\u{1F1EC}\u{1F1F9}"},{code:"+44",iso:"GG",name:"Guernsey",flag:"\u{1F1EC}\u{1F1EC}"},{code:"+224",iso:"GN",name:"Guinea",flag:"\u{1F1EC}\u{1F1F3}"},{code:"+245",iso:"GW",name:"Guinea-Bissau",flag:"\u{1F1EC}\u{1F1FC}"},{code:"+592",iso:"GY",name:"Guyana",flag:"\u{1F1EC}\u{1F1FE}"},{code:"+509",iso:"HT",name:"Haiti",flag:"\u{1F1ED}\u{1F1F9}"},{code:"+504",iso:"HN",name:"Honduras",flag:"\u{1F1ED}\u{1F1F3}"},{code:"+852",iso:"HK",name:"Hong Kong",flag:"\u{1F1ED}\u{1F1F0}"},{code:"+36",iso:"HU",name:"Hungary",flag:"\u{1F1ED}\u{1F1FA}"},{code:"+354",iso:"IS",name:"Iceland",flag:"\u{1F1EE}\u{1F1F8}"},{code:"+91",iso:"IN",name:"India",flag:"\u{1F1EE}\u{1F1F3}"},{code:"+62",iso:"ID",name:"Indonesia",flag:"\u{1F1EE}\u{1F1E9}"},{code:"+98",iso:"IR",name:"Iran",flag:"\u{1F1EE}\u{1F1F7}"},{code:"+964",iso:"IQ",name:"Iraq",flag:"\u{1F1EE}\u{1F1F6}"},{code:"+353",iso:"IE",name:"Ireland",flag:"\u{1F1EE}\u{1F1EA}"},{code:"+44",iso:"IM",name:"Isle of Man",flag:"\u{1F1EE}\u{1F1F2}"},{code:"+972",iso:"IL",name:"Israel",flag:"\u{1F1EE}\u{1F1F1}"},{code:"+39",iso:"IT",name:"Italy",flag:"\u{1F1EE}\u{1F1F9}"},{code:"+225",iso:"CI",name:"Ivory Coast",flag:"\u{1F1E8}\u{1F1EE}"},{code:"+1876",iso:"JM",name:"Jamaica",flag:"\u{1F1EF}\u{1F1F2}"},{code:"+81",iso:"JP",name:"Japan",flag:"\u{1F1EF}\u{1F1F5}"},{code:"+44",iso:"JE",name:"Jersey",flag:"\u{1F1EF}\u{1F1EA}"},{code:"+962",iso:"JO",name:"Jordan",flag:"\u{1F1EF}\u{1F1F4}"},{code:"+7",iso:"KZ",name:"Kazakhstan",flag:"\u{1F1F0}\u{1F1FF}"},{code:"+254",iso:"KE",name:"Kenya",flag:"\u{1F1F0}\u{1F1EA}"},{code:"+686",iso:"KI",name:"Kiribati",flag:"\u{1F1F0}\u{1F1EE}"},{code:"+383",iso:"XK",name:"Kosovo",flag:"\u{1F1FD}\u{1F1F0}"},{code:"+965",iso:"KW",name:"Kuwait",flag:"\u{1F1F0}\u{1F1FC}"},{code:"+996",iso:"KG",name:"Kyrgyzstan",flag:"\u{1F1F0}\u{1F1EC}"},{code:"+856",iso:"LA",name:"Laos",flag:"\u{1F1F1}\u{1F1E6}"},{code:"+371",iso:"LV",name:"Latvia",flag:"\u{1F1F1}\u{1F1FB}"},{code:"+961",iso:"LB",name:"Lebanon",flag:"\u{1F1F1}\u{1F1E7}"},{code:"+266",iso:"LS",name:"Lesotho",flag:"\u{1F1F1}\u{1F1F8}"},{code:"+231",iso:"LR",name:"Liberia",flag:"\u{1F1F1}\u{1F1F7}"},{code:"+218",iso:"LY",name:"Libya",flag:"\u{1F1F1}\u{1F1FE}"},{code:"+423",iso:"LI",name:"Liechtenstein",flag:"\u{1F1F1}\u{1F1EE}"},{code:"+370",iso:"LT",name:"Lithuania",flag:"\u{1F1F1}\u{1F1F9}"},{code:"+352",iso:"LU",name:"Luxembourg",flag:"\u{1F1F1}\u{1F1FA}"},{code:"+853",iso:"MO",name:"Macao",flag:"\u{1F1F2}\u{1F1F4}"},{code:"+389",iso:"MK",name:"Macedonia",flag:"\u{1F1F2}\u{1F1F0}"},{code:"+261",iso:"MG",name:"Madagascar",flag:"\u{1F1F2}\u{1F1EC}"},{code:"+265",iso:"MW",name:"Malawi",flag:"\u{1F1F2}\u{1F1FC}"},{code:"+60",iso:"MY",name:"Malaysia",flag:"\u{1F1F2}\u{1F1FE}"},{code:"+960",iso:"MV",name:"Maldives",flag:"\u{1F1F2}\u{1F1FB}"},{code:"+223",iso:"ML",name:"Mali",flag:"\u{1F1F2}\u{1F1F1}"},{code:"+356",iso:"MT",name:"Malta",flag:"\u{1F1F2}\u{1F1F9}"},{code:"+692",iso:"MH",name:"Marshall Islands",flag:"\u{1F1F2}\u{1F1ED}"},{code:"+596",iso:"MQ",name:"Martinique",flag:"\u{1F1F2}\u{1F1F6}"},{code:"+222",iso:"MR",name:"Mauritania",flag:"\u{1F1F2}\u{1F1F7}"},{code:"+230",iso:"MU",name:"Mauritius",flag:"\u{1F1F2}\u{1F1FA}"},{code:"+262",iso:"YT",name:"Mayotte",flag:"\u{1F1FE}\u{1F1F9}"},{code:"+52",iso:"MX",name:"Mexico",flag:"\u{1F1F2}\u{1F1FD}"},{code:"+691",iso:"FM",name:"Micronesia",flag:"\u{1F1EB}\u{1F1F2}"},{code:"+373",iso:"MD",name:"Moldova",flag:"\u{1F1F2}\u{1F1E9}"},{code:"+377",iso:"MC",name:"Monaco",flag:"\u{1F1F2}\u{1F1E8}"},{code:"+976",iso:"MN",name:"Mongolia",flag:"\u{1F1F2}\u{1F1F3}"},{code:"+382",iso:"ME",name:"Montenegro",flag:"\u{1F1F2}\u{1F1EA}"},{code:"+1664",iso:"MS",name:"Montserrat",flag:"\u{1F1F2}\u{1F1F8}"},{code:"+212",iso:"MA",name:"Morocco",flag:"\u{1F1F2}\u{1F1E6}"},{code:"+258",iso:"MZ",name:"Mozambique",flag:"\u{1F1F2}\u{1F1FF}"},{code:"+95",iso:"MM",name:"Myanmar",flag:"\u{1F1F2}\u{1F1F2}"},{code:"+264",iso:"NA",name:"Namibia",flag:"\u{1F1F3}\u{1F1E6}"},{code:"+674",iso:"NR",name:"Nauru",flag:"\u{1F1F3}\u{1F1F7}"},{code:"+977",iso:"NP",name:"Nepal",flag:"\u{1F1F3}\u{1F1F5}"},{code:"+31",iso:"NL",name:"Netherlands",flag:"\u{1F1F3}\u{1F1F1}"},{code:"+687",iso:"NC",name:"New Caledonia",flag:"\u{1F1F3}\u{1F1E8}"},{code:"+64",iso:"NZ",name:"New Zealand",flag:"\u{1F1F3}\u{1F1FF}"},{code:"+505",iso:"NI",name:"Nicaragua",flag:"\u{1F1F3}\u{1F1EE}"},{code:"+227",iso:"NE",name:"Niger",flag:"\u{1F1F3}\u{1F1EA}"},{code:"+234",iso:"NG",name:"Nigeria",flag:"\u{1F1F3}\u{1F1EC}"},{code:"+683",iso:"NU",name:"Niue",flag:"\u{1F1F3}\u{1F1FA}"},{code:"+672",iso:"NF",name:"Norfolk Island",flag:"\u{1F1F3}\u{1F1EB}"},{code:"+850",iso:"KP",name:"North Korea",flag:"\u{1F1F0}\u{1F1F5}"},{code:"+1670",iso:"MP",name:"Northern Mariana Islands",flag:"\u{1F1F2}\u{1F1F5}"},{code:"+47",iso:"NO",name:"Norway",flag:"\u{1F1F3}\u{1F1F4}"},{code:"+968",iso:"OM",name:"Oman",flag:"\u{1F1F4}\u{1F1F2}"},{code:"+92",iso:"PK",name:"Pakistan",flag:"\u{1F1F5}\u{1F1F0}"},{code:"+680",iso:"PW",name:"Palau",flag:"\u{1F1F5}\u{1F1FC}"},{code:"+970",iso:"PS",name:"Palestine",flag:"\u{1F1F5}\u{1F1F8}"},{code:"+507",iso:"PA",name:"Panama",flag:"\u{1F1F5}\u{1F1E6}"},{code:"+675",iso:"PG",name:"Papua New Guinea",flag:"\u{1F1F5}\u{1F1EC}"},{code:"+595",iso:"PY",name:"Paraguay",flag:"\u{1F1F5}\u{1F1FE}"},{code:"+51",iso:"PE",name:"Peru",flag:"\u{1F1F5}\u{1F1EA}"},{code:"+63",iso:"PH",name:"Philippines",flag:"\u{1F1F5}\u{1F1ED}"},{code:"+48",iso:"PL",name:"Poland",flag:"\u{1F1F5}\u{1F1F1}"},{code:"+351",iso:"PT",name:"Portugal",flag:"\u{1F1F5}\u{1F1F9}"},{code:"+1787",iso:"PR",name:"Puerto Rico",flag:"\u{1F1F5}\u{1F1F7}"},{code:"+974",iso:"QA",name:"Qatar",flag:"\u{1F1F6}\u{1F1E6}"},{code:"+262",iso:"RE",name:"R\xE9union",flag:"\u{1F1F7}\u{1F1EA}"},{code:"+40",iso:"RO",name:"Romania",flag:"\u{1F1F7}\u{1F1F4}"},{code:"+7",iso:"RU",name:"Russia",flag:"\u{1F1F7}\u{1F1FA}"},{code:"+250",iso:"RW",name:"Rwanda",flag:"\u{1F1F7}\u{1F1FC}"},{code:"+590",iso:"BL",name:"Saint Barth\xE9lemy",flag:"\u{1F1E7}\u{1F1F1}"},{code:"+290",iso:"SH",name:"Saint Helena",flag:"\u{1F1F8}\u{1F1ED}"},{code:"+1869",iso:"KN",name:"Saint Kitts and Nevis",flag:"\u{1F1F0}\u{1F1F3}"},{code:"+1758",iso:"LC",name:"Saint Lucia",flag:"\u{1F1F1}\u{1F1E8}"},{code:"+590",iso:"MF",name:"Saint Martin",flag:"\u{1F1F2}\u{1F1EB}"},{code:"+508",iso:"PM",name:"Saint Pierre and Miquelon",flag:"\u{1F1F5}\u{1F1F2}"},{code:"+1784",iso:"VC",name:"Saint Vincent and the Grenadines",flag:"\u{1F1FB}\u{1F1E8}"},{code:"+685",iso:"WS",name:"Samoa",flag:"\u{1F1FC}\u{1F1F8}"},{code:"+378",iso:"SM",name:"San Marino",flag:"\u{1F1F8}\u{1F1F2}"},{code:"+239",iso:"ST",name:"S\xE3o Tom\xE9 and Pr\xEDncipe",flag:"\u{1F1F8}\u{1F1F9}"},{code:"+966",iso:"SA",name:"Saudi Arabia",flag:"\u{1F1F8}\u{1F1E6}"},{code:"+221",iso:"SN",name:"Senegal",flag:"\u{1F1F8}\u{1F1F3}"},{code:"+381",iso:"RS",name:"Serbia",flag:"\u{1F1F7}\u{1F1F8}"},{code:"+248",iso:"SC",name:"Seychelles",flag:"\u{1F1F8}\u{1F1E8}"},{code:"+232",iso:"SL",name:"Sierra Leone",flag:"\u{1F1F8}\u{1F1F1}"},{code:"+65",iso:"SG",name:"Singapore",flag:"\u{1F1F8}\u{1F1EC}"},{code:"+1721",iso:"SX",name:"Sint Maarten",flag:"\u{1F1F8}\u{1F1FD}"},{code:"+421",iso:"SK",name:"Slovakia",flag:"\u{1F1F8}\u{1F1F0}"},{code:"+386",iso:"SI",name:"Slovenia",flag:"\u{1F1F8}\u{1F1EE}"},{code:"+677",iso:"SB",name:"Solomon Islands",flag:"\u{1F1F8}\u{1F1E7}"},{code:"+252",iso:"SO",name:"Somalia",flag:"\u{1F1F8}\u{1F1F4}"},{code:"+27",iso:"ZA",name:"South Africa",flag:"\u{1F1FF}\u{1F1E6}"},{code:"+82",iso:"KR",name:"South Korea",flag:"\u{1F1F0}\u{1F1F7}"},{code:"+211",iso:"SS",name:"South Sudan",flag:"\u{1F1F8}\u{1F1F8}"},{code:"+34",iso:"ES",name:"Spain",flag:"\u{1F1EA}\u{1F1F8}"},{code:"+94",iso:"LK",name:"Sri Lanka",flag:"\u{1F1F1}\u{1F1F0}"},{code:"+249",iso:"SD",name:"Sudan",flag:"\u{1F1F8}\u{1F1E9}"},{code:"+597",iso:"SR",name:"Suriname",flag:"\u{1F1F8}\u{1F1F7}"},{code:"+47",iso:"SJ",name:"Svalbard and Jan Mayen",flag:"\u{1F1F8}\u{1F1EF}"},{code:"+268",iso:"SZ",name:"Swaziland",flag:"\u{1F1F8}\u{1F1FF}"},{code:"+46",iso:"SE",name:"Sweden",flag:"\u{1F1F8}\u{1F1EA}"},{code:"+41",iso:"CH",name:"Switzerland",flag:"\u{1F1E8}\u{1F1ED}"},{code:"+963",iso:"SY",name:"Syria",flag:"\u{1F1F8}\u{1F1FE}"},{code:"+886",iso:"TW",name:"Taiwan",flag:"\u{1F1F9}\u{1F1FC}"},{code:"+992",iso:"TJ",name:"Tajikistan",flag:"\u{1F1F9}\u{1F1EF}"},{code:"+255",iso:"TZ",name:"Tanzania",flag:"\u{1F1F9}\u{1F1FF}"},{code:"+66",iso:"TH",name:"Thailand",flag:"\u{1F1F9}\u{1F1ED}"},{code:"+670",iso:"TL",name:"Timor-Leste",flag:"\u{1F1F9}\u{1F1F1}"},{code:"+228",iso:"TG",name:"Togo",flag:"\u{1F1F9}\u{1F1EC}"},{code:"+690",iso:"TK",name:"Tokelau",flag:"\u{1F1F9}\u{1F1F0}"},{code:"+676",iso:"TO",name:"Tonga",flag:"\u{1F1F9}\u{1F1F4}"},{code:"+1868",iso:"TT",name:"Trinidad and Tobago",flag:"\u{1F1F9}\u{1F1F9}"},{code:"+216",iso:"TN",name:"Tunisia",flag:"\u{1F1F9}\u{1F1F3}"},{code:"+90",iso:"TR",name:"Turkey",flag:"\u{1F1F9}\u{1F1F7}"},{code:"+993",iso:"TM",name:"Turkmenistan",flag:"\u{1F1F9}\u{1F1F2}"},{code:"+1649",iso:"TC",name:"Turks and Caicos Islands",flag:"\u{1F1F9}\u{1F1E8}"},{code:"+688",iso:"TV",name:"Tuvalu",flag:"\u{1F1F9}\u{1F1FB}"},{code:"+256",iso:"UG",name:"Uganda",flag:"\u{1F1FA}\u{1F1EC}"},{code:"+380",iso:"UA",name:"Ukraine",flag:"\u{1F1FA}\u{1F1E6}"},{code:"+971",iso:"AE",name:"United Arab Emirates",flag:"\u{1F1E6}\u{1F1EA}"},{code:"+44",iso:"GB",name:"United Kingdom",flag:"\u{1F1EC}\u{1F1E7}"},{code:"+598",iso:"UY",name:"Uruguay",flag:"\u{1F1FA}\u{1F1FE}"},{code:"+998",iso:"UZ",name:"Uzbekistan",flag:"\u{1F1FA}\u{1F1FF}"},{code:"+678",iso:"VU",name:"Vanuatu",flag:"\u{1F1FB}\u{1F1FA}"},{code:"+379",iso:"VA",name:"Vatican City",flag:"\u{1F1FB}\u{1F1E6}"},{code:"+58",iso:"VE",name:"Venezuela",flag:"\u{1F1FB}\u{1F1EA}"},{code:"+84",iso:"VN",name:"Vietnam",flag:"\u{1F1FB}\u{1F1F3}"},{code:"+1284",iso:"VG",name:"Virgin Islands (British)",flag:"\u{1F1FB}\u{1F1EC}"},{code:"+1340",iso:"VI",name:"Virgin Islands (US)",flag:"\u{1F1FB}\u{1F1EE}"},{code:"+681",iso:"WF",name:"Wallis and Futuna",flag:"\u{1F1FC}\u{1F1EB}"},{code:"+212",iso:"EH",name:"Western Sahara",flag:"\u{1F1EA}\u{1F1ED}"},{code:"+967",iso:"YE",name:"Yemen",flag:"\u{1F1FE}\u{1F1EA}"},{code:"+260",iso:"ZM",name:"Zambia",flag:"\u{1F1FF}\u{1F1F2}"},{code:"+263",iso:"ZW",name:"Zimbabwe",flag:"\u{1F1FF}\u{1F1FC}"}];function Z(t){let e=t.toLowerCase().trim().replace(/\s+/g," ");return e==="date:mmddyyyy"?{type:"date",pattern:"mmddyyyy"}:e==="date:ddmmyyyy"?{type:"date",pattern:"ddmmyyyy"}:e==="time:hhmm am"||e==="time:hhmm"?{type:"time",pattern:"hhmm",defaultMeridiem:"AM"}:e==="time:hhmm pm"?{type:"time",pattern:"hhmm",defaultMeridiem:"PM"}:e==="time:h:mm am"||e==="time:h:mm"?{type:"time",pattern:"h:mm",defaultMeridiem:"AM"}:e==="time:h:mm pm"?{type:"time",pattern:"h:mm",defaultMeridiem:"PM"}:e==="time:hh:mm"||e==="time:hh:mm am"?{type:"time",pattern:"hh:mm",defaultMeridiem:"AM"}:e==="time:hh:mm pm"?{type:"time",pattern:"hh:mm",defaultMeridiem:"PM"}:e==="number"?{type:"number",pattern:"number"}:e==="percent"?{type:"percent",pattern:"percent"}:e==="country-code"?{type:"country-code",pattern:"country-code",countryCodeFormat:"default"}:e==="country-code:iso"?{type:"country-code",pattern:"country-code",countryCodeFormat:"iso"}:e==="country-code:flag"?{type:"country-code",pattern:"country-code",countryCodeFormat:"flag"}:e==="country-code:name"?{type:"country-code",pattern:"country-code",countryCodeFormat:"name"}:e==="country-code:flag-iso"?{type:"country-code",pattern:"country-code",countryCodeFormat:"flag-iso"}:e==="country-code:flag-name"?{type:"country-code",pattern:"country-code",countryCodeFormat:"flag-name"}:null}function de(t){if(t.type==="date"){let e=t.pattern==="mmddyyyy"?"mm/dd/yyyy":"dd/mm/yyyy";return Be({mode:e,separator:"/"})}else{if(t.type==="time")return t.pattern==="h:mm"?t.defaultMeridiem!==void 0?{mask:[/\d/,/\d?/,":",/\d/,/\d/," ",/[APap]/,/[Mm]/],preprocessors:[({elementState:n,data:o})=>{let s=n.value.replace(/[^\d]/g,"");if(/^\d+$/.test(o)){let a=s+o;if(a.length===1)return{elementState:n,data:a+":"};if(a.length===2)return parseInt(a)>12?{elementState:n,data:a[0]+":"+a[1]}:{elementState:n,data:a+":"};if(a.length===3)return{elementState:n,data:a[0]+":"+a.slice(1)+" "+t.defaultMeridiem};if(a.length===4)return{elementState:n,data:a.slice(0,2)+":"+a.slice(2)+" "+t.defaultMeridiem}}if(/[apAP]/i.test(o)){let a=o.toUpperCase();if(a==="A"||a==="P")return{elementState:n,data:" "+a+"M"};if(a==="AM"||a==="PM")return{elementState:n,data:" "+a}}return{elementState:n,data:o}}],postprocessors:[({value:n,selection:o})=>{let s=n.match(/^(\d{1,2}):(\d{2})(\s+(AM|PM))?/i);if(s){let a=parseInt(s[1]),i=parseInt(s[2]),r=s[4]?.toUpperCase()||t.defaultMeridiem;return a<1||a>12||i>59?{value:n.slice(0,-1),selection:o}:{value:`${a}:${i.toString().padStart(2,"0")} ${r}`,selection:o}}return{value:n,selection:o}}]}:{mask:[/\d/,/\d?/,":",/\d/,/\d/],preprocessors:[({elementState:n,data:o})=>{if(/^\d+$/.test(o)){let a=n.value.replace(/[^\d]/g,"")+o;if(a.length===1)return{elementState:n,data:a+":"};if(a.length===3)return{elementState:n,data:a[0]+":"+a.slice(1)};if(a.length===4)return{elementState:n,data:a.slice(0,2)+":"+a.slice(2)}}return{elementState:n,data:o}}]}:t.pattern==="hh:mm"?t.defaultMeridiem!==void 0?W({mode:"HH:MM AA"}):W({mode:"HH:MM"}):W({mode:"HH:MM AA"});if(t.type==="number")return{mask:/^-?\d+(,\d{3})*(\.\d+)?$/,preprocessors:[({elementState:e,data:n})=>{let o=e.value.replace(/,/g,""),s=n.replace(/,/g,"");return{elementState:{...e,value:o},data:s}}],postprocessors:[({value:e,selection:n})=>{if(e&&/^-?\d+(\.\d*)?$/.test(e)){let o=e.split("."),s=o[0],a=o[1],i=s.replace(/\B(?=(\d{3})+(?!\d))/g,",");return{value:a!==void 0?`${i}.${a}`:i,selection:[n[0],n[1]]}}return{value:e,selection:n}}]};if(t.type==="percent")return{mask:/^\d{0,3}(\.\d{0,2})?%?$/,preprocessors:[({elementState:e,data:n})=>{let o=e.value.replace("%",""),s=n.replace("%","");return{elementState:{...e,value:o},data:s}}],postprocessors:[({value:e,selection:n})=>e&&!e.endsWith("%")?{value:e+"%",selection:[n[0],n[1]]}:{value:e,selection:n}]}}return null}function sn(t){t.querySelectorAll("input[data-input]").forEach((n,o)=>{let s=n,a=s.getAttribute("data-input");if(!a)return;let i=Z(a);if(!i)return;let r=de(i);if(!r)return;let c=new C(s,r);s.dispatchEvent(new CustomEvent("cd:inputformat:bound",{bubbles:!0}));let l=s.value;s.addEventListener("input",()=>{let u=s.value;u!==l&&(s.dispatchEvent(new CustomEvent("cd:inputformat:changed",{bubbles:!0,detail:{raw:l,formatted:u}})),l=u)}),s.addEventListener("blur",()=>{let u=s.value.length===0||s.checkValidity();s.setAttribute("aria-invalid",(!u).toString()),u||s.dispatchEvent(new CustomEvent("cd:inputformat:invalid",{bubbles:!0}))}),s.__maskito=c})}function an(t,e){if(console.log(`\u{1F4DE} [COUNTRY-CODE] Populating select with format: "${e}"`),t.options.length>0&&t.options[0].value==="")for(;t.options.length>1;)t.remove(1);else t.innerHTML="";Ve.forEach(o=>{let s=document.createElement("option");switch(s.value=o.code,e){case"default":s.textContent=o.code;break;case"iso":s.textContent=`${o.code} (${o.iso})`;break;case"flag":s.textContent=`${o.flag} ${o.code}`;break;case"name":s.textContent=`${o.code} ${o.name}`;break;case"flag-iso":s.textContent=`${o.flag} ${o.code} (${o.iso})`;break;case"flag-name":s.textContent=`${o.flag} ${o.code} ${o.name}`;break}t.appendChild(s)}),console.log(`\u2705 [COUNTRY-CODE] Populated ${Ve.length} country codes`)}function rn(t){console.log("\u{1F4DE} [COUNTRY-CODE] ========== INITIALIZING =========="),console.log("\u{1F4DE} [COUNTRY-CODE] Form:",{element:t,id:t.id,"data-cd-form":t.getAttribute("data-cd-form")});let e=t.querySelectorAll('select[data-input^="country-code"]');if(console.log(`\u{1F4DE} [COUNTRY-CODE] Found ${e.length} country code selects`),e.length===0){console.warn('\u26A0\uFE0F [COUNTRY-CODE] No selects found with data-input starting with "country-code"'),console.warn('\u26A0\uFE0F [COUNTRY-CODE] Make sure your <select> has attribute like: data-input="country-code" or data-input="country-code:flag"');let n=t.querySelectorAll("select");console.log(`\u{1F4DE} [COUNTRY-CODE] Total selects in form: ${n.length}`),n.forEach((o,s)=>{console.log(`\u{1F4DE} [COUNTRY-CODE] Select ${s+1}:`,{element:o,name:o.getAttribute("name"),"data-input":o.getAttribute("data-input")})});return}e.forEach((n,o)=>{console.log(`
\u{1F4DE} [COUNTRY-CODE] ========== PROCESSING SELECT ${o+1}/${e.length} ==========`);let s=n.getAttribute("data-input");if(console.log(`\u{1F4DE} [COUNTRY-CODE] data-input attribute: "${s}"`),!s){console.warn("\u26A0\uFE0F [COUNTRY-CODE] Select has no data-input attribute, skipping");return}let a=Z(s);if(console.log("\u{1F4DE} [COUNTRY-CODE] Parsed config:",a),!a){console.warn(`\u26A0\uFE0F [COUNTRY-CODE] Could not parse format from: "${s}"`);return}if(a.type!=="country-code"){console.warn(`\u26A0\uFE0F [COUNTRY-CODE] Config type is "${a.type}", expected "country-code"`);return}let i=a.countryCodeFormat||"default";console.log(`\u{1F4DE} [COUNTRY-CODE] Using format: "${i}"`),an(n,i),n.__countryCodeInitialized=!0,console.log(`\u2705 [COUNTRY-CODE] Select ${o+1} initialized successfully`)}),console.log(`
\u2705 [COUNTRY-CODE] ========== INITIALIZATION COMPLETE ==========`),console.log(`\u2705 [COUNTRY-CODE] Processed ${e.length} country code selects`)}function ln(){let t=document.querySelectorAll("[data-show-when]"),e=new Map;t.forEach((n,o)=>{let s=n.getAttribute("data-show-when");if(!s)return;let[a,i]=s.split("=").map(r=>r.trim());!a||i===void 0||(e.has(a)||e.set(a,new Set),e.get(a).add(n),Ge(n,a,i))}),e.forEach((n,o)=>{document.querySelectorAll(`input[name="${o}"], select[name="${o}"], textarea[name="${o}"]`).forEach(a=>{a.addEventListener("change",()=>{n.forEach(i=>{let r=i.getAttribute("data-show-when");if(!r)return;let[,c]=r.split("=").map(l=>l.trim());Ge(i,o,c)})})})})}function Ge(t,e,n){let o=document.querySelectorAll(`input[name="${e}"], select[name="${e}"], textarea[name="${e}"]`),s="";o.forEach(r=>{let c=r;if(c.type==="radio"||c.type==="checkbox"){let l=c;l.checked&&(s=l.value)}else s=c.value});let a=s===n,i=t;a?(i.style.display="",i.removeAttribute("aria-hidden"),i.querySelectorAll("input, select, textarea, button, [tabindex]").forEach(c=>{c.removeAttribute("tabindex")}),t.dispatchEvent(new CustomEvent("form-wrapper-visibility:shown",{bubbles:!0}))):(i.style.display="none",i.setAttribute("aria-hidden","true"),i.querySelectorAll('input, select, textarea, button, [tabindex]:not([tabindex="-1"])').forEach(c=>{c.setAttribute("tabindex","-1")}),t.dispatchEvent(new CustomEvent("form-wrapper-visibility:hidden",{bubbles:!0})))}var J=new Map;function cn(){O("\u{1F504} Initializing Dynamic Rows...");let t=document.querySelectorAll("[data-cd-repeat-group]");if(d("\u{1F50D} Found repeat groups:",t.length),t.length===0){ue("\u26A0\uFE0F No elements found with data-cd-repeat-group attribute");let e=document.querySelectorAll("[data-repeat-group], [data-cd-repeater-group], [data-repeater-group]");d("\u{1F50D} Found elements with similar attributes:",e.length),e.length>0&&(d("\u{1F50D} First possible group:",e[0]),d("\u{1F50D} Its attributes:",Array.from(e[0].attributes).map(n=>`${n.name}="${n.value}"`)));return}t.forEach((e,n)=>{d(`\u{1F3AF} Processing Group ${n+1}:`,e.tagName,e.className);let o=e.getAttribute("data-cd-repeat-group");if(d("\u{1F50D} Group name:",o),!o){on("\u274C No group name found, skipping");return}let s=window.getComputedStyle(e),a=s.display==="none";if(d("\u{1F50D} Container display/hidden:",s.display,a),a){d("\u23ED\uFE0F Skipping hidden container (will reinitialize when shown)");return}d("\u2705 Proceeding to initialize group:",o),ze(o,e)}),O("\u2705 Dynamic rows initialization complete")}function ze(t,e){let n=e.querySelector("[data-cd-repeat-template]"),o=e.querySelector("[data-cd-add-row]")||e.querySelector(`[data-cd-repeat-add="${t}"]`);if(!o&&(e.parentElement&&(o=e.parentElement.querySelector(`[data-cd-repeat-add="${t}"]`)||e.parentElement.querySelector("[data-cd-add-row]")),o||(o=document.querySelector(`[data-cd-repeat-add="${t}"]`)),!o)){let l=document.querySelectorAll("[data-cd-add-row], [data-cd-repeat-add]");for(let u of Array.from(l)){let m=u.getAttribute("data-cd-repeat-add"),f=u.getAttribute("data-cd-add-row");if(m===t||f===t||u.textContent?.toLowerCase().includes(t.toLowerCase())){o=u;break}}}let s=e.getAttribute("data-cd-name-pattern")||`${t}[{i}][{field}]`;if(d(`\u{1F527} Initializing group: "${t}"`,e.tagName,!!n,!!o),!o){ue(`\u274C No add button found for group "${t}". Checked selectors: [data-cd-add-row], [data-cd-repeat-add="${t}"]`);let l=document.querySelectorAll("[data-cd-add-row], [data-cd-repeat-add]");d("\u{1F50D} Total add buttons in document:",l.length),ce&&l.length>0&&l.forEach((u,m)=>{d(`  ${m+1}. ${u.tagName} - data-cd-repeat-add: "${u.getAttribute("data-cd-repeat-add")}" - data-cd-add-row: "${u.getAttribute("data-cd-add-row")}"`)})}if(n)d("\u2705 Template found:",n.tagName,n.className),n.style.display="none";else{d("\u{1F50D} No template found, searching for existing rows...");let l=e.querySelector("[data-cd-repeat-row]");if(d("\u{1F50D} First existing row found:",!!l),l){d("\u{1F50D} First row details:",l.tagName,l.className),n=l.cloneNode(!0),n.setAttribute("data-cd-repeat-template","");let u=n.querySelectorAll("input, select, textarea");d("\u{1F50D} Clearing",u.length,"input values in template"),u.forEach(m=>{m.value=""}),n.style.display="none",e.insertBefore(n,l),d(`\u2705 Created and hid template from first row for group "${t}"`)}else{d("\u{1F50D} Searching for elements with similar row attributes...");let u=e.querySelectorAll("[data-repeat-row], [data-cd-repeater-row], [data-repeater-row]");d("\u{1F50D} Found possible rows:",u.length),u.length>0&&(d("\u{1F50D} First possible row:",u[0]),d("\u{1F50D} Its attributes:",Array.from(u[0].attributes).map(m=>`${m.name}="${m.value}"`)))}}if(!n){console.error("\u274C No template available, cannot initialize group");return}let a=Array.from(e.querySelectorAll("[data-cd-repeat-row]:not([data-cd-repeat-template])"));if(d("\u{1F50D} Found existing data rows:",a.length),a.forEach((l,u)=>{d(`\u{1F50D} Existing row ${u+1}:`,{tag:l.tagName,class:l.className,"data-cd-repeat-row":l.getAttribute("data-cd-repeat-row")})}),a.length===0){d("\u{1F50D} No existing data rows, creating first row from template...");let l=n.cloneNode(!0);l.removeAttribute("data-cd-repeat-template");let u=l;u.style.cssText=u.style.cssText.replace(/display\s*:\s*[^;]+;?/,"")+" display: grid !important;",e.appendChild(l),a.push(l)}else if(a.forEach((l,u)=>{let m=l;u===0?(m.style.cssText=m.style.cssText.replace(/display\s*:\s*[^;]+;?/,"")+" display: grid !important;",m.removeAttribute("aria-hidden"),d(`\u{1F50D} Keeping first row visible: row ${u+1}`)):(m.style.display="none",m.setAttribute("aria-hidden","true"),d(`\u{1F50D} Hiding extra row: row ${u+1}`))}),a.length>1){d(`\u{1F50D} Removing ${a.length-1} extra rows from DOM`);for(let l=1;l<a.length;l++)a[l].remove();a.splice(1)}let i={groupName:t,container:e,template:n,namePattern:s,rows:a,addButton:o};J.set(t,i),o?(d(`\u2795 Attaching add button listener for group "${t}"`),o.removeEventListener("click",Ye),o.addEventListener("click",Ye)):console.warn(`\u274C No add button found for group "${t}". Checked selectors: [data-cd-add-row], [data-cd-repeat-add="${t}"]`);let r=e.querySelectorAll("[data-cd-remove-row], [data-cd-repeat-remove]");d(`\u{1F517} Found ${r.length} remove buttons for group "${t}"`),r.forEach(l=>{let u=l.getAttribute("data-cd-repeat-remove");u&&d(`\u{1F517} Remove button references group: "${u}" (should be "${t}")`),l.removeEventListener("click",re),l.addEventListener("click",re)});let c=a[0];if(c){let l=c.querySelector("[data-cd-remove-row], [data-cd-repeat-remove]");l&&(l.style.visibility="hidden",l.style.pointerEvents="none",d(`\u{1F441}\uFE0F Hide remove button on first row for group "${t}"`))}un(i),me(i),fe(i)}function un(t){d(`\u{1F3A8} Applying formatting to ${t.rows.length} existing rows in group "${t.groupName}"`),t.rows.forEach((e,n)=>{let o=e.querySelectorAll("input[data-input]");d(`\u{1F3A8} Row ${n+1}: found ${o.length} inputs with data-input attribute`),o.forEach(s=>{let a=s,i=a.getAttribute("data-input");if(!i)return;d(`\u{1F3A8} Applying formatting to input: data-input="${i}"`);let r=Z(i);if(r){let c=de(r);if(c){a.__maskito&&a.__maskito.destroy();let l=new C(a,c);a.__maskito=l,a.dispatchEvent(new CustomEvent("cd:inputformat:bound",{bubbles:!0})),d(`\u2705 Maskito applied to existing input with data-input="${i}"`)}}})})}function Ye(t){t.preventDefault();let e=t.target,n=e.closest("[data-cd-repeat-add]")||e.closest("[data-cd-add-row]");if(!n){console.error("\u274C No add button found from clicked element");return}let o=n.getAttribute("data-cd-repeat-add")||n.getAttribute("data-cd-add-row");if(!o){console.error("\u274C No group name found on add button");return}if(!document.querySelector(`[data-cd-repeat-group="${o}"]`)){console.error(`\u274C No container found for group "${o}"`);return}let a=J.get(o);if(!a){console.error(`\u274C No group found in activeGroups for "${o}"`);return}dn(a)}function re(t){t.preventDefault();let e=t.target,n=e.closest("[data-cd-repeat-group]");if(!n)return;let o=n.getAttribute("data-cd-repeat-group");if(!o)return;let s=J.get(o);if(!s)return;let a=fn(s,e);a&&gn(s,a.row)}function dn(t){if(d(`\u2795 Adding new row to group "${t.groupName}" (currently ${t.rows.length} rows)`),t.rows.length>=5){ue(`\u26A0\uFE0F Maximum rows reached for group "${t.groupName}" (5 rows max)`),t.addButton&&(t.addButton.style.opacity="0.5",t.addButton.style.pointerEvents="none");return}let e=t.container.querySelector("[data-cd-repeat-template]");if(!e){console.error("\u274C No template found to clone");return}let n=e.cloneNode(!0);n.removeAttribute("data-cd-repeat-template"),n.querySelectorAll("input, select, textarea").forEach(i=>{let r=i;r.value="";let c=r.getAttribute("data-input");if(c){d(`\u2795 Applying formatting to new input: data-input="${c}"`);let l=Z(c);if(l){let u=de(l);if(u){r.__maskito&&r.__maskito.destroy();let m=new C(r,u);r.__maskito=m,r.dispatchEvent(new CustomEvent("cd:inputformat:bound",{bubbles:!0})),d(`\u2705 Maskito applied to new input with data-input="${c}"`)}}}});let s=n;s.classList.add("visible-row"),s.style.cssText=s.style.cssText.replace(/display\s*:\s*[^;]+;?/,"")+" display: grid !important;",s.removeAttribute("aria-hidden"),t.container.appendChild(n),t.rows.push(n);let a=n.querySelectorAll("[data-cd-remove-row], [data-cd-repeat-remove]");if(d(`\u2795 Attaching ${a.length} remove button listeners to new row`),a.forEach(i=>{i.addEventListener("click",re)}),vn(n),me(t),fe(t),d(`\u2795 Row added successfully, new total: ${t.rows.length} rows`),t.rows.length>1){let r=t.rows[0].querySelector("[data-cd-remove-row], [data-cd-repeat-remove]");r&&(r.style.visibility="visible",r.style.pointerEvents="auto",d(`\u{1F441}\uFE0F Show remove button on first row (${t.rows.length} rows)`))}t.rows.length>=5&&t.addButton&&(t.addButton.style.opacity="0.5",t.addButton.style.pointerEvents="none"),n.dispatchEvent(new CustomEvent("cd:row:added",{bubbles:!0,detail:{groupName:t.groupName,rowIndex:t.rows.length-1}}))}function me(t){d(`\u{1F522} DYNAMIC: Reindexing ${t.rows.length} rows for group "${t.groupName}"`),t.rows.forEach((e,n)=>{let o=n+1,s=e.querySelectorAll("[data-cd-repeat-name]");d(`\u{1F522} DYNAMIC: Row ${o}: found ${s.length} inputs with data-cd-repeat-name`),s.forEach(r=>{let c=r.getAttribute("data-cd-repeat-name");if(c){let l=`${c}-${o}`;r.name=l,d(`\u{1F522} DYNAMIC: Row ${o}: Updated input name: ${c} \u2192 ${l}`)}}),e.querySelectorAll("[id]").forEach(r=>{let c=r.getAttribute("data-original-id");c?r.id=`${c}-${o}`:r.id.endsWith(`-${o}`)||(r.setAttribute("data-original-id",r.id),r.id=`${r.id}-${o}`)}),e.querySelectorAll("label[for]").forEach(r=>{let c=r.getAttribute("data-original-for");if(c)r.htmlFor=`${c}-${o}`;else{let l=r.htmlFor;l.endsWith(`-${o}`)||(r.setAttribute("data-original-for",l),r.htmlFor=`${l}-${o}`)}})}),d("\u{1F522} DYNAMIC: Dispatching input events to trigger summary updates"),t.rows.forEach((e,n)=>{let o=e.querySelectorAll("input, select, textarea");d(`\u{1F522} DYNAMIC: Row ${n+1}: dispatching events for ${o.length} inputs`),o.forEach(s=>{s.dispatchEvent(new Event("input",{bubbles:!0}))})}),d("\u{1F522} DYNAMIC: Summary fields will be synced by updateSummaries()")}function fe(t){d(`\u{1F4CA} SUMMARY: Updating summaries for group "${t.groupName}" (${t.rows.length} rows)`);let e=document.querySelectorAll(`[data-cd-summary-for="${t.groupName}"]`);d(`\u{1F4CA} SUMMARY: Found ${e.length} summary container(s) for group "${t.groupName}"`),e.forEach((o,s)=>{let a=o.querySelector("[data-cd-summary-template]");if(!a){console.warn(`\u{1F4CA} SUMMARY: No template found in summary container ${s} for group "${t.groupName}"`);return}let i=o.querySelectorAll("[data-summary-row]");d(`\u{1F4CA} SUMMARY: Removing ${i.length} existing summary rows from container ${s}`),i.forEach(r=>r.remove()),d(`\u{1F4CA} SUMMARY: Creating ${t.rows.length} new summary rows for container ${s}`),t.rows.forEach((r,c)=>{let l=c+1,u=a.cloneNode(!0);u.removeAttribute("data-cd-summary-template"),u.setAttribute("data-summary-row",""),u.style.display="";let m=u.querySelectorAll("[data-cd-input-field]");d(`\u{1F4CA} SUMMARY: Processing ${m.length} field elements in summary row ${l}`),m.forEach(f=>{let p=f.getAttribute("data-cd-input-field");if(p){let g=p.replace("{i}",l.toString());f.setAttribute("data-cd-input-field",g),d(`\u{1F4CA} SUMMARY: Updated field: ${p} \u2192 ${g}`)}}),o.appendChild(u)}),a&&(a.style.display="none",d(`\u{1F4CA} SUMMARY: Summary template hidden for container ${s}`))}),mn();let n=()=>{d(`\u{1F4CA} SUMMARY: *** RE-SYNCING ALL FIELDS *** for group "${t.groupName}"`),e.forEach(o=>{let s=o.querySelectorAll("[data-cd-input-field]");d(`\u{1F4CA} SUMMARY: Found ${s.length} field elements to re-sync`),s.forEach((a,i)=>{let r=a.getAttribute("data-cd-input-field");d(`\u{1F4CA} SUMMARY: Re-syncing field ${i+1}/${s.length}: "${r}"`),r&&z(a,r)})}),typeof window.TryFormly?.refresh=="function"&&(d("\u{1F4CA} SUMMARY: Triggering TryFormly.refresh() after re-sync"),window.TryFormly.refresh()),d("\u{1F4CA} SUMMARY: *** RE-SYNC COMPLETE ***")};e.forEach(o=>{o.addEventListener("form-wrapper-visibility:shown",()=>{d("\u{1F4CA} SUMMARY: *** CONTAINER BECAME VISIBLE (visibility event) ***"),n()})}),e.forEach(o=>{let s=o.closest('[data-form="step"]');s?(d(`\u{1F4CA} SUMMARY: Setting up form step observer for group "${t.groupName}"`),new MutationObserver(i=>{i.forEach(r=>{if(r.type==="attributes"&&r.attributeName==="style"){let c=r.target;c.style.display!=="none"&&c.offsetParent!==null&&(d("\u{1F4CA} SUMMARY: *** FORM STEP BECAME VISIBLE (MutationObserver) ***"),setTimeout(()=>n(),100))}})}).observe(s,{attributes:!0,attributeFilter:["style","class"]}),d(`\u{1F4CA} SUMMARY: Form step observer attached for group "${t.groupName}"`)):d(`\u{1F4CA} SUMMARY: No parent form step found for group "${t.groupName}"`)}),typeof window.TryFormly?.refresh=="function"&&(d("\u{1F4CA} SUMMARY: Triggering TryFormly.refresh()"),window.TryFormly.refresh())}function mn(){d("\u{1F504} SUMMARY: Syncing all summary fields...");let t=document.querySelectorAll("[data-cd-input-field]");d(`\u{1F504} SUMMARY: Found ${t.length} summary field elements`),t.forEach((e,n)=>{let o=e.getAttribute("data-cd-input-field");o&&(d(`\u{1F504} SUMMARY: Syncing field ${n+1}: "${o}"`),z(e,o))})}function z(t,e){let n=null;if(d(`\u{1F50D} SUMMARY: Syncing summary field: "${e}"`),e.includes("{i}")){d(`\u{1F50D} SUMMARY: Templated field detected: "${e}"`);let a=t.closest("[data-summary-row]");if(a){let i=a.parentElement,c=Array.from(i?.querySelectorAll("[data-summary-row]")||[]).indexOf(a)+1,l=e.replace("{i}",c.toString());if(l.includes("[")&&l.includes("]")){let u=l.match(/\[(\d+)\]\[([^\]]+)\]/);if(u){let m=u[1];l=`${u[2]}-${m}`,d(`\u{1F50D} SUMMARY: Converted bracket pattern: "${e}" \u2192 "${l}"`)}}d(`\u{1F50D} SUMMARY: Resolved templated field: "${e}" \u2192 "${l}"`),e=l}else{d(`\u{1F50D} SUMMARY: Could not resolve templated field "${e}" - no summary row context found`);return}}let o=[`input[name="${e}"]:not([data-cd-repeat-template])`,`select[name="${e}"]:not([data-cd-repeat-template])`,`textarea[name="${e}"]:not([data-cd-repeat-template])`,`input[name="${e}"]`,`select[name="${e}"]`,`textarea[name="${e}"]`,`input[id="${e}"]`,`select[id="${e}"]`,`textarea[id="${e}"]`];for(let a of o){let i=document.querySelectorAll(a);if(i.length!==0){for(let r of Array.from(i)){let c=r,l=r;if(c.offsetParent!==null&&l.value&&l.value.trim()){n=l,d(`\u{1F50D} Found visible source WITH VALUE using selector: ${a}, value="${l.value}"`);break}}if(n)break;d(`\u{1F50D} No visible elements with values found, searching ${i.length} hidden elements for one with a value...`);for(let r of Array.from(i)){let c=r,l=r;if(c.offsetParent===null&&l.value&&l.value.trim()){n=l,d(`\u{1F50D} Found hidden source WITH VALUE using selector: ${a}, value="${l.value}"`);break}}if(n)break;for(let r of Array.from(i))if(r.offsetParent!==null){n=r,d(`\u{1F50D} Found visible source (empty value) using selector: ${a}`);break}if(n)break;n=i[0],d(`\u{1F50D} Found source using first element (last resort): ${a}`);break}}if(!n){d(`\u{1F50D} SUMMARY: Direct match failed for field: "${e}"`);let r=Array.from(document.querySelectorAll("input[name], select[name], textarea[name]")).filter(c=>{let l=c.getAttribute("name");return l&&l.includes("-")}).map(c=>c.getAttribute("name"));d("\u{1F50D} SUMMARY: Available dynamic input names (with suffix pattern):",r),d(`\u{1F50D} SUMMARY: Looking for field name: "${e}"`);return}d(`\u{1F50D} SUMMARY: Found source element for "${e}":`,n.tagName,n.type||"");let s="";if(n.tagName.toLowerCase()==="input"||n.tagName.toLowerCase()==="textarea"){let a=n;d(`\u{1F50D} SUMMARY DEBUG: Input element value: "${a.value}"`),d(`\u{1F50D} SUMMARY DEBUG: Input element name: "${a.name}"`),d(`\u{1F50D} SUMMARY DEBUG: Input element id: "${a.id}"`),d(`\u{1F50D} SUMMARY DEBUG: Element visibility: display="${a.style.display}", parent visible="${a.offsetParent!==null}"`),d(`\u{1F50D} SUMMARY DEBUG: Element classes: "${a.className}"`);let i=document.querySelectorAll(`[name="${e}"]`);d(`\u{1F50D} SUMMARY DEBUG: Found ${i.length} elements with name="${e}"`),i.length>1&&i.forEach((r,c)=>{let l=r;d(`\u{1F50D} SUMMARY DEBUG: Element ${c+1}: value="${r.value}", visible="${l.offsetParent!==null}", classes="${l.className}"`)})}if(n.type==="radio"){let a=document.querySelector(`input[name="${e}"]:checked`);s=a?a.value:""}else n.type==="checkbox"?s=n.checked?"Yes":"No":s=n.value;if(t.textContent=s||"[Not specified]",d(`\u2705 SUMMARY: Updated summary for "${e}": "${s}" (empty: ${!s})`),n.__summaryListenerAdded)d(`\u23ED\uFE0F  SUMMARY: Event listener already exists for field "${e}", skipping`);else{let a=n.type==="radio"||n.type==="checkbox"?"change":"input";d(`\u{1F3A7} SUMMARY: Adding ${a} listener for field "${e}"...`),n.addEventListener(a,()=>{d(`\u{1F504} SUMMARY: *** FIELD INPUT EVENT FIRED *** Field "${e}" changed to: "${n.value}"`),z(t,e)}),n.type==="radio"&&document.querySelectorAll(`input[name="${e}"]`).forEach(r=>{r.__summaryListenerAdded||(r.addEventListener("change",()=>{d(`\u{1F504} SUMMARY: Radio "${e}" changed, updating summary...`),z(t,e)}),r.__summaryListenerAdded=!0)}),n.__summaryListenerAdded=!0,d(`\u2705 SUMMARY: Event listener successfully added for field "${e}"`)}}function fn(t,e){for(let n=0;n<t.rows.length;n++){let o=t.rows[n];if(o.contains(e))return{row:o,index:n}}return null}function gn(t,e){if(d(`\u2796 Removing row from group "${t.groupName}" (currently ${t.rows.length} rows)`),t.rows.length<=1){console.warn("Cannot remove last row from group:",t.groupName);return}let n=t.rows.indexOf(e);if(n===-1){console.warn("Target row not found in group:",t.groupName);return}if(d(`\u2796 Removing row at index ${n}`),e.remove(),t.rows.splice(n,1),t.rows.length<5&&t.addButton&&(t.addButton.style.opacity="",t.addButton.style.pointerEvents="",d(`\u2705 Add button re-enabled for group "${t.groupName}"`)),me(t),fe(t),t.rows.length===1){let s=t.rows[0].querySelector("[data-cd-remove-row], [data-cd-repeat-remove]");s&&(s.style.visibility="hidden",s.style.pointerEvents="none",d("\u{1F441}\uFE0F Hide remove button on first row (back to 1 row)"))}d(`\u2796 Row removed successfully, new total: ${t.rows.length} rows`),e.dispatchEvent(new CustomEvent("cd:row:removed",{bubbles:!0,detail:{groupName:t.groupName,rowIndex:n,removedRow:e}}))}function pn(t,e){ze(t,e)}var qe="tooltip_component",Ze="tooltip_element-wrapper",je="tooltip_tooltip-wrapper",Ke="tooltip_pointer",ae={bottom:"top",top:"bottom",left:"right",right:"left"},hn={top:{start:"left",end:"right",len:"width",translate:"translateX"},bottom:{start:"left",end:"right",len:"width",translate:"translateX"},left:{start:"top",end:"bottom",len:"height",translate:"translateY"},right:{start:"top",end:"bottom",len:"height",translate:"translateY"}};function yn(t){let e=t.closest(`.${qe}`);if(e)return{mode:"standard",comp:e,panel:e.querySelector(`.${je}`),pointer:e.querySelector(`.${Ke}`)};let n=t.closest("[data-tt-group]")||t.parentElement,o=t.getAttribute("data-tt"),s=o?n.querySelector(`.${qe}[data-tt-for="${o}"]`):null;return{mode:"split",comp:s,panel:s?.querySelector(`.${je}`),pointer:s?.querySelector(`.${Ke}`)}}function Je(t){if(t.dataset._ttSetup)return;t.dataset._ttSetup="1";let e=yn(t),{mode:n,comp:o,panel:s,pointer:a}=e;if(!s||!a)return;let i=a.className.includes("is-left")?"left":a.className.includes("is-right")?"right":a.className.includes("is-bottom")?"bottom":"top";function r(){s&&(s.style.display="block",s.style.opacity="1")}function c(){s&&(s.style.opacity="0",s.style.display="none")}let l=!1,u=0;function m(){if(!l||!s||!a)return;requestAnimationFrame(m);let g=t.getBoundingClientRect(),h=s.getBoundingClientRect(),y=document.documentElement.clientWidth,v=document.documentElement.clientHeight,M={bottom:g.bottom+h.height<v,top:g.top-h.height>0,left:g.left-h.width>0,right:g.right+h.width<y},E=M[i]||!M[ae[i]]?i:ae[i];if(n==="standard"){let T=hn[E],ge=ae[E],k=g[T.start],pe=g[T.end],he=h[T.len],ye=(k+pe-he)/2,Ee=(k+pe+he)/2,F=0,ve=E==="left"||E==="right"?v:y;ye<0?F=-ye:ve<Ee&&(F=ve-Ee),s.style.position="",s.style.transform=T.translate+"("+F+"px)",a.style.transform=T.translate+"("+-F+"px) rotate(45deg)";return}s.style.position="fixed";let S=8,b=Math.round(g.left+g.width/2-h.width/2),A=0;E==="bottom"?A=Math.round(g.bottom+S):E==="top"?A=Math.round(g.top-S-h.height):E==="left"?(A=Math.round(g.top+g.height/2-h.height/2),b=Math.round(g.left-S-h.width)):(A=Math.round(g.top+g.height/2-h.height/2),b=Math.round(g.right+S));let L=8;b=Math.max(L,Math.min(b,y-h.width-L)),A=Math.max(L,Math.min(A,v-h.height-L)),s.style.left=b+"px",s.style.top=A+"px",s.style.right="",s.style.bottom="",s.style.transform="none";let P=g.left+g.width/2,et=b+h.width/2,tt=P-et;if(E==="top"||E==="bottom")a.style.transform="translateX("+tt+"px) rotate(45deg)";else{let T=g.top+g.height/2,ge=A+h.height/2,k=T-ge;a.style.transform="translateY("+k+"px) rotate(45deg)"}}function f(){++u===1&&(r(),l=!0,m())}function p(){u>0&&--u===0&&(l=!1,c())}t.addEventListener("mouseenter",f),t.addEventListener("mouseleave",p),(o||s).addEventListener("mouseenter",f),(o||s).addEventListener("mouseleave",p),t.setAttribute("tabindex","0"),t.addEventListener("focus",f),t.addEventListener("blur",p),t.addEventListener("keydown",g=>{g.key==="Escape"&&p()})}function En(t){d("\u{1F4AC} Initializing tooltips for form...");let e=t.querySelectorAll(`.${Ze}`);d(`\u{1F4AC} Found ${e.length} tooltip triggers`),e.forEach(n=>Je(n)),O(`\u2705 Tooltips initialized (${e.length} triggers)`)}function vn(t){d("\u{1F4AC} Reinitializing tooltips in new row...");let e=t.querySelectorAll(`.${Ze}`);d(`\u{1F4AC} Found ${e.length} tooltip triggers in row`),e.forEach(n=>Je(n))}document.addEventListener("form-wrapper-visibility:shown",t=>{t.target.querySelectorAll("[data-cd-repeat-group]").forEach(o=>{let s=o.getAttribute("data-cd-repeat-group");s&&pn(s,o)})});var Xe={};function An(){O("\u{1F33F} Initializing Branch-Based Summary Visibility...");let t=document.querySelectorAll("[data-cd-summary-branch]");d(`\u{1F33F} Found ${t.length} branch summary elements to hide by default`),t.forEach((n,o)=>{let s=n;s.style.display="none",s.setAttribute("aria-hidden","true"),d(`\u{1F33F} Hidden branch summary ${o+1}: ${s.tagName}.${s.className}`)}),new MutationObserver(n=>{n.forEach(o=>{o.type==="attributes"&&o.attributeName==="style"&&o.target.matches(".step_wrapper[data-cd-branch]")&&ie()}),n.forEach(o=>{o.addedNodes.forEach(s=>{if(s.nodeType===1){let a=s;a.matches&&a.matches(".step_wrapper[data-cd-branch]")&&ie()}})})}).observe(document.body,{attributes:!0,attributeFilter:["style"],childList:!0,subtree:!0}),ie(),bn(),O("\u2705 Branch-based summary visibility initialization complete")}function ie(){d("\u{1F33F} BRANCH: Checking branch wrapper visibility..."),document.querySelectorAll(".step_wrapper[data-cd-branch]").forEach(e=>{let n=e;if(window.getComputedStyle(n).display!=="none"&&n.offsetParent!==null){let a=e.getAttribute("data-cd-branch"),i=e.getAttribute("data-answer");a&&i&&(Xe[a]=i,d(`\u{1F33F} BRANCH: Selected ${a} = ${i}`),Qe(a,i))}})}function Qe(t,e){d(`\u{1F33F} BRANCH: Updating summary visibility for ${t}:${e}`);let n=document.querySelectorAll(`[data-cd-summary-branch^="${t}:"]`);d(`\u{1F33F} BRANCH: Found ${n.length} summary sections for branch group "${t}"`),n.forEach((o,s)=>{let a=o.getAttribute("data-cd-summary-branch"),i=o;if(!a)return;let[r,c]=a.split(":"),l=r===t&&c===e;d(`\u{1F33F} BRANCH: Section ${s+1} (${a}): ${l?"SHOW":"HIDE"}`),l?(i.style.display="",i.removeAttribute("aria-hidden"),i.querySelectorAll("input, select, textarea, button, [tabindex]").forEach(m=>{m.removeAttribute("tabindex")}),o.dispatchEvent(new CustomEvent("cd:branch-summary:shown",{bubbles:!0,detail:{branchGroup:t,branchValue:e,summaryBranchAttr:a}}))):r===t&&(i.style.display="none",i.setAttribute("aria-hidden","true"),i.querySelectorAll('input, select, textarea, button, [tabindex]:not([tabindex="-1"])').forEach(m=>{m.setAttribute("tabindex","-1")}),o.dispatchEvent(new CustomEvent("cd:branch-summary:hidden",{bubbles:!0,detail:{branchGroup:t,branchValue:e,summaryBranchAttr:a}})))})}function bn(){d("\u{1F33F} BRANCH: Updating all summary visibility based on selected branches"),Object.entries(Xe).forEach(([t,e])=>{Qe(t,e)})}function Sn(t,e){let n=t.type?.toLowerCase()||t.tagName.toLowerCase(),o=e.type?.toLowerCase()||e.tagName.toLowerCase();if(console.log(`\u{1F4CB} [AUTO-FILL] Copying value: ${n} \u2192 ${o}`,{sourceName:t.getAttribute("name"),destName:e.getAttribute("name"),sourceValue:t.value}),n==="checkbox")e.checked=t.checked,console.log(`\u2705 [AUTO-FILL] Copied checkbox state: ${t.checked}`);else if(n==="radio"){let s=t.getAttribute("name");if(!s){console.warn("\u26A0\uFE0F [AUTO-FILL] Source radio missing name attribute");return}let a=document.querySelector(`input[name="${s}"]:checked`);if(!a){console.log("\u2139\uFE0F [AUTO-FILL] No radio selected in source group");return}let i=e.getAttribute("name");if(!i){console.warn("\u26A0\uFE0F [AUTO-FILL] Dest radio missing name attribute");return}let r=document.querySelector(`input[name="${i}"][value="${a.value}"]`);r?(r.checked=!0,console.log(`\u2705 [AUTO-FILL] Copied radio value: "${a.value}"`)):console.warn(`\u26A0\uFE0F [AUTO-FILL] No matching radio found in dest with value="${a.value}"`)}else if(t.tagName.toLowerCase()==="select"){let s=t,a=e;if(console.log("\u{1F50D} [AUTO-FILL] SELECT Debug:",{sourceValue:s.value,sourceSelectedIndex:s.selectedIndex,sourceOptionsCount:s.options.length,destOptionsCount:a.options.length,sourceOptions:Array.from(s.options).map(i=>({value:i.value,text:i.text,selected:i.selected})),destOptions:Array.from(a.options).map(i=>({value:i.value,text:i.text,selected:i.selected}))}),s.multiple){let i=[];Array.from(a.options).forEach((r,c)=>{r.selected=s.options[c]?.selected||!1,r.selected&&i.push(r.value)}),console.log("\u2705 [AUTO-FILL] Copied multi-select values:",i)}else{let i=s.value,r=Array.from(a.options).find(c=>c.value===i);if(r){a.value=i,console.log(`\u2705 [AUTO-FILL] Copied select value: "${i}"`);let c=a.closest('[fs-combobox-element="dropdown"]');if(c){console.log("\u{1F504} [AUTO-FILL] Detected Finsweet Combo Box, updating text input...");let l=c.querySelector('[fs-combobox-element="text-input"]');l&&(l.value=r.textContent||r.text||i,console.log(`\u2705 [AUTO-FILL] Combo box text input updated: "${l.value}"`))}}else console.warn(`\u26A0\uFE0F [AUTO-FILL] Could not find matching option in destination select. Source value: "${i}"`),console.warn("\u26A0\uFE0F [AUTO-FILL] Available destination options:",Array.from(a.options).map(c=>c.value))}}else e.value=t.value,console.log(`\u2705 [AUTO-FILL] Copied value: "${t.value}"`)}function Mn(t){let e=t.type?.toLowerCase()||t.tagName.toLowerCase(),n=t.getAttribute("name");if(console.log(`\u{1F9F9} [AUTO-FILL] Clearing field: type="${e}", name="${n}"`),e==="checkbox")t.checked=!1;else if(e==="radio")t.checked=!1;else if(t.tagName.toLowerCase()==="select"){let o=t;o.multiple?Array.from(o.options).forEach(s=>{s.selected=!1}):o.selectedIndex=0}else t.value=""}function wn(t,e){console.log(`\u{1F9F9} [AUTO-FILL] Clearing fields for group "${t}"...`);let n=e.querySelector(`[data-cd-auto-dest="${t}"]`);if(!n){console.warn(`\u26A0\uFE0F [AUTO-FILL] Destination container not found: data-cd-auto-dest="${t}"`);return}let o=n.querySelectorAll("[data-cd-field-key]");console.log(`\u{1F9F9} [AUTO-FILL] Found ${o.length} destination fields to clear`),o.forEach(s=>{let a=s.getAttribute("data-cd-field-key");Mn(s),s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),console.log(`\u2705 [AUTO-FILL] Cleared field with key="${a}"`)}),console.log(`\u2705 [AUTO-FILL] Cleared ${o.length} fields for group "${t}"`)}function Ln(t,e){console.log("\u{1F4CB} [AUTO-FILL] ========== COPYING FIELDS =========="),console.log(`\u{1F4CB} [AUTO-FILL] Group: "${t}"`);let n=e.querySelector(`[data-cd-auto-source="${t}"]`);if(!n){console.warn(`\u26A0\uFE0F [AUTO-FILL] Source container not found: data-cd-auto-source="${t}"`),console.warn(`\u26A0\uFE0F [AUTO-FILL] Make sure your source fields are wrapped in an element with data-cd-auto-source="${t}"`);return}console.log("\u2705 [AUTO-FILL] Found source container:",{element:n,tagName:n.tagName,classList:n.className});let o=e.querySelector(`[data-cd-auto-dest="${t}"]`);if(!o){console.warn(`\u26A0\uFE0F [AUTO-FILL] Destination container not found: data-cd-auto-dest="${t}"`),console.warn(`\u26A0\uFE0F [AUTO-FILL] Make sure your destination fields are wrapped in an element with data-cd-auto-dest="${t}"`);return}console.log("\u2705 [AUTO-FILL] Found destination container:",{element:o,tagName:o.tagName,classList:o.className});let s=n.querySelectorAll("[data-cd-field-key]");if(console.log(`\u{1F4CB} [AUTO-FILL] Found ${s.length} source fields to copy`),s.length===0){console.warn("\u26A0\uFE0F [AUTO-FILL] No source fields found with [data-cd-field-key] attribute");return}let a=0;s.forEach((i,r)=>{let c=i.getAttribute("data-cd-field-key");if(!c){console.warn(`\u26A0\uFE0F [AUTO-FILL] Source field ${r+1} missing data-cd-field-key value`);return}console.log(`
\u{1F4CB} [AUTO-FILL] --- Processing field ${r+1}/${s.length} ---`),console.log(`\u{1F4CB} [AUTO-FILL] Field key: "${c}"`);let l=o.querySelector(`[data-cd-field-key="${c}"]`);if(!l){console.warn(`\u26A0\uFE0F [AUTO-FILL] No destination field found for key="${c}"`),console.warn(`\u26A0\uFE0F [AUTO-FILL] Make sure destination has an element with data-cd-field-key="${c}"`);return}console.log(`\u2705 [AUTO-FILL] Found destination field for key="${c}"`),Sn(i,l),a++,l.dispatchEvent(new Event("input",{bubbles:!0})),l.dispatchEvent(new Event("change",{bubbles:!0})),console.log(`\u{1F4E4} [AUTO-FILL] Dispatched input/change events for key="${c}"`)}),console.log(`
\u2705 [AUTO-FILL] ========== COPY COMPLETE ==========`),console.log(`\u2705 [AUTO-FILL] Successfully copied ${a}/${s.length} fields for group "${t}"`)}function Tn(t){console.log("\u{1F504} [AUTO-FILL] Initializing Auto-Fill for form...");let e=t.querySelectorAll("[data-cd-auto-trigger]");if(console.log(`\u{1F504} [AUTO-FILL] Found ${e.length} auto-fill triggers`),e.length===0){console.log("\u2139\uFE0F [AUTO-FILL] No triggers found, skipping auto-fill initialization");return}e.forEach((n,o)=>{let s=n.getAttribute("data-cd-auto-trigger");if(!s){console.warn("\u26A0\uFE0F [AUTO-FILL] Trigger missing group name:",n);return}console.log(`\u{1F504} [AUTO-FILL] Setting up trigger ${o+1}/${e.length}:`,{element:n,tagName:n.tagName,type:n.type,groupName:s}),n.addEventListener("change",a=>{let i=a.target;console.log(`
\u{1F514} [AUTO-FILL] ========== TRIGGER CHANGED ==========`),console.log(`\u{1F514} [AUTO-FILL] Group: "${s}"`),console.log(`\u{1F514} [AUTO-FILL] Checked: ${i.checked}`),console.log(`\u{1F514} [AUTO-FILL] Value: "${i.value}"`),i.checked?Ln(s,t):wn(s,t)}),console.log(`\u2705 [AUTO-FILL] Trigger ${o+1} ready: group="${s}"`)}),console.log(`\u2705 [AUTO-FILL] Auto-fill initialization complete (${e.length} triggers)`)}function We(){console.log("\u23ED\uFE0F [CD SKIP] Initializing Skip Navigation...");let t=document.querySelectorAll("[data-cd-skip]");console.log(`\u23ED\uFE0F [CD SKIP] Found ${t.length} skip buttons`),t.length>0?t.forEach((e,n)=>{let o=e.getAttribute("data-cd-skip");console.log(`\u23ED\uFE0F [CD SKIP] Button ${n+1}:`,{element:e,tagName:e.tagName,classList:e.className,targetStep:o}),e.addEventListener("click",Cn)}):console.warn("\u26A0\uFE0F [CD SKIP] No buttons found with [data-cd-skip] attribute"),console.log(`\u2705 [CD SKIP] Skip navigation initialized (${t.length} buttons)`)}function Cn(t){console.log("\u{1F5B1}\uFE0F [CD SKIP] ========== SKIP BUTTON CLICKED =========="),console.log("\u{1F5B1}\uFE0F [CD SKIP] Event:",t),t.preventDefault();let e=t.currentTarget,n=e.getAttribute("data-cd-skip");if(console.log("\u{1F50D} [CD SKIP] Button details:",{element:e,tagName:e.tagName,classList:e.className,"data-cd-skip":n}),!n){console.error("\u274C [CD SKIP] No target specified in data-cd-skip attribute");return}console.log("\u{1F3AF} [CD SKIP] LOOKING FOR MATCH:"),console.log(`   Button has: data-cd-skip="${n}"`),console.log(`   Searching for step with: data-answer="${n}"`);let o=document.querySelector(`[data-answer="${n}"]`);if(!o){console.error("\u274C [CD SKIP] ========== NO MATCH FOUND =========="),console.error(`   Button's data-cd-skip value: "${n}"`),console.error(`   Could not find any step with: data-answer="${n}"`);let l=document.querySelectorAll("[data-answer]");console.log(`
\u{1F4CB} [CD SKIP] Available steps (${l.length} total):`),l.forEach((u,m)=>{let f=u.getAttribute("data-answer"),p=f===n;console.log(`   ${p?"\u2705":"  "} ${m+1}. data-answer="${f}"${p?" \u2190 MATCH!":""}`)}),console.log(`
\u{1F4A1} [CD SKIP] TIP: Make sure data-cd-skip="${n}" matches one of the data-answer values above`);return}let s=o.getAttribute("data-answer");console.log("\u2705 [CD SKIP] ========== MATCH FOUND =========="),console.log(`   Button's data-cd-skip: "${n}"`),console.log(`   Step's data-answer: "${s}"`),console.log(`   Match: ${n===s?"\u2705 YES":"\u274C NO"}`),console.log("   Target step:",{element:o,tagName:o.tagName,classList:o.className});let a=document.querySelectorAll('[data-form="step"]');console.log(`\u{1F441}\uFE0F [CD SKIP] Hiding ${a.length} total steps`),a.forEach((l,u)=>{let m=l;m.style.display="none",m.classList.remove("active-answer-card"),console.log(`  ${u+1}. Hidden step:`,l.getAttribute("data-answer")||"no data-answer")});let i=o;console.log("\u{1F50D} [CD SKIP] Target step BEFORE changes:",{display:getComputedStyle(i).display,inlineDisplay:i.style.display,visibility:getComputedStyle(i).visibility,opacity:getComputedStyle(i).opacity,classList:i.className,offsetHeight:i.offsetHeight,offsetWidth:i.offsetWidth}),i.style.display="block",i.style.visibility="visible",i.style.opacity="1",i.classList.add("active-answer-card"),console.log("\u{1F50D} [CD SKIP] Target step AFTER changes:",{display:getComputedStyle(i).display,inlineDisplay:i.style.display,visibility:getComputedStyle(i).visibility,opacity:getComputedStyle(i).opacity,classList:i.className,offsetHeight:i.offsetHeight,offsetWidth:i.offsetWidth,isVisible:i.offsetHeight>0&&i.offsetWidth>0}),console.log(`\u{1F441}\uFE0F [CD SKIP] Target step now visible (display="${i.style.display}")`);let r=document.querySelector('[data-text="current-step"]');if(r){let u=Array.from(a).indexOf(o);u!==-1&&(r.textContent=String(u+1),console.log(`\u{1F522} [CD SKIP] Updated step counter to: ${u+1}`))}else console.log('\u2139\uFE0F [CD SKIP] No step counter found ([data-text="current-step"])');typeof window.TryFormly?.refresh=="function"?(console.log("\u{1F504} [CD SKIP] Triggering TryFormly.refresh()"),window.TryFormly.refresh()):console.log("\u2139\uFE0F [CD SKIP] TryFormly.refresh() not available");let c=o.closest("form");c?(console.log("\u{1F4DC} [CD SKIP] Scrolling to form"),c.scrollIntoView({behavior:"smooth",block:"start"})):console.log("\u2139\uFE0F [CD SKIP] No parent form found for scrolling"),o.dispatchEvent(new CustomEvent("cd:skip:navigated",{bubbles:!0,detail:{targetAnswer:n,button:e}})),console.log(`\u2705 [CD SKIP] ========== SKIP COMPLETE: "${n}" ==========`)}function le(){let t=document.querySelectorAll('form[data-cd-form="true"]');if(t.length===0){console.warn('\u26A0\uFE0F [CD FORM] No forms found with data-cd-form="true"'),We();return}t.forEach((e,n)=>{let o=e;try{rn(o),sn(o),ln(),cn(),Tn(o),An(),En(o),o.dispatchEvent(new CustomEvent("cdForm:validated",{bubbles:!0}))}catch(s){console.error("\u274C Error enhancing form:",s),s instanceof Error&&console.error("\u274C Stack trace:",s.stack)}}),We()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",le):le();window.CDFormLibrary={version:nn,initialize:le,dynamicRows:J};})();
